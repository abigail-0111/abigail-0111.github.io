import{b0 as fa,l as Qn,b1 as es,aQ as ts,_ as F,b2 as oa,b3 as ca,b4 as da,g as ha,b5 as Ct,b6 as tr,b7 as Qe,b8 as ua,b9 as Et,ba as la,a as V,bb as ai,bc as xn,bd as ba,be as fi,bf as pa,bg as Mn,af as va,y as ma,W as or,A as ga,h as ya,i as Ge,C as oi,n as vt,j as Gt,k as Yt,q as _t,o as wa,bh as Sn,m as xa}from"./home-ed124d89.js";import{bi as Lh,bj as qh,bk as $h,bl as zh,bm as Dh,br as Kh,bn as Uh,bo as Fh,bp as Hh,bq as Jh}from"./home-ed124d89.js";import{i as Er,a as ir}from"./inherits_browser-7138953a.js";import{g as Ma,d as Sa}from"./index-6fdc2892.js";import{r as _a}from"./index-83bc3ffd.js";import"./_plugin-vue_export-helper-c27b6911.js";var qi=function(){function r(e){this.ttl=e,this.map=new Map,this._to=!1}return r.prototype.has=function(e){return this.map.has(e)},r.prototype.add=function(e){var t=this;this.map.set(e,rs()),this._to||(this._to=!0,setTimeout(function(){t._to=!1,Aa(t)},0))},r.prototype.clear=function(){this.map.clear()},r}();function Aa(r){for(var e=rs()-r.ttl,t=r.map[Symbol.iterator]();;){var i=t.next().value;if(!i)return;var s=i[0],n=i[1];if(n<e)r.map.delete(s);else return}}function rs(){return new Date().getTime()}function _n(r,e,t,i,s,n,c){try{var u=r[n](c),p=u.value}catch(y){t(y);return}u.done?e(p):Promise.resolve(p).then(i,s)}function wr(r){return function(){var e=this,t=arguments;return new Promise(function(i,s){var n=r.apply(e,t);function c(p){_n(n,i,s,c,u,"next",p)}function u(p){_n(n,i,s,c,u,"throw",p)}c(void 0)})}}var is={exports:{}},ns={exports:{}};(function(r){function e(t){"@babel/helpers - typeof";return r.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},r.exports.__esModule=!0,r.exports.default=r.exports,e(t)}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports})(ns);var Ea=ns.exports;(function(r){var e=Ea.default;function t(){r.exports=t=function(){return s},r.exports.__esModule=!0,r.exports.default=r.exports;var i,s={},n=Object.prototype,c=n.hasOwnProperty,u=Object.defineProperty||function(d,f,h){d[f]=h.value},p=typeof Symbol=="function"?Symbol:{},y=p.iterator||"@@iterator",g=p.asyncIterator||"@@asyncIterator",x=p.toStringTag||"@@toStringTag";function _(d,f,h){return Object.defineProperty(d,f,{value:h,enumerable:!0,configurable:!0,writable:!0}),d[f]}try{_({},"")}catch{_=function(h,I,k){return h[I]=k}}function S(d,f,h,I){var k=f&&f.prototype instanceof H?f:H,P=Object.create(k.prototype),R=new w(I||[]);return u(P,"_invoke",{value:o(d,h,R)}),P}function A(d,f,h){try{return{type:"normal",arg:d.call(f,h)}}catch(I){return{type:"throw",arg:I}}}s.wrap=S;var E="suspendedStart",N="suspendedYield",B="executing",O="completed",L={};function H(){}function K(){}function W(){}var Le={};_(Le,y,function(){return this});var qe=Object.getPrototypeOf,$=qe&&qe(qe(M([])));$&&$!==n&&c.call($,y)&&(Le=$);var Te=W.prototype=H.prototype=Object.create(Le);function m(d){["next","throw","return"].forEach(function(f){_(d,f,function(h){return this._invoke(f,h)})})}function a(d,f){function h(k,P,R,T){var C=A(d[k],d,P);if(C.type!=="throw"){var $e=C.arg,z=$e.value;return z&&e(z)=="object"&&c.call(z,"__await")?f.resolve(z.__await).then(function(U){h("next",U,R,T)},function(U){h("throw",U,R,T)}):f.resolve(z).then(function(U){$e.value=U,R($e)},function(U){return h("throw",U,R,T)})}T(C.arg)}var I;u(this,"_invoke",{value:function(P,R){function T(){return new f(function(C,$e){h(P,R,C,$e)})}return I=I?I.then(T,T):T()}})}function o(d,f,h){var I=E;return function(k,P){if(I===B)throw new Error("Generator is already running");if(I===O){if(k==="throw")throw P;return{value:i,done:!0}}for(h.method=k,h.arg=P;;){var R=h.delegate;if(R){var T=l(R,h);if(T){if(T===L)continue;return T}}if(h.method==="next")h.sent=h._sent=h.arg;else if(h.method==="throw"){if(I===E)throw I=O,h.arg;h.dispatchException(h.arg)}else h.method==="return"&&h.abrupt("return",h.arg);I=B;var C=A(d,f,h);if(C.type==="normal"){if(I=h.done?O:N,C.arg===L)continue;return{value:C.arg,done:h.done}}C.type==="throw"&&(I=O,h.method="throw",h.arg=C.arg)}}}function l(d,f){var h=f.method,I=d.iterator[h];if(I===i)return f.delegate=null,h==="throw"&&d.iterator.return&&(f.method="return",f.arg=i,l(d,f),f.method==="throw")||h!=="return"&&(f.method="throw",f.arg=new TypeError("The iterator does not provide a '"+h+"' method")),L;var k=A(I,d.iterator,f.arg);if(k.type==="throw")return f.method="throw",f.arg=k.arg,f.delegate=null,L;var P=k.arg;return P?P.done?(f[d.resultName]=P.value,f.next=d.nextLoc,f.method!=="return"&&(f.method="next",f.arg=i),f.delegate=null,L):P:(f.method="throw",f.arg=new TypeError("iterator result is not an object"),f.delegate=null,L)}function b(d){var f={tryLoc:d[0]};1 in d&&(f.catchLoc=d[1]),2 in d&&(f.finallyLoc=d[2],f.afterLoc=d[3]),this.tryEntries.push(f)}function v(d){var f=d.completion||{};f.type="normal",delete f.arg,d.completion=f}function w(d){this.tryEntries=[{tryLoc:"root"}],d.forEach(b,this),this.reset(!0)}function M(d){if(d||d===""){var f=d[y];if(f)return f.call(d);if(typeof d.next=="function")return d;if(!isNaN(d.length)){var h=-1,I=function k(){for(;++h<d.length;)if(c.call(d,h))return k.value=d[h],k.done=!1,k;return k.value=i,k.done=!0,k};return I.next=I}}throw new TypeError(e(d)+" is not iterable")}return K.prototype=W,u(Te,"constructor",{value:W,configurable:!0}),u(W,"constructor",{value:K,configurable:!0}),K.displayName=_(W,x,"GeneratorFunction"),s.isGeneratorFunction=function(d){var f=typeof d=="function"&&d.constructor;return!!f&&(f===K||(f.displayName||f.name)==="GeneratorFunction")},s.mark=function(d){return Object.setPrototypeOf?Object.setPrototypeOf(d,W):(d.__proto__=W,_(d,x,"GeneratorFunction")),d.prototype=Object.create(Te),d},s.awrap=function(d){return{__await:d}},m(a.prototype),_(a.prototype,g,function(){return this}),s.AsyncIterator=a,s.async=function(d,f,h,I,k){k===void 0&&(k=Promise);var P=new a(S(d,f,h,I),k);return s.isGeneratorFunction(f)?P:P.next().then(function(R){return R.done?R.value:P.next()})},m(Te),_(Te,x,"Generator"),_(Te,y,function(){return this}),_(Te,"toString",function(){return"[object Generator]"}),s.keys=function(d){var f=Object(d),h=[];for(var I in f)h.push(I);return h.reverse(),function k(){for(;h.length;){var P=h.pop();if(P in f)return k.value=P,k.done=!1,k}return k.done=!0,k}},s.values=M,w.prototype={constructor:w,reset:function(f){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(v),!f)for(var h in this)h.charAt(0)==="t"&&c.call(this,h)&&!isNaN(+h.slice(1))&&(this[h]=i)},stop:function(){this.done=!0;var f=this.tryEntries[0].completion;if(f.type==="throw")throw f.arg;return this.rval},dispatchException:function(f){if(this.done)throw f;var h=this;function I($e,z){return R.type="throw",R.arg=f,h.next=$e,z&&(h.method="next",h.arg=i),!!z}for(var k=this.tryEntries.length-1;k>=0;--k){var P=this.tryEntries[k],R=P.completion;if(P.tryLoc==="root")return I("end");if(P.tryLoc<=this.prev){var T=c.call(P,"catchLoc"),C=c.call(P,"finallyLoc");if(T&&C){if(this.prev<P.catchLoc)return I(P.catchLoc,!0);if(this.prev<P.finallyLoc)return I(P.finallyLoc)}else if(T){if(this.prev<P.catchLoc)return I(P.catchLoc,!0)}else{if(!C)throw new Error("try statement without catch or finally");if(this.prev<P.finallyLoc)return I(P.finallyLoc)}}}},abrupt:function(f,h){for(var I=this.tryEntries.length-1;I>=0;--I){var k=this.tryEntries[I];if(k.tryLoc<=this.prev&&c.call(k,"finallyLoc")&&this.prev<k.finallyLoc){var P=k;break}}P&&(f==="break"||f==="continue")&&P.tryLoc<=h&&h<=P.finallyLoc&&(P=null);var R=P?P.completion:{};return R.type=f,R.arg=h,P?(this.method="next",this.next=P.finallyLoc,L):this.complete(R)},complete:function(f,h){if(f.type==="throw")throw f.arg;return f.type==="break"||f.type==="continue"?this.next=f.arg:f.type==="return"?(this.rval=this.arg=f.arg,this.method="return",this.next="end"):f.type==="normal"&&h&&(this.next=h),L},finish:function(f){for(var h=this.tryEntries.length-1;h>=0;--h){var I=this.tryEntries[h];if(I.finallyLoc===f)return this.complete(I.completion,I.afterLoc),v(I),L}},catch:function(f){for(var h=this.tryEntries.length-1;h>=0;--h){var I=this.tryEntries[h];if(I.tryLoc===f){var k=I.completion;if(k.type==="throw"){var P=k.arg;v(I)}return P}}throw new Error("illegal catch attempt")},delegateYield:function(f,h,I){return this.delegate={iterator:M(f),resultName:h,nextLoc:I},this.method==="next"&&(this.arg=i),L}},s}r.exports=t,r.exports.__esModule=!0,r.exports.default=r.exports})(is);var Ia=is.exports,pr=Ia(),Pa=pr;try{regeneratorRuntime=pr}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=pr:Function("r","regeneratorRuntime = r")(pr)}const gt=Ma(Pa),nt=Object.create(null);nt.open="0";nt.close="1";nt.ping="2";nt.pong="3";nt.message="4";nt.upgrade="5";nt.noop="6";const vr=Object.create(null);Object.keys(nt).forEach(r=>{vr[nt[r]]=r});const Ei={type:"error",data:"parser error"},ss=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",as=typeof ArrayBuffer=="function",fs=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer,$i=({type:r,data:e},t,i)=>ss&&e instanceof Blob?t?i(e):An(e,i):as&&(e instanceof ArrayBuffer||fs(e))?t?i(e):An(new Blob([e]),i):i(nt[r]+(e||"")),An=(r,e)=>{const t=new FileReader;return t.onload=function(){const i=t.result.split(",")[1];e("b"+(i||""))},t.readAsDataURL(r)};function En(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}let ci;function ka(r,e){if(ss&&r.data instanceof Blob)return r.data.arrayBuffer().then(En).then(e);if(as&&(r.data instanceof ArrayBuffer||fs(r.data)))return e(En(r.data));$i(r,!1,t=>{ci||(ci=new TextEncoder),e(ci.encode(t))})}const In="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",er=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let r=0;r<In.length;r++)er[In.charCodeAt(r)]=r;const Ra=r=>{let e=r.length*.75,t=r.length,i,s=0,n,c,u,p;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);const y=new ArrayBuffer(e),g=new Uint8Array(y);for(i=0;i<t;i+=4)n=er[r.charCodeAt(i)],c=er[r.charCodeAt(i+1)],u=er[r.charCodeAt(i+2)],p=er[r.charCodeAt(i+3)],g[s++]=n<<2|c>>4,g[s++]=(c&15)<<4|u>>2,g[s++]=(u&3)<<6|p&63;return y},Ba=typeof ArrayBuffer=="function",zi=(r,e)=>{if(typeof r!="string")return{type:"message",data:os(r,e)};const t=r.charAt(0);return t==="b"?{type:"message",data:Na(r.substring(1),e)}:vr[t]?r.length>1?{type:vr[t],data:r.substring(1)}:{type:vr[t]}:Ei},Na=(r,e)=>{if(Ba){const t=Ra(r);return os(t,e)}else return{base64:!0,data:r}},os=(r,e)=>{switch(e){case"blob":return r instanceof Blob?r:new Blob([r]);case"arraybuffer":default:return r instanceof ArrayBuffer?r:r.buffer}},cs=String.fromCharCode(30),Oa=(r,e)=>{const t=r.length,i=new Array(t);let s=0;r.forEach((n,c)=>{$i(n,!1,u=>{i[c]=u,++s===t&&e(i.join(cs))})})},Ta=(r,e)=>{const t=r.split(cs),i=[];for(let s=0;s<t.length;s++){const n=zi(t[s],e);if(i.push(n),n.type==="error")break}return i};function Ca(){return new TransformStream({transform(r,e){ka(r,t=>{const i=t.length;let s;if(i<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,i);else if(i<65536){s=new Uint8Array(3);const n=new DataView(s.buffer);n.setUint8(0,126),n.setUint16(1,i)}else{s=new Uint8Array(9);const n=new DataView(s.buffer);n.setUint8(0,127),n.setBigUint64(1,BigInt(i))}r.data&&typeof r.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(t)})}})}let di;function cr(r){return r.reduce((e,t)=>e+t.length,0)}function dr(r,e){if(r[0].length===e)return r.shift();const t=new Uint8Array(e);let i=0;for(let s=0;s<e;s++)t[s]=r[0][i++],i===r[0].length&&(r.shift(),i=0);return r.length&&i<r[0].length&&(r[0]=r[0].slice(i)),t}function La(r,e){di||(di=new TextDecoder);const t=[];let i=0,s=-1,n=!1;return new TransformStream({transform(c,u){for(t.push(c);;){if(i===0){if(cr(t)<1)break;const p=dr(t,1);n=(p[0]&128)===128,s=p[0]&127,s<126?i=3:s===126?i=1:i=2}else if(i===1){if(cr(t)<2)break;const p=dr(t,2);s=new DataView(p.buffer,p.byteOffset,p.length).getUint16(0),i=3}else if(i===2){if(cr(t)<8)break;const p=dr(t,8),y=new DataView(p.buffer,p.byteOffset,p.length),g=y.getUint32(0);if(g>Math.pow(2,53-32)-1){u.enqueue(Ei);break}s=g*Math.pow(2,32)+y.getUint32(4),i=3}else{if(cr(t)<s)break;const p=dr(t,s);u.enqueue(zi(n?p:di.decode(p),e)),i=0}if(s===0||s>r){u.enqueue(Ei);break}}}})}const ds=4;function Re(r){if(r)return qa(r)}function qa(r){for(var e in Re.prototype)r[e]=Re.prototype[e];return r}Re.prototype.on=Re.prototype.addEventListener=function(r,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(e),this};Re.prototype.once=function(r,e){function t(){this.off(r,t),e.apply(this,arguments)}return t.fn=e,this.on(r,t),this};Re.prototype.off=Re.prototype.removeListener=Re.prototype.removeAllListeners=Re.prototype.removeEventListener=function(r,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+r];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var i,s=0;s<t.length;s++)if(i=t[s],i===e||i.fn===e){t.splice(s,1);break}return t.length===0&&delete this._callbacks["$"+r],this};Re.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+r],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(t){t=t.slice(0);for(var i=0,s=t.length;i<s;++i)t[i].apply(this,e)}return this};Re.prototype.emitReserved=Re.prototype.emit;Re.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};Re.prototype.hasListeners=function(r){return!!this.listeners(r).length};const He=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function hs(r,...e){return e.reduce((t,i)=>(r.hasOwnProperty(i)&&(t[i]=r[i]),t),{})}const $a=He.setTimeout,za=He.clearTimeout;function Ir(r,e){e.useNativeTimers?(r.setTimeoutFn=$a.bind(He),r.clearTimeoutFn=za.bind(He)):(r.setTimeoutFn=He.setTimeout.bind(He),r.clearTimeoutFn=He.clearTimeout.bind(He))}const Da=1.33;function Ka(r){return typeof r=="string"?Ua(r):Math.ceil((r.byteLength||r.size)*Da)}function Ua(r){let e=0,t=0;for(let i=0,s=r.length;i<s;i++)e=r.charCodeAt(i),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(i++,t+=4);return t}function Fa(r){let e="";for(let t in r)r.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(r[t]));return e}function Ha(r){let e={},t=r.split("&");for(let i=0,s=t.length;i<s;i++){let n=t[i].split("=");e[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}return e}class Ja extends Error{constructor(e,t,i){super(e),this.description=t,this.context=i,this.type="TransportError"}}class Di extends Re{constructor(e){super(),this.writable=!1,Ir(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,t,i){return super.emitReserved("error",new Ja(e,t,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=zi(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=Fa(e);return t.length?"?"+t:""}}const us="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Ii=64,Va={};let Pn=0,hr=0,kn;function Rn(r){let e="";do e=us[r%Ii]+e,r=Math.floor(r/Ii);while(r>0);return e}function ls(){const r=Rn(+new Date);return r!==kn?(Pn=0,kn=r):r+"."+Rn(Pn++)}for(;hr<Ii;hr++)Va[us[hr]]=hr;let bs=!1;try{bs=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Wa=bs;function ps(r){const e=r.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Wa))return new XMLHttpRequest}catch{}if(!e)try{return new He[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function ja(){}const Ga=function(){return new ps({xdomain:!1}).responseType!=null}();class Ya extends Di{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const i=location.protocol==="https:";let s=location.port;s||(s=i?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||s!==e.port}const t=e&&e.forceBase64;this.supportsBinary=Ga&&!t,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let i=0;this.polling&&(i++,this.once("pollComplete",function(){--i||t()})),this.writable||(i++,this.once("drain",function(){--i||t()}))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};Ta(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Oa(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=ls()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new et(this.uri(),e)}doWrite(e,t){const i=this.request({method:"POST",data:e});i.on("success",t),i.on("error",(s,n)=>{this.onError("xhr post error",s,n)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,i)=>{this.onError("xhr poll error",t,i)}),this.pollXhr=e}}class et extends Re{constructor(e,t){super(),Ir(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.data=t.data!==void 0?t.data:null,this.create()}create(){var e;const t=hs(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd;const i=this.xhr=new ps(t);try{i.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let s in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(s)&&i.setRequestHeader(s,this.opts.extraHeaders[s])}}catch{}if(this.method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(e=this.opts.cookieJar)===null||e===void 0||e.addCookies(i),"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=>{var s;i.readyState===3&&((s=this.opts.cookieJar)===null||s===void 0||s.parseCookies(i)),i.readyState===4&&(i.status===200||i.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof i.status=="number"?i.status:0)},0))},i.send(this.data)}catch(s){this.setTimeoutFn(()=>{this.onError(s)},0);return}typeof document<"u"&&(this.index=et.requestsCount++,et.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=ja,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete et.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}et.requestsCount=0;et.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Bn);else if(typeof addEventListener=="function"){const r="onpagehide"in He?"pagehide":"unload";addEventListener(r,Bn,!1)}}function Bn(){for(let r in et.requests)et.requests.hasOwnProperty(r)&&et.requests[r].abort()}const Ki=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0))(),ur=He.WebSocket||He.MozWebSocket,Nn=!0,Xa="arraybuffer",On=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Za extends Di{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,i=On?{}:hs(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=Nn&&!On?t?new ur(e,t):new ur(e):new ur(e,t,i)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const i=e[t],s=t===e.length-1;$i(i,this.supportsBinary,n=>{const c={};try{Nn&&this.ws.send(n)}catch{}s&&Ki(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=ls()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}check(){return!!ur}}class Qa extends Di{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{const t=La(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=e.readable.pipeThrough(t).getReader(),s=Ca();s.readable.pipeTo(e.writable),this.writer=s.writable.getWriter();const n=()=>{i.read().then(({done:u,value:p})=>{u||(this.onPacket(p),n())}).catch(u=>{})};n();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this.writer.write(c).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const i=e[t],s=t===e.length-1;this.writer.write(i).then(()=>{s&&Ki(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this.transport)===null||e===void 0||e.close()}}const ef={websocket:Za,webtransport:Qa,polling:Ya},tf=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,rf=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Pi(r){const e=r,t=r.indexOf("["),i=r.indexOf("]");t!=-1&&i!=-1&&(r=r.substring(0,t)+r.substring(t,i).replace(/:/g,";")+r.substring(i,r.length));let s=tf.exec(r||""),n={},c=14;for(;c--;)n[rf[c]]=s[c]||"";return t!=-1&&i!=-1&&(n.source=e,n.host=n.host.substring(1,n.host.length-1).replace(/;/g,":"),n.authority=n.authority.replace("[","").replace("]","").replace(/;/g,":"),n.ipv6uri=!0),n.pathNames=nf(n,n.path),n.queryKey=sf(n,n.query),n}function nf(r,e){const t=/\/{2,9}/g,i=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&i.splice(0,1),e.slice(-1)=="/"&&i.splice(i.length-1,1),i}function sf(r,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,s,n){s&&(t[s]=n)}),t}let vs=class Ot extends Re{constructor(e,t={}){super(),this.binaryType=Xa,this.writeBuffer=[],e&&typeof e=="object"&&(t=e,e=null),e?(e=Pi(e),t.hostname=e.host,t.secure=e.protocol==="https"||e.protocol==="wss",t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=Pi(t.host).host),Ir(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Ha(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=ds,t.transport=e,this.id&&(t.sid=this.id);const i=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new ef[e](i)}open(){let e;if(this.opts.rememberUpgrade&&Ot.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",t=>this.onClose("transport close",t))}probe(e){let t=this.createTransport(e),i=!1;Ot.priorWebsocketSuccess=!1;const s=()=>{i||(t.send([{type:"ping",data:"probe"}]),t.once("packet",x=>{if(!i)if(x.type==="pong"&&x.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Ot.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(g(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const _=new Error("probe error");_.transport=t.name,this.emitReserved("upgradeError",_)}}))};function n(){i||(i=!0,g(),t.close(),t=null)}const c=x=>{const _=new Error("probe error: "+x);_.transport=t.name,n(),this.emitReserved("upgradeError",_)};function u(){c("transport closed")}function p(){c("socket closed")}function y(x){t&&x.name!==t.name&&n()}const g=()=>{t.removeListener("open",s),t.removeListener("error",c),t.removeListener("close",u),this.off("close",p),this.off("upgrading",y)};t.once("open",s),t.once("error",c),t.once("close",u),this.once("close",p),this.once("upgrading",y),this.upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{i||t.open()},200):t.open()}onOpen(){if(this.readyState="open",Ot.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let i=0;i<this.writeBuffer.length;i++){const s=this.writeBuffer[i].data;if(s&&(t+=Ka(s)),i>0&&t>this.maxPayload)return this.writeBuffer.slice(0,i);t+=2}return this.writeBuffer}write(e,t,i){return this.sendPacket("message",e,t,i),this}send(e,t,i){return this.sendPacket("message",e,t,i),this}sendPacket(e,t,i,s){if(typeof t=="function"&&(s=t,t=void 0),typeof i=="function"&&(s=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const n={type:e,data:t,options:i};this.emitReserved("packetCreate",n),this.writeBuffer.push(n),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},i=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():e()}):this.upgrading?i():e()),this}onError(e){Ot.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,t){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let i=0;const s=e.length;for(;i<s;i++)~this.transports.indexOf(e[i])&&t.push(e[i]);return t}};vs.protocol=ds;function af(r,e="",t){let i=r;t=t||typeof location<"u"&&location,r==null&&(r=t.protocol+"//"+t.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=t.protocol+r:r=t.host+r),/^(https?|wss?):\/\//.test(r)||(typeof t<"u"?r=t.protocol+"//"+r:r="https://"+r),i=Pi(r)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const n=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+n+":"+i.port+e,i.href=i.protocol+"://"+n+(t&&t.port===i.port?"":":"+i.port),i}const ff=typeof ArrayBuffer=="function",of=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,ms=Object.prototype.toString,cf=typeof Blob=="function"||typeof Blob<"u"&&ms.call(Blob)==="[object BlobConstructor]",df=typeof File=="function"||typeof File<"u"&&ms.call(File)==="[object FileConstructor]";function Ui(r){return ff&&(r instanceof ArrayBuffer||of(r))||cf&&r instanceof Blob||df&&r instanceof File}function mr(r,e){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let t=0,i=r.length;t<i;t++)if(mr(r[t]))return!0;return!1}if(Ui(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return mr(r.toJSON(),!0);for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&mr(r[t]))return!0;return!1}function hf(r){const e=[],t=r.data,i=r;return i.data=ki(t,e),i.attachments=e.length,{packet:i,buffers:e}}function ki(r,e){if(!r)return r;if(Ui(r)){const t={_placeholder:!0,num:e.length};return e.push(r),t}else if(Array.isArray(r)){const t=new Array(r.length);for(let i=0;i<r.length;i++)t[i]=ki(r[i],e);return t}else if(typeof r=="object"&&!(r instanceof Date)){const t={};for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=ki(r[i],e));return t}return r}function uf(r,e){return r.data=Ri(r.data,e),delete r.attachments,r}function Ri(r,e){if(!r)return r;if(r&&r._placeholder===!0){if(typeof r.num=="number"&&r.num>=0&&r.num<e.length)return e[r.num];throw new Error("illegal attachments")}else if(Array.isArray(r))for(let t=0;t<r.length;t++)r[t]=Ri(r[t],e);else if(typeof r=="object")for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&(r[t]=Ri(r[t],e));return r}const lf=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],bf=5;var D;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(D||(D={}));class pf{constructor(e){this.replacer=e}encode(e){return(e.type===D.EVENT||e.type===D.ACK)&&mr(e)?this.encodeAsBinary({type:e.type===D.EVENT?D.BINARY_EVENT:D.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===D.BINARY_EVENT||e.type===D.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=hf(e),i=this.encodeAsString(t.packet),s=t.buffers;return s.unshift(i),s}}function Tn(r){return Object.prototype.toString.call(r)==="[object Object]"}class Fi extends Re{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const i=t.type===D.BINARY_EVENT;i||t.type===D.BINARY_ACK?(t.type=i?D.EVENT:D.ACK,this.reconstructor=new vf(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(Ui(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const i={type:Number(e.charAt(0))};if(D[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===D.BINARY_EVENT||i.type===D.BINARY_ACK){const n=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const c=e.substring(n,t);if(c!=Number(c)||e.charAt(t)!=="-")throw new Error("Illegal attachments");i.attachments=Number(c)}if(e.charAt(t+1)==="/"){const n=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););i.nsp=e.substring(n,t)}else i.nsp="/";const s=e.charAt(t+1);if(s!==""&&Number(s)==s){const n=t+1;for(;++t;){const c=e.charAt(t);if(c==null||Number(c)!=c){--t;break}if(t===e.length)break}i.id=Number(e.substring(n,t+1))}if(e.charAt(++t)){const n=this.tryParse(e.substr(t));if(Fi.isPayloadValid(i.type,n))i.data=n;else throw new Error("invalid payload")}return i}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case D.CONNECT:return Tn(t);case D.DISCONNECT:return t===void 0;case D.CONNECT_ERROR:return typeof t=="string"||Tn(t);case D.EVENT:case D.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&lf.indexOf(t[0])===-1);case D.ACK:case D.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class vf{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=uf(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const mf=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Fi,Encoder:pf,get PacketType(){return D},protocol:bf},Symbol.toStringTag,{value:"Module"}));function Xe(r,e,t){return r.on(e,t),function(){r.off(e,t)}}const gf=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class gs extends Re{constructor(e,t,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Xe(e,"open",this.onopen.bind(this)),Xe(e,"packet",this.onpacket.bind(this)),Xe(e,"error",this.onerror.bind(this)),Xe(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(gf.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const i={type:D.EVENT,data:t};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const c=this.ids++,u=t.pop();this._registerAckCallback(c,u),i.id=c}const s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!s||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(e,t){var i;const s=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(s===void 0){this.acks[e]=t;return}const n=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===e&&this.sendBuffer.splice(c,1);t.call(this,new Error("operation has timed out"))},s);this.acks[e]=(...c)=>{this.io.clearTimeoutFn(n),t.apply(this,[null,...c])}}emitWithAck(e,...t){const i=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((s,n)=>{t.push((c,u)=>i?c?n(c):s(u):s(c)),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...n)=>i!==this._queue[0]?void 0:(s!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(s)):(this._queue.shift(),t&&t(null,...n)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:D.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case D.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case D.EVENT:case D.BINARY_EVENT:this.onevent(e);break;case D.ACK:case D.BINARY_ACK:this.onack(e);break;case D.DISCONNECT:this.ondisconnect();break;case D.CONNECT_ERROR:this.destroy();const i=new Error(e.data.message);i.data=e.data.data,this.emitReserved("connect_error",i);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const i of t)i.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let i=!1;return function(...s){i||(i=!0,t.packet({type:D.ACK,id:e,data:s}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(t.apply(this,e.data),delete this.acks[e.id])}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:D.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let i=0;i<t.length;i++)if(e===t[i])return t.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let i=0;i<t.length;i++)if(e===t[i])return t.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const i of t)i.apply(this,e.data)}}}function Kt(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}Kt.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*r);r=Math.floor(e*10)&1?r+t:r-t}return Math.min(r,this.max)|0};Kt.prototype.reset=function(){this.attempts=0};Kt.prototype.setMin=function(r){this.ms=r};Kt.prototype.setMax=function(r){this.max=r};Kt.prototype.setJitter=function(r){this.jitter=r};class Bi extends Re{constructor(e,t){var i;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Ir(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((i=t.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new Kt({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const s=t.parser||mf;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new vs(this.uri,this.opts);const t=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const s=Xe(t,"open",function(){i.onopen(),e&&e()}),n=u=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",u),e?e(u):this.maybeReconnectOnOpen()},c=Xe(t,"error",n);if(this._timeout!==!1){const u=this._timeout,p=this.setTimeoutFn(()=>{s(),n(new Error("timeout")),t.close()},u);this.opts.autoUnref&&p.unref(),this.subs.push(()=>{this.clearTimeoutFn(p)})}return this.subs.push(s),this.subs.push(c),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Xe(e,"ping",this.onping.bind(this)),Xe(e,"data",this.ondata.bind(this)),Xe(e,"error",this.onerror.bind(this)),Xe(e,"close",this.onclose.bind(this)),Xe(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Ki(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let i=this.nsps[e];return i?this._autoConnect&&!i.active&&i.connect():(i=new gs(this,e,t),this.nsps[e]=i),i}_destroy(e){const t=Object.keys(this.nsps);for(const i of t)if(this.nsps[i].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let i=0;i<t.length;i++)this.engine.write(t[i],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},t);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Xt={};function gr(r,e){typeof r=="object"&&(e=r,r=void 0),e=e||{};const t=af(r,e.path||"/socket.io"),i=t.source,s=t.id,n=t.path,c=Xt[s]&&n in Xt[s].nsps,u=e.forceNew||e["force new connection"]||e.multiplex===!1||c;let p;return u?p=new Bi(i,e):(Xt[s]||(Xt[s]=new Bi(i,e)),p=Xt[s]),t.query&&!e.query&&(e.query=t.queryKey),p.socket(t.path,e)}Object.assign(gr,{Manager:Bi,Socket:gs,io:gr,connect:gr});var Pr={};const yf="elliptic",wf="6.5.4",xf="EC cryptography",Mf="lib/elliptic.js",Sf=["lib"],_f={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},Af={type:"git",url:"git@github.com:indutny/elliptic"},Ef=["EC","Elliptic","curve","Cryptography"],If="Fedor Indutny <fedor@indutny.com>",Pf="MIT",kf={url:"https://github.com/indutny/elliptic/issues"},Rf="https://github.com/indutny/elliptic",Bf={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},Nf={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},Of={name:yf,version:wf,description:xf,main:Mf,files:Sf,scripts:_f,repository:Af,keywords:Ef,author:If,license:Pf,bugs:kf,homepage:Rf,devDependencies:Bf,dependencies:Nf};var Fe={},Hi={exports:{}};Hi.exports;(function(r){(function(e,t){function i(m,a){if(!m)throw new Error(a||"Assertion failed")}function s(m,a){m.super_=a;var o=function(){};o.prototype=a.prototype,m.prototype=new o,m.prototype.constructor=m}function n(m,a,o){if(n.isBN(m))return m;this.negative=0,this.words=null,this.length=0,this.red=null,m!==null&&((a==="le"||a==="be")&&(o=a,a=10),this._init(m||0,a||10,o||"be"))}typeof e=="object"?e.exports=n:t.BN=n,n.BN=n,n.wordSize=26;var c;try{typeof window<"u"&&typeof window.Buffer<"u"?c=window.Buffer:c=fa.Buffer}catch{}n.isBN=function(a){return a instanceof n?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===n.wordSize&&Array.isArray(a.words)},n.max=function(a,o){return a.cmp(o)>0?a:o},n.min=function(a,o){return a.cmp(o)<0?a:o},n.prototype._init=function(a,o,l){if(typeof a=="number")return this._initNumber(a,o,l);if(typeof a=="object")return this._initArray(a,o,l);o==="hex"&&(o=16),i(o===(o|0)&&o>=2&&o<=36),a=a.toString().replace(/\s+/g,"");var b=0;a[0]==="-"&&(b++,this.negative=1),b<a.length&&(o===16?this._parseHex(a,b,l):(this._parseBase(a,o,b),l==="le"&&this._initArray(this.toArray(),o,l)))},n.prototype._initNumber=function(a,o,l){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(i(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),l==="le"&&this._initArray(this.toArray(),o,l)},n.prototype._initArray=function(a,o,l){if(i(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var v,w,M=0;if(l==="be")for(b=a.length-1,v=0;b>=0;b-=3)w=a[b]|a[b-1]<<8|a[b-2]<<16,this.words[v]|=w<<M&67108863,this.words[v+1]=w>>>26-M&67108863,M+=24,M>=26&&(M-=26,v++);else if(l==="le")for(b=0,v=0;b<a.length;b+=3)w=a[b]|a[b+1]<<8|a[b+2]<<16,this.words[v]|=w<<M&67108863,this.words[v+1]=w>>>26-M&67108863,M+=24,M>=26&&(M-=26,v++);return this.strip()};function u(m,a){var o=m.charCodeAt(a);return o>=65&&o<=70?o-55:o>=97&&o<=102?o-87:o-48&15}function p(m,a,o){var l=u(m,o);return o-1>=a&&(l|=u(m,o-1)<<4),l}n.prototype._parseHex=function(a,o,l){this.length=Math.ceil((a.length-o)/6),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var v=0,w=0,M;if(l==="be")for(b=a.length-1;b>=o;b-=2)M=p(a,o,b)<<v,this.words[w]|=M&67108863,v>=18?(v-=18,w+=1,this.words[w]|=M>>>26):v+=8;else{var d=a.length-o;for(b=d%2===0?o+1:o;b<a.length;b+=2)M=p(a,o,b)<<v,this.words[w]|=M&67108863,v>=18?(v-=18,w+=1,this.words[w]|=M>>>26):v+=8}this.strip()};function y(m,a,o,l){for(var b=0,v=Math.min(m.length,o),w=a;w<v;w++){var M=m.charCodeAt(w)-48;b*=l,M>=49?b+=M-49+10:M>=17?b+=M-17+10:b+=M}return b}n.prototype._parseBase=function(a,o,l){this.words=[0],this.length=1;for(var b=0,v=1;v<=67108863;v*=o)b++;b--,v=v/o|0;for(var w=a.length-l,M=w%b,d=Math.min(w,w-M)+l,f=0,h=l;h<d;h+=b)f=y(a,h,h+b,o),this.imuln(v),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(M!==0){var I=1;for(f=y(a,h,a.length,o),h=0;h<M;h++)I*=o;this.imuln(I),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this.strip()},n.prototype.copy=function(a){a.words=new Array(this.length);for(var o=0;o<this.length;o++)a.words[o]=this.words[o];a.length=this.length,a.negative=this.negative,a.red=this.red},n.prototype.clone=function(){var a=new n(null);return this.copy(a),a},n.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],_=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(a,o){a=a||10,o=o|0||1;var l;if(a===16||a==="hex"){l="";for(var b=0,v=0,w=0;w<this.length;w++){var M=this.words[w],d=((M<<b|v)&16777215).toString(16);v=M>>>24-b&16777215,v!==0||w!==this.length-1?l=g[6-d.length]+d+l:l=d+l,b+=2,b>=26&&(b-=26,w--)}for(v!==0&&(l=v.toString(16)+l);l.length%o!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}if(a===(a|0)&&a>=2&&a<=36){var f=x[a],h=_[a];l="";var I=this.clone();for(I.negative=0;!I.isZero();){var k=I.modn(h).toString(a);I=I.idivn(h),I.isZero()?l=k+l:l=g[f-k.length]+k+l}for(this.isZero()&&(l="0"+l);l.length%o!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}i(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(a,o){return i(typeof c<"u"),this.toArrayLike(c,a,o)},n.prototype.toArray=function(a,o){return this.toArrayLike(Array,a,o)},n.prototype.toArrayLike=function(a,o,l){var b=this.byteLength(),v=l||Math.max(1,b);i(b<=v,"byte array longer than desired length"),i(v>0,"Requested array length <= 0"),this.strip();var w=o==="le",M=new a(v),d,f,h=this.clone();if(w){for(f=0;!h.isZero();f++)d=h.andln(255),h.iushrn(8),M[f]=d;for(;f<v;f++)M[f]=0}else{for(f=0;f<v-b;f++)M[f]=0;for(f=0;!h.isZero();f++)d=h.andln(255),h.iushrn(8),M[v-f-1]=d}return M},Math.clz32?n.prototype._countBits=function(a){return 32-Math.clz32(a)}:n.prototype._countBits=function(a){var o=a,l=0;return o>=4096&&(l+=13,o>>>=13),o>=64&&(l+=7,o>>>=7),o>=8&&(l+=4,o>>>=4),o>=2&&(l+=2,o>>>=2),l+o},n.prototype._zeroBits=function(a){if(a===0)return 26;var o=a,l=0;return o&8191||(l+=13,o>>>=13),o&127||(l+=7,o>>>=7),o&15||(l+=4,o>>>=4),o&3||(l+=2,o>>>=2),o&1||l++,l},n.prototype.bitLength=function(){var a=this.words[this.length-1],o=this._countBits(a);return(this.length-1)*26+o};function S(m){for(var a=new Array(m.bitLength()),o=0;o<a.length;o++){var l=o/26|0,b=o%26;a[o]=(m.words[l]&1<<b)>>>b}return a}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,o=0;o<this.length;o++){var l=this._zeroBits(this.words[o]);if(a+=l,l!==26)break}return a},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},n.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var o=0;o<a.length;o++)this.words[o]=this.words[o]|a.words[o];return this.strip()},n.prototype.ior=function(a){return i((this.negative|a.negative)===0),this.iuor(a)},n.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},n.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},n.prototype.iuand=function(a){var o;this.length>a.length?o=a:o=this;for(var l=0;l<o.length;l++)this.words[l]=this.words[l]&a.words[l];return this.length=o.length,this.strip()},n.prototype.iand=function(a){return i((this.negative|a.negative)===0),this.iuand(a)},n.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},n.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},n.prototype.iuxor=function(a){var o,l;this.length>a.length?(o=this,l=a):(o=a,l=this);for(var b=0;b<l.length;b++)this.words[b]=o.words[b]^l.words[b];if(this!==o)for(;b<o.length;b++)this.words[b]=o.words[b];return this.length=o.length,this.strip()},n.prototype.ixor=function(a){return i((this.negative|a.negative)===0),this.iuxor(a)},n.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},n.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},n.prototype.inotn=function(a){i(typeof a=="number"&&a>=0);var o=Math.ceil(a/26)|0,l=a%26;this._expand(o),l>0&&o--;for(var b=0;b<o;b++)this.words[b]=~this.words[b]&67108863;return l>0&&(this.words[b]=~this.words[b]&67108863>>26-l),this.strip()},n.prototype.notn=function(a){return this.clone().inotn(a)},n.prototype.setn=function(a,o){i(typeof a=="number"&&a>=0);var l=a/26|0,b=a%26;return this._expand(l+1),o?this.words[l]=this.words[l]|1<<b:this.words[l]=this.words[l]&~(1<<b),this.strip()},n.prototype.iadd=function(a){var o;if(this.negative!==0&&a.negative===0)return this.negative=0,o=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,o=this.isub(a),a.negative=1,o._normSign();var l,b;this.length>a.length?(l=this,b=a):(l=a,b=this);for(var v=0,w=0;w<b.length;w++)o=(l.words[w]|0)+(b.words[w]|0)+v,this.words[w]=o&67108863,v=o>>>26;for(;v!==0&&w<l.length;w++)o=(l.words[w]|0)+v,this.words[w]=o&67108863,v=o>>>26;if(this.length=l.length,v!==0)this.words[this.length]=v,this.length++;else if(l!==this)for(;w<l.length;w++)this.words[w]=l.words[w];return this},n.prototype.add=function(a){var o;return a.negative!==0&&this.negative===0?(a.negative=0,o=this.sub(a),a.negative^=1,o):a.negative===0&&this.negative!==0?(this.negative=0,o=a.sub(this),this.negative=1,o):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},n.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var o=this.iadd(a);return a.negative=1,o._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var l=this.cmp(a);if(l===0)return this.negative=0,this.length=1,this.words[0]=0,this;var b,v;l>0?(b=this,v=a):(b=a,v=this);for(var w=0,M=0;M<v.length;M++)o=(b.words[M]|0)-(v.words[M]|0)+w,w=o>>26,this.words[M]=o&67108863;for(;w!==0&&M<b.length;M++)o=(b.words[M]|0)+w,w=o>>26,this.words[M]=o&67108863;if(w===0&&M<b.length&&b!==this)for(;M<b.length;M++)this.words[M]=b.words[M];return this.length=Math.max(this.length,M),b!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(a){return this.clone().isub(a)};function A(m,a,o){o.negative=a.negative^m.negative;var l=m.length+a.length|0;o.length=l,l=l-1|0;var b=m.words[0]|0,v=a.words[0]|0,w=b*v,M=w&67108863,d=w/67108864|0;o.words[0]=M;for(var f=1;f<l;f++){for(var h=d>>>26,I=d&67108863,k=Math.min(f,a.length-1),P=Math.max(0,f-m.length+1);P<=k;P++){var R=f-P|0;b=m.words[R]|0,v=a.words[P]|0,w=b*v+I,h+=w/67108864|0,I=w&67108863}o.words[f]=I|0,d=h|0}return d!==0?o.words[f]=d|0:o.length--,o.strip()}var E=function(a,o,l){var b=a.words,v=o.words,w=l.words,M=0,d,f,h,I=b[0]|0,k=I&8191,P=I>>>13,R=b[1]|0,T=R&8191,C=R>>>13,$e=b[2]|0,z=$e&8191,U=$e>>>13,nn=b[3]|0,G=nn&8191,Y=nn>>>13,sn=b[4]|0,X=sn&8191,Z=sn>>>13,an=b[5]|0,Q=an&8191,ee=an>>>13,fn=b[6]|0,te=fn&8191,re=fn>>>13,on=b[7]|0,ie=on&8191,ne=on>>>13,cn=b[8]|0,se=cn&8191,ae=cn>>>13,dn=b[9]|0,fe=dn&8191,oe=dn>>>13,hn=v[0]|0,ce=hn&8191,de=hn>>>13,un=v[1]|0,he=un&8191,ue=un>>>13,ln=v[2]|0,le=ln&8191,be=ln>>>13,bn=v[3]|0,pe=bn&8191,ve=bn>>>13,pn=v[4]|0,me=pn&8191,ge=pn>>>13,vn=v[5]|0,ye=vn&8191,we=vn>>>13,mn=v[6]|0,xe=mn&8191,Me=mn>>>13,gn=v[7]|0,Se=gn&8191,_e=gn>>>13,yn=v[8]|0,Ae=yn&8191,Ee=yn>>>13,wn=v[9]|0,Ie=wn&8191,Pe=wn>>>13;l.negative=a.negative^o.negative,l.length=19,d=Math.imul(k,ce),f=Math.imul(k,de),f=f+Math.imul(P,ce)|0,h=Math.imul(P,de);var Kr=(M+d|0)+((f&8191)<<13)|0;M=(h+(f>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,d=Math.imul(T,ce),f=Math.imul(T,de),f=f+Math.imul(C,ce)|0,h=Math.imul(C,de),d=d+Math.imul(k,he)|0,f=f+Math.imul(k,ue)|0,f=f+Math.imul(P,he)|0,h=h+Math.imul(P,ue)|0;var Ur=(M+d|0)+((f&8191)<<13)|0;M=(h+(f>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,d=Math.imul(z,ce),f=Math.imul(z,de),f=f+Math.imul(U,ce)|0,h=Math.imul(U,de),d=d+Math.imul(T,he)|0,f=f+Math.imul(T,ue)|0,f=f+Math.imul(C,he)|0,h=h+Math.imul(C,ue)|0,d=d+Math.imul(k,le)|0,f=f+Math.imul(k,be)|0,f=f+Math.imul(P,le)|0,h=h+Math.imul(P,be)|0;var Fr=(M+d|0)+((f&8191)<<13)|0;M=(h+(f>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,d=Math.imul(G,ce),f=Math.imul(G,de),f=f+Math.imul(Y,ce)|0,h=Math.imul(Y,de),d=d+Math.imul(z,he)|0,f=f+Math.imul(z,ue)|0,f=f+Math.imul(U,he)|0,h=h+Math.imul(U,ue)|0,d=d+Math.imul(T,le)|0,f=f+Math.imul(T,be)|0,f=f+Math.imul(C,le)|0,h=h+Math.imul(C,be)|0,d=d+Math.imul(k,pe)|0,f=f+Math.imul(k,ve)|0,f=f+Math.imul(P,pe)|0,h=h+Math.imul(P,ve)|0;var Hr=(M+d|0)+((f&8191)<<13)|0;M=(h+(f>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,d=Math.imul(X,ce),f=Math.imul(X,de),f=f+Math.imul(Z,ce)|0,h=Math.imul(Z,de),d=d+Math.imul(G,he)|0,f=f+Math.imul(G,ue)|0,f=f+Math.imul(Y,he)|0,h=h+Math.imul(Y,ue)|0,d=d+Math.imul(z,le)|0,f=f+Math.imul(z,be)|0,f=f+Math.imul(U,le)|0,h=h+Math.imul(U,be)|0,d=d+Math.imul(T,pe)|0,f=f+Math.imul(T,ve)|0,f=f+Math.imul(C,pe)|0,h=h+Math.imul(C,ve)|0,d=d+Math.imul(k,me)|0,f=f+Math.imul(k,ge)|0,f=f+Math.imul(P,me)|0,h=h+Math.imul(P,ge)|0;var Jr=(M+d|0)+((f&8191)<<13)|0;M=(h+(f>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,d=Math.imul(Q,ce),f=Math.imul(Q,de),f=f+Math.imul(ee,ce)|0,h=Math.imul(ee,de),d=d+Math.imul(X,he)|0,f=f+Math.imul(X,ue)|0,f=f+Math.imul(Z,he)|0,h=h+Math.imul(Z,ue)|0,d=d+Math.imul(G,le)|0,f=f+Math.imul(G,be)|0,f=f+Math.imul(Y,le)|0,h=h+Math.imul(Y,be)|0,d=d+Math.imul(z,pe)|0,f=f+Math.imul(z,ve)|0,f=f+Math.imul(U,pe)|0,h=h+Math.imul(U,ve)|0,d=d+Math.imul(T,me)|0,f=f+Math.imul(T,ge)|0,f=f+Math.imul(C,me)|0,h=h+Math.imul(C,ge)|0,d=d+Math.imul(k,ye)|0,f=f+Math.imul(k,we)|0,f=f+Math.imul(P,ye)|0,h=h+Math.imul(P,we)|0;var Vr=(M+d|0)+((f&8191)<<13)|0;M=(h+(f>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,d=Math.imul(te,ce),f=Math.imul(te,de),f=f+Math.imul(re,ce)|0,h=Math.imul(re,de),d=d+Math.imul(Q,he)|0,f=f+Math.imul(Q,ue)|0,f=f+Math.imul(ee,he)|0,h=h+Math.imul(ee,ue)|0,d=d+Math.imul(X,le)|0,f=f+Math.imul(X,be)|0,f=f+Math.imul(Z,le)|0,h=h+Math.imul(Z,be)|0,d=d+Math.imul(G,pe)|0,f=f+Math.imul(G,ve)|0,f=f+Math.imul(Y,pe)|0,h=h+Math.imul(Y,ve)|0,d=d+Math.imul(z,me)|0,f=f+Math.imul(z,ge)|0,f=f+Math.imul(U,me)|0,h=h+Math.imul(U,ge)|0,d=d+Math.imul(T,ye)|0,f=f+Math.imul(T,we)|0,f=f+Math.imul(C,ye)|0,h=h+Math.imul(C,we)|0,d=d+Math.imul(k,xe)|0,f=f+Math.imul(k,Me)|0,f=f+Math.imul(P,xe)|0,h=h+Math.imul(P,Me)|0;var Wr=(M+d|0)+((f&8191)<<13)|0;M=(h+(f>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,d=Math.imul(ie,ce),f=Math.imul(ie,de),f=f+Math.imul(ne,ce)|0,h=Math.imul(ne,de),d=d+Math.imul(te,he)|0,f=f+Math.imul(te,ue)|0,f=f+Math.imul(re,he)|0,h=h+Math.imul(re,ue)|0,d=d+Math.imul(Q,le)|0,f=f+Math.imul(Q,be)|0,f=f+Math.imul(ee,le)|0,h=h+Math.imul(ee,be)|0,d=d+Math.imul(X,pe)|0,f=f+Math.imul(X,ve)|0,f=f+Math.imul(Z,pe)|0,h=h+Math.imul(Z,ve)|0,d=d+Math.imul(G,me)|0,f=f+Math.imul(G,ge)|0,f=f+Math.imul(Y,me)|0,h=h+Math.imul(Y,ge)|0,d=d+Math.imul(z,ye)|0,f=f+Math.imul(z,we)|0,f=f+Math.imul(U,ye)|0,h=h+Math.imul(U,we)|0,d=d+Math.imul(T,xe)|0,f=f+Math.imul(T,Me)|0,f=f+Math.imul(C,xe)|0,h=h+Math.imul(C,Me)|0,d=d+Math.imul(k,Se)|0,f=f+Math.imul(k,_e)|0,f=f+Math.imul(P,Se)|0,h=h+Math.imul(P,_e)|0;var jr=(M+d|0)+((f&8191)<<13)|0;M=(h+(f>>>13)|0)+(jr>>>26)|0,jr&=67108863,d=Math.imul(se,ce),f=Math.imul(se,de),f=f+Math.imul(ae,ce)|0,h=Math.imul(ae,de),d=d+Math.imul(ie,he)|0,f=f+Math.imul(ie,ue)|0,f=f+Math.imul(ne,he)|0,h=h+Math.imul(ne,ue)|0,d=d+Math.imul(te,le)|0,f=f+Math.imul(te,be)|0,f=f+Math.imul(re,le)|0,h=h+Math.imul(re,be)|0,d=d+Math.imul(Q,pe)|0,f=f+Math.imul(Q,ve)|0,f=f+Math.imul(ee,pe)|0,h=h+Math.imul(ee,ve)|0,d=d+Math.imul(X,me)|0,f=f+Math.imul(X,ge)|0,f=f+Math.imul(Z,me)|0,h=h+Math.imul(Z,ge)|0,d=d+Math.imul(G,ye)|0,f=f+Math.imul(G,we)|0,f=f+Math.imul(Y,ye)|0,h=h+Math.imul(Y,we)|0,d=d+Math.imul(z,xe)|0,f=f+Math.imul(z,Me)|0,f=f+Math.imul(U,xe)|0,h=h+Math.imul(U,Me)|0,d=d+Math.imul(T,Se)|0,f=f+Math.imul(T,_e)|0,f=f+Math.imul(C,Se)|0,h=h+Math.imul(C,_e)|0,d=d+Math.imul(k,Ae)|0,f=f+Math.imul(k,Ee)|0,f=f+Math.imul(P,Ae)|0,h=h+Math.imul(P,Ee)|0;var Gr=(M+d|0)+((f&8191)<<13)|0;M=(h+(f>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,d=Math.imul(fe,ce),f=Math.imul(fe,de),f=f+Math.imul(oe,ce)|0,h=Math.imul(oe,de),d=d+Math.imul(se,he)|0,f=f+Math.imul(se,ue)|0,f=f+Math.imul(ae,he)|0,h=h+Math.imul(ae,ue)|0,d=d+Math.imul(ie,le)|0,f=f+Math.imul(ie,be)|0,f=f+Math.imul(ne,le)|0,h=h+Math.imul(ne,be)|0,d=d+Math.imul(te,pe)|0,f=f+Math.imul(te,ve)|0,f=f+Math.imul(re,pe)|0,h=h+Math.imul(re,ve)|0,d=d+Math.imul(Q,me)|0,f=f+Math.imul(Q,ge)|0,f=f+Math.imul(ee,me)|0,h=h+Math.imul(ee,ge)|0,d=d+Math.imul(X,ye)|0,f=f+Math.imul(X,we)|0,f=f+Math.imul(Z,ye)|0,h=h+Math.imul(Z,we)|0,d=d+Math.imul(G,xe)|0,f=f+Math.imul(G,Me)|0,f=f+Math.imul(Y,xe)|0,h=h+Math.imul(Y,Me)|0,d=d+Math.imul(z,Se)|0,f=f+Math.imul(z,_e)|0,f=f+Math.imul(U,Se)|0,h=h+Math.imul(U,_e)|0,d=d+Math.imul(T,Ae)|0,f=f+Math.imul(T,Ee)|0,f=f+Math.imul(C,Ae)|0,h=h+Math.imul(C,Ee)|0,d=d+Math.imul(k,Ie)|0,f=f+Math.imul(k,Pe)|0,f=f+Math.imul(P,Ie)|0,h=h+Math.imul(P,Pe)|0;var Yr=(M+d|0)+((f&8191)<<13)|0;M=(h+(f>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,d=Math.imul(fe,he),f=Math.imul(fe,ue),f=f+Math.imul(oe,he)|0,h=Math.imul(oe,ue),d=d+Math.imul(se,le)|0,f=f+Math.imul(se,be)|0,f=f+Math.imul(ae,le)|0,h=h+Math.imul(ae,be)|0,d=d+Math.imul(ie,pe)|0,f=f+Math.imul(ie,ve)|0,f=f+Math.imul(ne,pe)|0,h=h+Math.imul(ne,ve)|0,d=d+Math.imul(te,me)|0,f=f+Math.imul(te,ge)|0,f=f+Math.imul(re,me)|0,h=h+Math.imul(re,ge)|0,d=d+Math.imul(Q,ye)|0,f=f+Math.imul(Q,we)|0,f=f+Math.imul(ee,ye)|0,h=h+Math.imul(ee,we)|0,d=d+Math.imul(X,xe)|0,f=f+Math.imul(X,Me)|0,f=f+Math.imul(Z,xe)|0,h=h+Math.imul(Z,Me)|0,d=d+Math.imul(G,Se)|0,f=f+Math.imul(G,_e)|0,f=f+Math.imul(Y,Se)|0,h=h+Math.imul(Y,_e)|0,d=d+Math.imul(z,Ae)|0,f=f+Math.imul(z,Ee)|0,f=f+Math.imul(U,Ae)|0,h=h+Math.imul(U,Ee)|0,d=d+Math.imul(T,Ie)|0,f=f+Math.imul(T,Pe)|0,f=f+Math.imul(C,Ie)|0,h=h+Math.imul(C,Pe)|0;var Xr=(M+d|0)+((f&8191)<<13)|0;M=(h+(f>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,d=Math.imul(fe,le),f=Math.imul(fe,be),f=f+Math.imul(oe,le)|0,h=Math.imul(oe,be),d=d+Math.imul(se,pe)|0,f=f+Math.imul(se,ve)|0,f=f+Math.imul(ae,pe)|0,h=h+Math.imul(ae,ve)|0,d=d+Math.imul(ie,me)|0,f=f+Math.imul(ie,ge)|0,f=f+Math.imul(ne,me)|0,h=h+Math.imul(ne,ge)|0,d=d+Math.imul(te,ye)|0,f=f+Math.imul(te,we)|0,f=f+Math.imul(re,ye)|0,h=h+Math.imul(re,we)|0,d=d+Math.imul(Q,xe)|0,f=f+Math.imul(Q,Me)|0,f=f+Math.imul(ee,xe)|0,h=h+Math.imul(ee,Me)|0,d=d+Math.imul(X,Se)|0,f=f+Math.imul(X,_e)|0,f=f+Math.imul(Z,Se)|0,h=h+Math.imul(Z,_e)|0,d=d+Math.imul(G,Ae)|0,f=f+Math.imul(G,Ee)|0,f=f+Math.imul(Y,Ae)|0,h=h+Math.imul(Y,Ee)|0,d=d+Math.imul(z,Ie)|0,f=f+Math.imul(z,Pe)|0,f=f+Math.imul(U,Ie)|0,h=h+Math.imul(U,Pe)|0;var Zr=(M+d|0)+((f&8191)<<13)|0;M=(h+(f>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,d=Math.imul(fe,pe),f=Math.imul(fe,ve),f=f+Math.imul(oe,pe)|0,h=Math.imul(oe,ve),d=d+Math.imul(se,me)|0,f=f+Math.imul(se,ge)|0,f=f+Math.imul(ae,me)|0,h=h+Math.imul(ae,ge)|0,d=d+Math.imul(ie,ye)|0,f=f+Math.imul(ie,we)|0,f=f+Math.imul(ne,ye)|0,h=h+Math.imul(ne,we)|0,d=d+Math.imul(te,xe)|0,f=f+Math.imul(te,Me)|0,f=f+Math.imul(re,xe)|0,h=h+Math.imul(re,Me)|0,d=d+Math.imul(Q,Se)|0,f=f+Math.imul(Q,_e)|0,f=f+Math.imul(ee,Se)|0,h=h+Math.imul(ee,_e)|0,d=d+Math.imul(X,Ae)|0,f=f+Math.imul(X,Ee)|0,f=f+Math.imul(Z,Ae)|0,h=h+Math.imul(Z,Ee)|0,d=d+Math.imul(G,Ie)|0,f=f+Math.imul(G,Pe)|0,f=f+Math.imul(Y,Ie)|0,h=h+Math.imul(Y,Pe)|0;var Qr=(M+d|0)+((f&8191)<<13)|0;M=(h+(f>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,d=Math.imul(fe,me),f=Math.imul(fe,ge),f=f+Math.imul(oe,me)|0,h=Math.imul(oe,ge),d=d+Math.imul(se,ye)|0,f=f+Math.imul(se,we)|0,f=f+Math.imul(ae,ye)|0,h=h+Math.imul(ae,we)|0,d=d+Math.imul(ie,xe)|0,f=f+Math.imul(ie,Me)|0,f=f+Math.imul(ne,xe)|0,h=h+Math.imul(ne,Me)|0,d=d+Math.imul(te,Se)|0,f=f+Math.imul(te,_e)|0,f=f+Math.imul(re,Se)|0,h=h+Math.imul(re,_e)|0,d=d+Math.imul(Q,Ae)|0,f=f+Math.imul(Q,Ee)|0,f=f+Math.imul(ee,Ae)|0,h=h+Math.imul(ee,Ee)|0,d=d+Math.imul(X,Ie)|0,f=f+Math.imul(X,Pe)|0,f=f+Math.imul(Z,Ie)|0,h=h+Math.imul(Z,Pe)|0;var ei=(M+d|0)+((f&8191)<<13)|0;M=(h+(f>>>13)|0)+(ei>>>26)|0,ei&=67108863,d=Math.imul(fe,ye),f=Math.imul(fe,we),f=f+Math.imul(oe,ye)|0,h=Math.imul(oe,we),d=d+Math.imul(se,xe)|0,f=f+Math.imul(se,Me)|0,f=f+Math.imul(ae,xe)|0,h=h+Math.imul(ae,Me)|0,d=d+Math.imul(ie,Se)|0,f=f+Math.imul(ie,_e)|0,f=f+Math.imul(ne,Se)|0,h=h+Math.imul(ne,_e)|0,d=d+Math.imul(te,Ae)|0,f=f+Math.imul(te,Ee)|0,f=f+Math.imul(re,Ae)|0,h=h+Math.imul(re,Ee)|0,d=d+Math.imul(Q,Ie)|0,f=f+Math.imul(Q,Pe)|0,f=f+Math.imul(ee,Ie)|0,h=h+Math.imul(ee,Pe)|0;var ti=(M+d|0)+((f&8191)<<13)|0;M=(h+(f>>>13)|0)+(ti>>>26)|0,ti&=67108863,d=Math.imul(fe,xe),f=Math.imul(fe,Me),f=f+Math.imul(oe,xe)|0,h=Math.imul(oe,Me),d=d+Math.imul(se,Se)|0,f=f+Math.imul(se,_e)|0,f=f+Math.imul(ae,Se)|0,h=h+Math.imul(ae,_e)|0,d=d+Math.imul(ie,Ae)|0,f=f+Math.imul(ie,Ee)|0,f=f+Math.imul(ne,Ae)|0,h=h+Math.imul(ne,Ee)|0,d=d+Math.imul(te,Ie)|0,f=f+Math.imul(te,Pe)|0,f=f+Math.imul(re,Ie)|0,h=h+Math.imul(re,Pe)|0;var ri=(M+d|0)+((f&8191)<<13)|0;M=(h+(f>>>13)|0)+(ri>>>26)|0,ri&=67108863,d=Math.imul(fe,Se),f=Math.imul(fe,_e),f=f+Math.imul(oe,Se)|0,h=Math.imul(oe,_e),d=d+Math.imul(se,Ae)|0,f=f+Math.imul(se,Ee)|0,f=f+Math.imul(ae,Ae)|0,h=h+Math.imul(ae,Ee)|0,d=d+Math.imul(ie,Ie)|0,f=f+Math.imul(ie,Pe)|0,f=f+Math.imul(ne,Ie)|0,h=h+Math.imul(ne,Pe)|0;var ii=(M+d|0)+((f&8191)<<13)|0;M=(h+(f>>>13)|0)+(ii>>>26)|0,ii&=67108863,d=Math.imul(fe,Ae),f=Math.imul(fe,Ee),f=f+Math.imul(oe,Ae)|0,h=Math.imul(oe,Ee),d=d+Math.imul(se,Ie)|0,f=f+Math.imul(se,Pe)|0,f=f+Math.imul(ae,Ie)|0,h=h+Math.imul(ae,Pe)|0;var ni=(M+d|0)+((f&8191)<<13)|0;M=(h+(f>>>13)|0)+(ni>>>26)|0,ni&=67108863,d=Math.imul(fe,Ie),f=Math.imul(fe,Pe),f=f+Math.imul(oe,Ie)|0,h=Math.imul(oe,Pe);var si=(M+d|0)+((f&8191)<<13)|0;return M=(h+(f>>>13)|0)+(si>>>26)|0,si&=67108863,w[0]=Kr,w[1]=Ur,w[2]=Fr,w[3]=Hr,w[4]=Jr,w[5]=Vr,w[6]=Wr,w[7]=jr,w[8]=Gr,w[9]=Yr,w[10]=Xr,w[11]=Zr,w[12]=Qr,w[13]=ei,w[14]=ti,w[15]=ri,w[16]=ii,w[17]=ni,w[18]=si,M!==0&&(w[19]=M,l.length++),l};Math.imul||(E=A);function N(m,a,o){o.negative=a.negative^m.negative,o.length=m.length+a.length;for(var l=0,b=0,v=0;v<o.length-1;v++){var w=b;b=0;for(var M=l&67108863,d=Math.min(v,a.length-1),f=Math.max(0,v-m.length+1);f<=d;f++){var h=v-f,I=m.words[h]|0,k=a.words[f]|0,P=I*k,R=P&67108863;w=w+(P/67108864|0)|0,R=R+M|0,M=R&67108863,w=w+(R>>>26)|0,b+=w>>>26,w&=67108863}o.words[v]=M,l=w,w=b}return l!==0?o.words[v]=l:o.length--,o.strip()}function B(m,a,o){var l=new O;return l.mulp(m,a,o)}n.prototype.mulTo=function(a,o){var l,b=this.length+a.length;return this.length===10&&a.length===10?l=E(this,a,o):b<63?l=A(this,a,o):b<1024?l=N(this,a,o):l=B(this,a,o),l};function O(m,a){this.x=m,this.y=a}O.prototype.makeRBT=function(a){for(var o=new Array(a),l=n.prototype._countBits(a)-1,b=0;b<a;b++)o[b]=this.revBin(b,l,a);return o},O.prototype.revBin=function(a,o,l){if(a===0||a===l-1)return a;for(var b=0,v=0;v<o;v++)b|=(a&1)<<o-v-1,a>>=1;return b},O.prototype.permute=function(a,o,l,b,v,w){for(var M=0;M<w;M++)b[M]=o[a[M]],v[M]=l[a[M]]},O.prototype.transform=function(a,o,l,b,v,w){this.permute(w,a,o,l,b,v);for(var M=1;M<v;M<<=1)for(var d=M<<1,f=Math.cos(2*Math.PI/d),h=Math.sin(2*Math.PI/d),I=0;I<v;I+=d)for(var k=f,P=h,R=0;R<M;R++){var T=l[I+R],C=b[I+R],$e=l[I+R+M],z=b[I+R+M],U=k*$e-P*z;z=k*z+P*$e,$e=U,l[I+R]=T+$e,b[I+R]=C+z,l[I+R+M]=T-$e,b[I+R+M]=C-z,R!==d&&(U=f*k-h*P,P=f*P+h*k,k=U)}},O.prototype.guessLen13b=function(a,o){var l=Math.max(o,a)|1,b=l&1,v=0;for(l=l/2|0;l;l=l>>>1)v++;return 1<<v+1+b},O.prototype.conjugate=function(a,o,l){if(!(l<=1))for(var b=0;b<l/2;b++){var v=a[b];a[b]=a[l-b-1],a[l-b-1]=v,v=o[b],o[b]=-o[l-b-1],o[l-b-1]=-v}},O.prototype.normalize13b=function(a,o){for(var l=0,b=0;b<o/2;b++){var v=Math.round(a[2*b+1]/o)*8192+Math.round(a[2*b]/o)+l;a[b]=v&67108863,v<67108864?l=0:l=v/67108864|0}return a},O.prototype.convert13b=function(a,o,l,b){for(var v=0,w=0;w<o;w++)v=v+(a[w]|0),l[2*w]=v&8191,v=v>>>13,l[2*w+1]=v&8191,v=v>>>13;for(w=2*o;w<b;++w)l[w]=0;i(v===0),i((v&-8192)===0)},O.prototype.stub=function(a){for(var o=new Array(a),l=0;l<a;l++)o[l]=0;return o},O.prototype.mulp=function(a,o,l){var b=2*this.guessLen13b(a.length,o.length),v=this.makeRBT(b),w=this.stub(b),M=new Array(b),d=new Array(b),f=new Array(b),h=new Array(b),I=new Array(b),k=new Array(b),P=l.words;P.length=b,this.convert13b(a.words,a.length,M,b),this.convert13b(o.words,o.length,h,b),this.transform(M,w,d,f,b,v),this.transform(h,w,I,k,b,v);for(var R=0;R<b;R++){var T=d[R]*I[R]-f[R]*k[R];f[R]=d[R]*k[R]+f[R]*I[R],d[R]=T}return this.conjugate(d,f,b),this.transform(d,f,P,w,b,v),this.conjugate(P,w,b),this.normalize13b(P,b),l.negative=a.negative^o.negative,l.length=a.length+o.length,l.strip()},n.prototype.mul=function(a){var o=new n(null);return o.words=new Array(this.length+a.length),this.mulTo(a,o)},n.prototype.mulf=function(a){var o=new n(null);return o.words=new Array(this.length+a.length),B(this,a,o)},n.prototype.imul=function(a){return this.clone().mulTo(a,this)},n.prototype.imuln=function(a){i(typeof a=="number"),i(a<67108864);for(var o=0,l=0;l<this.length;l++){var b=(this.words[l]|0)*a,v=(b&67108863)+(o&67108863);o>>=26,o+=b/67108864|0,o+=v>>>26,this.words[l]=v&67108863}return o!==0&&(this.words[l]=o,this.length++),this},n.prototype.muln=function(a){return this.clone().imuln(a)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(a){var o=S(a);if(o.length===0)return new n(1);for(var l=this,b=0;b<o.length&&o[b]===0;b++,l=l.sqr());if(++b<o.length)for(var v=l.sqr();b<o.length;b++,v=v.sqr())o[b]!==0&&(l=l.mul(v));return l},n.prototype.iushln=function(a){i(typeof a=="number"&&a>=0);var o=a%26,l=(a-o)/26,b=67108863>>>26-o<<26-o,v;if(o!==0){var w=0;for(v=0;v<this.length;v++){var M=this.words[v]&b,d=(this.words[v]|0)-M<<o;this.words[v]=d|w,w=M>>>26-o}w&&(this.words[v]=w,this.length++)}if(l!==0){for(v=this.length-1;v>=0;v--)this.words[v+l]=this.words[v];for(v=0;v<l;v++)this.words[v]=0;this.length+=l}return this.strip()},n.prototype.ishln=function(a){return i(this.negative===0),this.iushln(a)},n.prototype.iushrn=function(a,o,l){i(typeof a=="number"&&a>=0);var b;o?b=(o-o%26)/26:b=0;var v=a%26,w=Math.min((a-v)/26,this.length),M=67108863^67108863>>>v<<v,d=l;if(b-=w,b=Math.max(0,b),d){for(var f=0;f<w;f++)d.words[f]=this.words[f];d.length=w}if(w!==0)if(this.length>w)for(this.length-=w,f=0;f<this.length;f++)this.words[f]=this.words[f+w];else this.words[0]=0,this.length=1;var h=0;for(f=this.length-1;f>=0&&(h!==0||f>=b);f--){var I=this.words[f]|0;this.words[f]=h<<26-v|I>>>v,h=I&M}return d&&h!==0&&(d.words[d.length++]=h),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(a,o,l){return i(this.negative===0),this.iushrn(a,o,l)},n.prototype.shln=function(a){return this.clone().ishln(a)},n.prototype.ushln=function(a){return this.clone().iushln(a)},n.prototype.shrn=function(a){return this.clone().ishrn(a)},n.prototype.ushrn=function(a){return this.clone().iushrn(a)},n.prototype.testn=function(a){i(typeof a=="number"&&a>=0);var o=a%26,l=(a-o)/26,b=1<<o;if(this.length<=l)return!1;var v=this.words[l];return!!(v&b)},n.prototype.imaskn=function(a){i(typeof a=="number"&&a>=0);var o=a%26,l=(a-o)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=l)return this;if(o!==0&&l++,this.length=Math.min(l,this.length),o!==0){var b=67108863^67108863>>>o<<o;this.words[this.length-1]&=b}return this.strip()},n.prototype.maskn=function(a){return this.clone().imaskn(a)},n.prototype.iaddn=function(a){return i(typeof a=="number"),i(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},n.prototype._iaddn=function(a){this.words[0]+=a;for(var o=0;o<this.length&&this.words[o]>=67108864;o++)this.words[o]-=67108864,o===this.length-1?this.words[o+1]=1:this.words[o+1]++;return this.length=Math.max(this.length,o+1),this},n.prototype.isubn=function(a){if(i(typeof a=="number"),i(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var o=0;o<this.length&&this.words[o]<0;o++)this.words[o]+=67108864,this.words[o+1]-=1;return this.strip()},n.prototype.addn=function(a){return this.clone().iaddn(a)},n.prototype.subn=function(a){return this.clone().isubn(a)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(a,o,l){var b=a.length+l,v;this._expand(b);var w,M=0;for(v=0;v<a.length;v++){w=(this.words[v+l]|0)+M;var d=(a.words[v]|0)*o;w-=d&67108863,M=(w>>26)-(d/67108864|0),this.words[v+l]=w&67108863}for(;v<this.length-l;v++)w=(this.words[v+l]|0)+M,M=w>>26,this.words[v+l]=w&67108863;if(M===0)return this.strip();for(i(M===-1),M=0,v=0;v<this.length;v++)w=-(this.words[v]|0)+M,M=w>>26,this.words[v]=w&67108863;return this.negative=1,this.strip()},n.prototype._wordDiv=function(a,o){var l=this.length-a.length,b=this.clone(),v=a,w=v.words[v.length-1]|0,M=this._countBits(w);l=26-M,l!==0&&(v=v.ushln(l),b.iushln(l),w=v.words[v.length-1]|0);var d=b.length-v.length,f;if(o!=="mod"){f=new n(null),f.length=d+1,f.words=new Array(f.length);for(var h=0;h<f.length;h++)f.words[h]=0}var I=b.clone()._ishlnsubmul(v,1,d);I.negative===0&&(b=I,f&&(f.words[d]=1));for(var k=d-1;k>=0;k--){var P=(b.words[v.length+k]|0)*67108864+(b.words[v.length+k-1]|0);for(P=Math.min(P/w|0,67108863),b._ishlnsubmul(v,P,k);b.negative!==0;)P--,b.negative=0,b._ishlnsubmul(v,1,k),b.isZero()||(b.negative^=1);f&&(f.words[k]=P)}return f&&f.strip(),b.strip(),o!=="div"&&l!==0&&b.iushrn(l),{div:f||null,mod:b}},n.prototype.divmod=function(a,o,l){if(i(!a.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var b,v,w;return this.negative!==0&&a.negative===0?(w=this.neg().divmod(a,o),o!=="mod"&&(b=w.div.neg()),o!=="div"&&(v=w.mod.neg(),l&&v.negative!==0&&v.iadd(a)),{div:b,mod:v}):this.negative===0&&a.negative!==0?(w=this.divmod(a.neg(),o),o!=="mod"&&(b=w.div.neg()),{div:b,mod:w.mod}):this.negative&a.negative?(w=this.neg().divmod(a.neg(),o),o!=="div"&&(v=w.mod.neg(),l&&v.negative!==0&&v.isub(a)),{div:w.div,mod:v}):a.length>this.length||this.cmp(a)<0?{div:new n(0),mod:this}:a.length===1?o==="div"?{div:this.divn(a.words[0]),mod:null}:o==="mod"?{div:null,mod:new n(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new n(this.modn(a.words[0]))}:this._wordDiv(a,o)},n.prototype.div=function(a){return this.divmod(a,"div",!1).div},n.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},n.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},n.prototype.divRound=function(a){var o=this.divmod(a);if(o.mod.isZero())return o.div;var l=o.div.negative!==0?o.mod.isub(a):o.mod,b=a.ushrn(1),v=a.andln(1),w=l.cmp(b);return w<0||v===1&&w===0?o.div:o.div.negative!==0?o.div.isubn(1):o.div.iaddn(1)},n.prototype.modn=function(a){i(a<=67108863);for(var o=(1<<26)%a,l=0,b=this.length-1;b>=0;b--)l=(o*l+(this.words[b]|0))%a;return l},n.prototype.idivn=function(a){i(a<=67108863);for(var o=0,l=this.length-1;l>=0;l--){var b=(this.words[l]|0)+o*67108864;this.words[l]=b/a|0,o=b%a}return this.strip()},n.prototype.divn=function(a){return this.clone().idivn(a)},n.prototype.egcd=function(a){i(a.negative===0),i(!a.isZero());var o=this,l=a.clone();o.negative!==0?o=o.umod(a):o=o.clone();for(var b=new n(1),v=new n(0),w=new n(0),M=new n(1),d=0;o.isEven()&&l.isEven();)o.iushrn(1),l.iushrn(1),++d;for(var f=l.clone(),h=o.clone();!o.isZero();){for(var I=0,k=1;!(o.words[0]&k)&&I<26;++I,k<<=1);if(I>0)for(o.iushrn(I);I-- >0;)(b.isOdd()||v.isOdd())&&(b.iadd(f),v.isub(h)),b.iushrn(1),v.iushrn(1);for(var P=0,R=1;!(l.words[0]&R)&&P<26;++P,R<<=1);if(P>0)for(l.iushrn(P);P-- >0;)(w.isOdd()||M.isOdd())&&(w.iadd(f),M.isub(h)),w.iushrn(1),M.iushrn(1);o.cmp(l)>=0?(o.isub(l),b.isub(w),v.isub(M)):(l.isub(o),w.isub(b),M.isub(v))}return{a:w,b:M,gcd:l.iushln(d)}},n.prototype._invmp=function(a){i(a.negative===0),i(!a.isZero());var o=this,l=a.clone();o.negative!==0?o=o.umod(a):o=o.clone();for(var b=new n(1),v=new n(0),w=l.clone();o.cmpn(1)>0&&l.cmpn(1)>0;){for(var M=0,d=1;!(o.words[0]&d)&&M<26;++M,d<<=1);if(M>0)for(o.iushrn(M);M-- >0;)b.isOdd()&&b.iadd(w),b.iushrn(1);for(var f=0,h=1;!(l.words[0]&h)&&f<26;++f,h<<=1);if(f>0)for(l.iushrn(f);f-- >0;)v.isOdd()&&v.iadd(w),v.iushrn(1);o.cmp(l)>=0?(o.isub(l),b.isub(v)):(l.isub(o),v.isub(b))}var I;return o.cmpn(1)===0?I=b:I=v,I.cmpn(0)<0&&I.iadd(a),I},n.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var o=this.clone(),l=a.clone();o.negative=0,l.negative=0;for(var b=0;o.isEven()&&l.isEven();b++)o.iushrn(1),l.iushrn(1);do{for(;o.isEven();)o.iushrn(1);for(;l.isEven();)l.iushrn(1);var v=o.cmp(l);if(v<0){var w=o;o=l,l=w}else if(v===0||l.cmpn(1)===0)break;o.isub(l)}while(!0);return l.iushln(b)},n.prototype.invm=function(a){return this.egcd(a).a.umod(a)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(a){return this.words[0]&a},n.prototype.bincn=function(a){i(typeof a=="number");var o=a%26,l=(a-o)/26,b=1<<o;if(this.length<=l)return this._expand(l+1),this.words[l]|=b,this;for(var v=b,w=l;v!==0&&w<this.length;w++){var M=this.words[w]|0;M+=v,v=M>>>26,M&=67108863,this.words[w]=M}return v!==0&&(this.words[w]=v,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(a){var o=a<0;if(this.negative!==0&&!o)return-1;if(this.negative===0&&o)return 1;this.strip();var l;if(this.length>1)l=1;else{o&&(a=-a),i(a<=67108863,"Number is too big");var b=this.words[0]|0;l=b===a?0:b<a?-1:1}return this.negative!==0?-l|0:l},n.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var o=this.ucmp(a);return this.negative!==0?-o|0:o},n.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var o=0,l=this.length-1;l>=0;l--){var b=this.words[l]|0,v=a.words[l]|0;if(b!==v){b<v?o=-1:b>v&&(o=1);break}}return o},n.prototype.gtn=function(a){return this.cmpn(a)===1},n.prototype.gt=function(a){return this.cmp(a)===1},n.prototype.gten=function(a){return this.cmpn(a)>=0},n.prototype.gte=function(a){return this.cmp(a)>=0},n.prototype.ltn=function(a){return this.cmpn(a)===-1},n.prototype.lt=function(a){return this.cmp(a)===-1},n.prototype.lten=function(a){return this.cmpn(a)<=0},n.prototype.lte=function(a){return this.cmp(a)<=0},n.prototype.eqn=function(a){return this.cmpn(a)===0},n.prototype.eq=function(a){return this.cmp(a)===0},n.red=function(a){return new $(a)},n.prototype.toRed=function(a){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},n.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(a){return this.red=a,this},n.prototype.forceRed=function(a){return i(!this.red,"Already a number in reduction context"),this._forceRed(a)},n.prototype.redAdd=function(a){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},n.prototype.redIAdd=function(a){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},n.prototype.redSub=function(a){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},n.prototype.redISub=function(a){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},n.prototype.redShl=function(a){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},n.prototype.redMul=function(a){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},n.prototype.redIMul=function(a){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},n.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(a){return i(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var L={k256:null,p224:null,p192:null,p25519:null};function H(m,a){this.name=m,this.p=new n(a,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}H.prototype._tmp=function(){var a=new n(null);return a.words=new Array(Math.ceil(this.n/13)),a},H.prototype.ireduce=function(a){var o=a,l;do this.split(o,this.tmp),o=this.imulK(o),o=o.iadd(this.tmp),l=o.bitLength();while(l>this.n);var b=l<this.n?-1:o.ucmp(this.p);return b===0?(o.words[0]=0,o.length=1):b>0?o.isub(this.p):o.strip!==void 0?o.strip():o._strip(),o},H.prototype.split=function(a,o){a.iushrn(this.n,0,o)},H.prototype.imulK=function(a){return a.imul(this.k)};function K(){H.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(K,H),K.prototype.split=function(a,o){for(var l=4194303,b=Math.min(a.length,9),v=0;v<b;v++)o.words[v]=a.words[v];if(o.length=b,a.length<=9){a.words[0]=0,a.length=1;return}var w=a.words[9];for(o.words[o.length++]=w&l,v=10;v<a.length;v++){var M=a.words[v]|0;a.words[v-10]=(M&l)<<4|w>>>22,w=M}w>>>=22,a.words[v-10]=w,w===0&&a.length>10?a.length-=10:a.length-=9},K.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var o=0,l=0;l<a.length;l++){var b=a.words[l]|0;o+=b*977,a.words[l]=o&67108863,o=b*64+(o/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function W(){H.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(W,H);function Le(){H.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(Le,H);function qe(){H.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(qe,H),qe.prototype.imulK=function(a){for(var o=0,l=0;l<a.length;l++){var b=(a.words[l]|0)*19+o,v=b&67108863;b>>>=26,a.words[l]=v,o=b}return o!==0&&(a.words[a.length++]=o),a},n._prime=function(a){if(L[a])return L[a];var o;if(a==="k256")o=new K;else if(a==="p224")o=new W;else if(a==="p192")o=new Le;else if(a==="p25519")o=new qe;else throw new Error("Unknown prime "+a);return L[a]=o,o};function $(m){if(typeof m=="string"){var a=n._prime(m);this.m=a.p,this.prime=a}else i(m.gtn(1),"modulus must be greater than 1"),this.m=m,this.prime=null}$.prototype._verify1=function(a){i(a.negative===0,"red works only with positives"),i(a.red,"red works only with red numbers")},$.prototype._verify2=function(a,o){i((a.negative|o.negative)===0,"red works only with positives"),i(a.red&&a.red===o.red,"red works only with red numbers")},$.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},$.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},$.prototype.add=function(a,o){this._verify2(a,o);var l=a.add(o);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},$.prototype.iadd=function(a,o){this._verify2(a,o);var l=a.iadd(o);return l.cmp(this.m)>=0&&l.isub(this.m),l},$.prototype.sub=function(a,o){this._verify2(a,o);var l=a.sub(o);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},$.prototype.isub=function(a,o){this._verify2(a,o);var l=a.isub(o);return l.cmpn(0)<0&&l.iadd(this.m),l},$.prototype.shl=function(a,o){return this._verify1(a),this.imod(a.ushln(o))},$.prototype.imul=function(a,o){return this._verify2(a,o),this.imod(a.imul(o))},$.prototype.mul=function(a,o){return this._verify2(a,o),this.imod(a.mul(o))},$.prototype.isqr=function(a){return this.imul(a,a.clone())},$.prototype.sqr=function(a){return this.mul(a,a)},$.prototype.sqrt=function(a){if(a.isZero())return a.clone();var o=this.m.andln(3);if(i(o%2===1),o===3){var l=this.m.add(new n(1)).iushrn(2);return this.pow(a,l)}for(var b=this.m.subn(1),v=0;!b.isZero()&&b.andln(1)===0;)v++,b.iushrn(1);i(!b.isZero());var w=new n(1).toRed(this),M=w.redNeg(),d=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new n(2*f*f).toRed(this);this.pow(f,d).cmp(M)!==0;)f.redIAdd(M);for(var h=this.pow(f,b),I=this.pow(a,b.addn(1).iushrn(1)),k=this.pow(a,b),P=v;k.cmp(w)!==0;){for(var R=k,T=0;R.cmp(w)!==0;T++)R=R.redSqr();i(T<P);var C=this.pow(h,new n(1).iushln(P-T-1));I=I.redMul(C),h=C.redSqr(),k=k.redMul(h),P=T}return I},$.prototype.invm=function(a){var o=a._invmp(this.m);return o.negative!==0?(o.negative=0,this.imod(o).redNeg()):this.imod(o)},$.prototype.pow=function(a,o){if(o.isZero())return new n(1).toRed(this);if(o.cmpn(1)===0)return a.clone();var l=4,b=new Array(1<<l);b[0]=new n(1).toRed(this),b[1]=a;for(var v=2;v<b.length;v++)b[v]=this.mul(b[v-1],a);var w=b[0],M=0,d=0,f=o.bitLength()%26;for(f===0&&(f=26),v=o.length-1;v>=0;v--){for(var h=o.words[v],I=f-1;I>=0;I--){var k=h>>I&1;if(w!==b[0]&&(w=this.sqr(w)),k===0&&M===0){d=0;continue}M<<=1,M|=k,d++,!(d!==l&&(v!==0||I!==0))&&(w=this.mul(w,b[M]),d=0,M=0)}f=26}return w},$.prototype.convertTo=function(a){var o=a.umod(this.m);return o===a?o.clone():o},$.prototype.convertFrom=function(a){var o=a.clone();return o.red=null,o},n.mont=function(a){return new Te(a)};function Te(m){$.call(this,m),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(Te,$),Te.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},Te.prototype.convertFrom=function(a){var o=this.imod(a.mul(this.rinv));return o.red=null,o},Te.prototype.imul=function(a,o){if(a.isZero()||o.isZero())return a.words[0]=0,a.length=1,a;var l=a.imul(o),b=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=l.isub(b).iushrn(this.shift),w=v;return v.cmp(this.m)>=0?w=v.isub(this.m):v.cmpn(0)<0&&(w=v.iadd(this.m)),w._forceRed(this)},Te.prototype.mul=function(a,o){if(a.isZero()||o.isZero())return new n(0)._forceRed(this);var l=a.mul(o),b=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=l.isub(b).iushrn(this.shift),w=v;return v.cmp(this.m)>=0?w=v.isub(this.m):v.cmpn(0)<0&&(w=v.iadd(this.m)),w._forceRed(this)},Te.prototype.invm=function(a){var o=this.imod(a._invmp(this.m).mul(this.r2));return o._forceRed(this)}})(r,Sa)})(Hi);var pt=Hi.exports,Bt=ys;function ys(r,e){if(!r)throw new Error(e||"Assertion failed")}ys.equal=function(e,t,i){if(e!=t)throw new Error(i||"Assertion failed: "+e+" != "+t)};var Ji={};(function(r){var e=r;function t(n,c){if(Array.isArray(n))return n.slice();if(!n)return[];var u=[];if(typeof n!="string"){for(var p=0;p<n.length;p++)u[p]=n[p]|0;return u}if(c==="hex"){n=n.replace(/[^a-z0-9]+/ig,""),n.length%2!==0&&(n="0"+n);for(var p=0;p<n.length;p+=2)u.push(parseInt(n[p]+n[p+1],16))}else for(var p=0;p<n.length;p++){var y=n.charCodeAt(p),g=y>>8,x=y&255;g?u.push(g,x):u.push(x)}return u}e.toArray=t;function i(n){return n.length===1?"0"+n:n}e.zero2=i;function s(n){for(var c="",u=0;u<n.length;u++)c+=i(n[u].toString(16));return c}e.toHex=s,e.encode=function(c,u){return u==="hex"?s(c):c}})(Ji);(function(r){var e=r,t=pt,i=Bt,s=Ji;e.assert=i,e.toArray=s.toArray,e.zero2=s.zero2,e.toHex=s.toHex,e.encode=s.encode;function n(g,x,_){var S=new Array(Math.max(g.bitLength(),_)+1);S.fill(0);for(var A=1<<x+1,E=g.clone(),N=0;N<S.length;N++){var B,O=E.andln(A-1);E.isOdd()?(O>(A>>1)-1?B=(A>>1)-O:B=O,E.isubn(B)):B=0,S[N]=B,E.iushrn(1)}return S}e.getNAF=n;function c(g,x){var _=[[],[]];g=g.clone(),x=x.clone();for(var S=0,A=0,E;g.cmpn(-S)>0||x.cmpn(-A)>0;){var N=g.andln(3)+S&3,B=x.andln(3)+A&3;N===3&&(N=-1),B===3&&(B=-1);var O;N&1?(E=g.andln(7)+S&7,(E===3||E===5)&&B===2?O=-N:O=N):O=0,_[0].push(O);var L;B&1?(E=x.andln(7)+A&7,(E===3||E===5)&&N===2?L=-B:L=B):L=0,_[1].push(L),2*S===O+1&&(S=1-S),2*A===L+1&&(A=1-A),g.iushrn(1),x.iushrn(1)}return _}e.getJSF=c;function u(g,x,_){var S="_"+x;g.prototype[x]=function(){return this[S]!==void 0?this[S]:this[S]=_.call(this)}}e.cachedProperty=u;function p(g){return typeof g=="string"?e.toArray(g,"hex"):g}e.parseBytes=p;function y(g){return new t(g,"hex","le")}e.intFromLE=y})(Fe);var Vi={exports:{}},hi;Vi.exports=function(e){return hi||(hi=new yt(null)),hi.generate(e)};function yt(r){this.rand=r}Vi.exports.Rand=yt;yt.prototype.generate=function(e){return this._rand(e)};yt.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),i=0;i<t.length;i++)t[i]=this.rand.getByte();return t};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?yt.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?yt.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:typeof window=="object"&&(yt.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var Cn=_a();if(typeof Cn.randomBytes!="function")throw new Error("Not supported");yt.prototype._rand=function(e){return Cn.randomBytes(e)}}catch{}var ws=Vi.exports,Wi={},At=pt,nr=Fe,xr=nr.getNAF,Tf=nr.getJSF,Mr=nr.assert;function St(r,e){this.type=r,this.p=new At(e.p,16),this.red=e.prime?At.red(e.prime):At.mont(this.p),this.zero=new At(0).toRed(this.red),this.one=new At(1).toRed(this.red),this.two=new At(2).toRed(this.red),this.n=e.n&&new At(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var kr=St;St.prototype.point=function(){throw new Error("Not implemented")};St.prototype.validate=function(){throw new Error("Not implemented")};St.prototype._fixedNafMul=function(e,t){Mr(e.precomputed);var i=e._getDoubles(),s=xr(t,1,this._bitLength),n=(1<<i.step+1)-(i.step%2===0?2:1);n/=3;var c=[],u,p;for(u=0;u<s.length;u+=i.step){p=0;for(var y=u+i.step-1;y>=u;y--)p=(p<<1)+s[y];c.push(p)}for(var g=this.jpoint(null,null,null),x=this.jpoint(null,null,null),_=n;_>0;_--){for(u=0;u<c.length;u++)p=c[u],p===_?x=x.mixedAdd(i.points[u]):p===-_&&(x=x.mixedAdd(i.points[u].neg()));g=g.add(x)}return g.toP()};St.prototype._wnafMul=function(e,t){var i=4,s=e._getNAFPoints(i);i=s.wnd;for(var n=s.points,c=xr(t,i,this._bitLength),u=this.jpoint(null,null,null),p=c.length-1;p>=0;p--){for(var y=0;p>=0&&c[p]===0;p--)y++;if(p>=0&&y++,u=u.dblp(y),p<0)break;var g=c[p];Mr(g!==0),e.type==="affine"?g>0?u=u.mixedAdd(n[g-1>>1]):u=u.mixedAdd(n[-g-1>>1].neg()):g>0?u=u.add(n[g-1>>1]):u=u.add(n[-g-1>>1].neg())}return e.type==="affine"?u.toP():u};St.prototype._wnafMulAdd=function(e,t,i,s,n){var c=this._wnafT1,u=this._wnafT2,p=this._wnafT3,y=0,g,x,_;for(g=0;g<s;g++){_=t[g];var S=_._getNAFPoints(e);c[g]=S.wnd,u[g]=S.points}for(g=s-1;g>=1;g-=2){var A=g-1,E=g;if(c[A]!==1||c[E]!==1){p[A]=xr(i[A],c[A],this._bitLength),p[E]=xr(i[E],c[E],this._bitLength),y=Math.max(p[A].length,y),y=Math.max(p[E].length,y);continue}var N=[t[A],null,null,t[E]];t[A].y.cmp(t[E].y)===0?(N[1]=t[A].add(t[E]),N[2]=t[A].toJ().mixedAdd(t[E].neg())):t[A].y.cmp(t[E].y.redNeg())===0?(N[1]=t[A].toJ().mixedAdd(t[E]),N[2]=t[A].add(t[E].neg())):(N[1]=t[A].toJ().mixedAdd(t[E]),N[2]=t[A].toJ().mixedAdd(t[E].neg()));var B=[-3,-1,-5,-7,0,7,5,1,3],O=Tf(i[A],i[E]);for(y=Math.max(O[0].length,y),p[A]=new Array(y),p[E]=new Array(y),x=0;x<y;x++){var L=O[0][x]|0,H=O[1][x]|0;p[A][x]=B[(L+1)*3+(H+1)],p[E][x]=0,u[A]=N}}var K=this.jpoint(null,null,null),W=this._wnafT4;for(g=y;g>=0;g--){for(var Le=0;g>=0;){var qe=!0;for(x=0;x<s;x++)W[x]=p[x][g]|0,W[x]!==0&&(qe=!1);if(!qe)break;Le++,g--}if(g>=0&&Le++,K=K.dblp(Le),g<0)break;for(x=0;x<s;x++){var $=W[x];$!==0&&($>0?_=u[x][$-1>>1]:$<0&&(_=u[x][-$-1>>1].neg()),_.type==="affine"?K=K.mixedAdd(_):K=K.add(_))}}for(g=0;g<s;g++)u[g]=null;return n?K:K.toP()};function We(r,e){this.curve=r,this.type=e,this.precomputed=null}St.BasePoint=We;We.prototype.eq=function(){throw new Error("Not implemented")};We.prototype.validate=function(){return this.curve.validate(this)};St.prototype.decodePoint=function(e,t){e=nr.toArray(e,t);var i=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*i){e[0]===6?Mr(e[e.length-1]%2===0):e[0]===7&&Mr(e[e.length-1]%2===1);var s=this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));return s}else if((e[0]===2||e[0]===3)&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),e[0]===3);throw new Error("Unknown point format")};We.prototype.encodeCompressed=function(e){return this.encode(e,!0)};We.prototype._encode=function(e){var t=this.curve.p.byteLength(),i=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",t))};We.prototype.encode=function(e,t){return nr.encode(this._encode(t),e)};We.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};We.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};We.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],s=this,n=0;n<t;n+=e){for(var c=0;c<e;c++)s=s.dbl();i.push(s)}return{step:e,points:i}};We.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],i=(1<<e)-1,s=i===1?null:this.dbl(),n=1;n<i;n++)t[n]=t[n-1].add(s);return{wnd:e,points:t}};We.prototype._getBeta=function(){return null};We.prototype.dblp=function(e){for(var t=this,i=0;i<e;i++)t=t.dbl();return t};var Cf=Fe,j=pt,ji=Er,Ut=kr,Lf=Cf.assert;function je(r){Ut.call(this,"short",r),this.a=new j(r.a,16).toRed(this.red),this.b=new j(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}ji(je,Ut);var qf=je;je.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,i;if(e.beta)t=new j(e.beta,16).toRed(this.red);else{var s=this._getEndoRoots(this.p);t=s[0].cmp(s[1])<0?s[0]:s[1],t=t.toRed(this.red)}if(e.lambda)i=new j(e.lambda,16);else{var n=this._getEndoRoots(this.n);this.g.mul(n[0]).x.cmp(this.g.x.redMul(t))===0?i=n[0]:(i=n[1],Lf(this.g.mul(i).x.cmp(this.g.x.redMul(t))===0))}var c;return e.basis?c=e.basis.map(function(u){return{a:new j(u.a,16),b:new j(u.b,16)}}):c=this._getEndoBasis(i),{beta:t,lambda:i,basis:c}}};je.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:j.mont(e),i=new j(2).toRed(t).redInvm(),s=i.redNeg(),n=new j(3).toRed(t).redNeg().redSqrt().redMul(i),c=s.redAdd(n).fromRed(),u=s.redSub(n).fromRed();return[c,u]};je.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=e,s=this.n.clone(),n=new j(1),c=new j(0),u=new j(0),p=new j(1),y,g,x,_,S,A,E,N=0,B,O;i.cmpn(0)!==0;){var L=s.div(i);B=s.sub(L.mul(i)),O=u.sub(L.mul(n));var H=p.sub(L.mul(c));if(!x&&B.cmp(t)<0)y=E.neg(),g=n,x=B.neg(),_=O;else if(x&&++N===2)break;E=B,s=i,i=B,u=n,n=O,p=c,c=H}S=B.neg(),A=O;var K=x.sqr().add(_.sqr()),W=S.sqr().add(A.sqr());return W.cmp(K)>=0&&(S=y,A=g),x.negative&&(x=x.neg(),_=_.neg()),S.negative&&(S=S.neg(),A=A.neg()),[{a:x,b:_},{a:S,b:A}]};je.prototype._endoSplit=function(e){var t=this.endo.basis,i=t[0],s=t[1],n=s.b.mul(e).divRound(this.n),c=i.b.neg().mul(e).divRound(this.n),u=n.mul(i.a),p=c.mul(s.a),y=n.mul(i.b),g=c.mul(s.b),x=e.sub(u).sub(p),_=y.add(g).neg();return{k1:x,k2:_}};je.prototype.pointFromX=function(e,t){e=new j(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),s=i.redSqrt();if(s.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var n=s.fromRed().isOdd();return(t&&!n||!t&&n)&&(s=s.redNeg()),this.point(e,s)};je.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,i=e.y,s=this.a.redMul(t),n=t.redSqr().redMul(t).redIAdd(s).redIAdd(this.b);return i.redSqr().redISub(n).cmpn(0)===0};je.prototype._endoWnafMulAdd=function(e,t,i){for(var s=this._endoWnafT1,n=this._endoWnafT2,c=0;c<e.length;c++){var u=this._endoSplit(t[c]),p=e[c],y=p._getBeta();u.k1.negative&&(u.k1.ineg(),p=p.neg(!0)),u.k2.negative&&(u.k2.ineg(),y=y.neg(!0)),s[c*2]=p,s[c*2+1]=y,n[c*2]=u.k1,n[c*2+1]=u.k2}for(var g=this._wnafMulAdd(1,s,n,c*2,i),x=0;x<c*2;x++)s[x]=null,n[x]=null;return g};function Oe(r,e,t,i){Ut.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new j(e,16),this.y=new j(t,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}ji(Oe,Ut.BasePoint);je.prototype.point=function(e,t,i){return new Oe(this,e,t,i)};je.prototype.pointFromJSON=function(e,t){return Oe.fromJSON(this,e,t)};Oe.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve,s=function(n){return i.point(n.x.redMul(i.endo.beta),n.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(s)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(s)}}}return t}};Oe.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Oe.fromJSON=function(e,t,i){typeof t=="string"&&(t=JSON.parse(t));var s=e.point(t[0],t[1],i);if(!t[2])return s;function n(u){return e.point(u[0],u[1],i)}var c=t[2];return s.precomputed={beta:null,doubles:c.doubles&&{step:c.doubles.step,points:[s].concat(c.doubles.points.map(n))},naf:c.naf&&{wnd:c.naf.wnd,points:[s].concat(c.naf.points.map(n))}},s};Oe.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Oe.prototype.isInfinity=function(){return this.inf};Oe.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var i=t.redSqr().redISub(this.x).redISub(e.x),s=t.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)};Oe.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,i=this.x.redSqr(),s=e.redInvm(),n=i.redAdd(i).redIAdd(i).redIAdd(t).redMul(s),c=n.redSqr().redISub(this.x.redAdd(this.x)),u=n.redMul(this.x.redSub(c)).redISub(this.y);return this.curve.point(c,u)};Oe.prototype.getX=function(){return this.x.fromRed()};Oe.prototype.getY=function(){return this.y.fromRed()};Oe.prototype.mul=function(e){return e=new j(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Oe.prototype.mulAdd=function(e,t,i){var s=[this,t],n=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(s,n):this.curve._wnafMulAdd(1,s,n,2)};Oe.prototype.jmulAdd=function(e,t,i){var s=[this,t],n=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(s,n,!0):this.curve._wnafMulAdd(1,s,n,2,!0)};Oe.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Oe.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed,s=function(n){return n.neg()};t.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(s)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(s)}}}return t};Oe.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Ce(r,e,t,i){Ut.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new j(0)):(this.x=new j(e,16),this.y=new j(t,16),this.z=new j(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}ji(Ce,Ut.BasePoint);je.prototype.jpoint=function(e,t,i){return new Ce(this,e,t,i)};Ce.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),i=this.x.redMul(t),s=this.y.redMul(t).redMul(e);return this.curve.point(i,s)};Ce.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Ce.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),i=this.z.redSqr(),s=this.x.redMul(t),n=e.x.redMul(i),c=this.y.redMul(t.redMul(e.z)),u=e.y.redMul(i.redMul(this.z)),p=s.redSub(n),y=c.redSub(u);if(p.cmpn(0)===0)return y.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var g=p.redSqr(),x=g.redMul(p),_=s.redMul(g),S=y.redSqr().redIAdd(x).redISub(_).redISub(_),A=y.redMul(_.redISub(S)).redISub(c.redMul(x)),E=this.z.redMul(e.z).redMul(p);return this.curve.jpoint(S,A,E)};Ce.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),i=this.x,s=e.x.redMul(t),n=this.y,c=e.y.redMul(t).redMul(this.z),u=i.redSub(s),p=n.redSub(c);if(u.cmpn(0)===0)return p.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var y=u.redSqr(),g=y.redMul(u),x=i.redMul(y),_=p.redSqr().redIAdd(g).redISub(x).redISub(x),S=p.redMul(x.redISub(_)).redISub(n.redMul(g)),A=this.z.redMul(u);return this.curve.jpoint(_,S,A)};Ce.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var i=this;for(t=0;t<e;t++)i=i.dbl();return i}var s=this.curve.a,n=this.curve.tinv,c=this.x,u=this.y,p=this.z,y=p.redSqr().redSqr(),g=u.redAdd(u);for(t=0;t<e;t++){var x=c.redSqr(),_=g.redSqr(),S=_.redSqr(),A=x.redAdd(x).redIAdd(x).redIAdd(s.redMul(y)),E=c.redMul(_),N=A.redSqr().redISub(E.redAdd(E)),B=E.redISub(N),O=A.redMul(B);O=O.redIAdd(O).redISub(S);var L=g.redMul(p);t+1<e&&(y=y.redMul(S)),c=N,p=L,g=O}return this.curve.jpoint(c,g.redMul(n),p)};Ce.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Ce.prototype._zeroDbl=function(){var e,t,i;if(this.zOne){var s=this.x.redSqr(),n=this.y.redSqr(),c=n.redSqr(),u=this.x.redAdd(n).redSqr().redISub(s).redISub(c);u=u.redIAdd(u);var p=s.redAdd(s).redIAdd(s),y=p.redSqr().redISub(u).redISub(u),g=c.redIAdd(c);g=g.redIAdd(g),g=g.redIAdd(g),e=y,t=p.redMul(u.redISub(y)).redISub(g),i=this.y.redAdd(this.y)}else{var x=this.x.redSqr(),_=this.y.redSqr(),S=_.redSqr(),A=this.x.redAdd(_).redSqr().redISub(x).redISub(S);A=A.redIAdd(A);var E=x.redAdd(x).redIAdd(x),N=E.redSqr(),B=S.redIAdd(S);B=B.redIAdd(B),B=B.redIAdd(B),e=N.redISub(A).redISub(A),t=E.redMul(A.redISub(e)).redISub(B),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(e,t,i)};Ce.prototype._threeDbl=function(){var e,t,i;if(this.zOne){var s=this.x.redSqr(),n=this.y.redSqr(),c=n.redSqr(),u=this.x.redAdd(n).redSqr().redISub(s).redISub(c);u=u.redIAdd(u);var p=s.redAdd(s).redIAdd(s).redIAdd(this.curve.a),y=p.redSqr().redISub(u).redISub(u);e=y;var g=c.redIAdd(c);g=g.redIAdd(g),g=g.redIAdd(g),t=p.redMul(u.redISub(y)).redISub(g),i=this.y.redAdd(this.y)}else{var x=this.z.redSqr(),_=this.y.redSqr(),S=this.x.redMul(_),A=this.x.redSub(x).redMul(this.x.redAdd(x));A=A.redAdd(A).redIAdd(A);var E=S.redIAdd(S);E=E.redIAdd(E);var N=E.redAdd(E);e=A.redSqr().redISub(N),i=this.y.redAdd(this.z).redSqr().redISub(_).redISub(x);var B=_.redSqr();B=B.redIAdd(B),B=B.redIAdd(B),B=B.redIAdd(B),t=A.redMul(E.redISub(e)).redISub(B)}return this.curve.jpoint(e,t,i)};Ce.prototype._dbl=function(){var e=this.curve.a,t=this.x,i=this.y,s=this.z,n=s.redSqr().redSqr(),c=t.redSqr(),u=i.redSqr(),p=c.redAdd(c).redIAdd(c).redIAdd(e.redMul(n)),y=t.redAdd(t);y=y.redIAdd(y);var g=y.redMul(u),x=p.redSqr().redISub(g.redAdd(g)),_=g.redISub(x),S=u.redSqr();S=S.redIAdd(S),S=S.redIAdd(S),S=S.redIAdd(S);var A=p.redMul(_).redISub(S),E=i.redAdd(i).redMul(s);return this.curve.jpoint(x,A,E)};Ce.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr(),s=t.redSqr(),n=e.redAdd(e).redIAdd(e),c=n.redSqr(),u=this.x.redAdd(t).redSqr().redISub(e).redISub(s);u=u.redIAdd(u),u=u.redAdd(u).redIAdd(u),u=u.redISub(c);var p=u.redSqr(),y=s.redIAdd(s);y=y.redIAdd(y),y=y.redIAdd(y),y=y.redIAdd(y);var g=n.redIAdd(u).redSqr().redISub(c).redISub(p).redISub(y),x=t.redMul(g);x=x.redIAdd(x),x=x.redIAdd(x);var _=this.x.redMul(p).redISub(x);_=_.redIAdd(_),_=_.redIAdd(_);var S=this.y.redMul(g.redMul(y.redISub(g)).redISub(u.redMul(p)));S=S.redIAdd(S),S=S.redIAdd(S),S=S.redIAdd(S);var A=this.z.redAdd(u).redSqr().redISub(i).redISub(p);return this.curve.jpoint(_,S,A)};Ce.prototype.mul=function(e,t){return e=new j(e,t),this.curve._wnafMul(this,e)};Ce.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),i=e.z.redSqr();if(this.x.redMul(i).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var s=t.redMul(this.z),n=i.redMul(e.z);return this.y.redMul(n).redISub(e.y.redMul(s)).cmpn(0)===0};Ce.prototype.eqXToP=function(e){var t=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(i)===0)return!0;for(var s=e.clone(),n=this.curve.redN.redMul(t);;){if(s.iadd(this.curve.n),s.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(n),this.x.cmp(i)===0)return!0}};Ce.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Ce.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Tt=pt,xs=Er,Rr=kr,$f=Fe;function Ft(r){Rr.call(this,"mont",r),this.a=new Tt(r.a,16).toRed(this.red),this.b=new Tt(r.b,16).toRed(this.red),this.i4=new Tt(4).toRed(this.red).redInvm(),this.two=new Tt(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}xs(Ft,Rr);var zf=Ft;Ft.prototype.validate=function(e){var t=e.normalize().x,i=t.redSqr(),s=i.redMul(t).redAdd(i.redMul(this.a)).redAdd(t),n=s.redSqrt();return n.redSqr().cmp(s)===0};function Ne(r,e,t){Rr.BasePoint.call(this,r,"projective"),e===null&&t===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Tt(e,16),this.z=new Tt(t,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}xs(Ne,Rr.BasePoint);Ft.prototype.decodePoint=function(e,t){return this.point($f.toArray(e,t),1)};Ft.prototype.point=function(e,t){return new Ne(this,e,t)};Ft.prototype.pointFromJSON=function(e){return Ne.fromJSON(this,e)};Ne.prototype.precompute=function(){};Ne.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Ne.fromJSON=function(e,t){return new Ne(e,t[0],t[1]||e.one)};Ne.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Ne.prototype.isInfinity=function(){return this.z.cmpn(0)===0};Ne.prototype.dbl=function(){var e=this.x.redAdd(this.z),t=e.redSqr(),i=this.x.redSub(this.z),s=i.redSqr(),n=t.redSub(s),c=t.redMul(s),u=n.redMul(s.redAdd(this.curve.a24.redMul(n)));return this.curve.point(c,u)};Ne.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};Ne.prototype.diffAdd=function(e,t){var i=this.x.redAdd(this.z),s=this.x.redSub(this.z),n=e.x.redAdd(e.z),c=e.x.redSub(e.z),u=c.redMul(i),p=n.redMul(s),y=t.z.redMul(u.redAdd(p).redSqr()),g=t.x.redMul(u.redISub(p).redSqr());return this.curve.point(y,g)};Ne.prototype.mul=function(e){for(var t=e.clone(),i=this,s=this.curve.point(null,null),n=this,c=[];t.cmpn(0)!==0;t.iushrn(1))c.push(t.andln(1));for(var u=c.length-1;u>=0;u--)c[u]===0?(i=i.diffAdd(s,n),s=s.dbl()):(s=i.diffAdd(s,n),i=i.dbl());return s};Ne.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};Ne.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};Ne.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};Ne.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Ne.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var Df=Fe,dt=pt,Ms=Er,Br=kr,Kf=Df.assert;function ot(r){this.twisted=(r.a|0)!==1,this.mOneA=this.twisted&&(r.a|0)===-1,this.extended=this.mOneA,Br.call(this,"edwards",r),this.a=new dt(r.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new dt(r.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new dt(r.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),Kf(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(r.c|0)===1}Ms(ot,Br);var Uf=ot;ot.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};ot.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};ot.prototype.jpoint=function(e,t,i,s){return this.point(e,t,i,s)};ot.prototype.pointFromX=function(e,t){e=new dt(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),s=this.c2.redSub(this.a.redMul(i)),n=this.one.redSub(this.c2.redMul(this.d).redMul(i)),c=s.redMul(n.redInvm()),u=c.redSqrt();if(u.redSqr().redSub(c).cmp(this.zero)!==0)throw new Error("invalid point");var p=u.fromRed().isOdd();return(t&&!p||!t&&p)&&(u=u.redNeg()),this.point(e,u)};ot.prototype.pointFromY=function(e,t){e=new dt(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),s=i.redSub(this.c2),n=i.redMul(this.d).redMul(this.c2).redSub(this.a),c=s.redMul(n.redInvm());if(c.cmp(this.zero)===0){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var u=c.redSqrt();if(u.redSqr().redSub(c).cmp(this.zero)!==0)throw new Error("invalid point");return u.fromRed().isOdd()!==t&&(u=u.redNeg()),this.point(u,e)};ot.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),i=e.y.redSqr(),s=t.redMul(this.a).redAdd(i),n=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(i)));return s.cmp(n)===0};function J(r,e,t,i,s){Br.BasePoint.call(this,r,"projective"),e===null&&t===null&&i===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new dt(e,16),this.y=new dt(t,16),this.z=i?new dt(i,16):this.curve.one,this.t=s&&new dt(s,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}Ms(J,Br.BasePoint);ot.prototype.pointFromJSON=function(e){return J.fromJSON(this,e)};ot.prototype.point=function(e,t,i,s){return new J(this,e,t,i,s)};J.fromJSON=function(e,t){return new J(e,t[0],t[1],t[2])};J.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};J.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};J.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var s=this.curve._mulA(e),n=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),c=s.redAdd(t),u=c.redSub(i),p=s.redSub(t),y=n.redMul(u),g=c.redMul(p),x=n.redMul(p),_=u.redMul(c);return this.curve.point(y,g,_,x)};J.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),t=this.x.redSqr(),i=this.y.redSqr(),s,n,c,u,p,y;if(this.curve.twisted){u=this.curve._mulA(t);var g=u.redAdd(i);this.zOne?(s=e.redSub(t).redSub(i).redMul(g.redSub(this.curve.two)),n=g.redMul(u.redSub(i)),c=g.redSqr().redSub(g).redSub(g)):(p=this.z.redSqr(),y=g.redSub(p).redISub(p),s=e.redSub(t).redISub(i).redMul(y),n=g.redMul(u.redSub(i)),c=g.redMul(y))}else u=t.redAdd(i),p=this.curve._mulC(this.z).redSqr(),y=u.redSub(p).redSub(p),s=this.curve._mulC(e.redISub(u)).redMul(y),n=this.curve._mulC(u).redMul(t.redISub(i)),c=u.redMul(y);return this.curve.point(s,n,c)};J.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};J.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),i=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),s=this.t.redMul(this.curve.dd).redMul(e.t),n=this.z.redMul(e.z.redAdd(e.z)),c=i.redSub(t),u=n.redSub(s),p=n.redAdd(s),y=i.redAdd(t),g=c.redMul(u),x=p.redMul(y),_=c.redMul(y),S=u.redMul(p);return this.curve.point(g,x,S,_)};J.prototype._projAdd=function(e){var t=this.z.redMul(e.z),i=t.redSqr(),s=this.x.redMul(e.x),n=this.y.redMul(e.y),c=this.curve.d.redMul(s).redMul(n),u=i.redSub(c),p=i.redAdd(c),y=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(s).redISub(n),g=t.redMul(u).redMul(y),x,_;return this.curve.twisted?(x=t.redMul(p).redMul(n.redSub(this.curve._mulA(s))),_=u.redMul(p)):(x=t.redMul(p).redMul(n.redSub(s)),_=this.curve._mulC(u).redMul(p)),this.curve.point(g,x,_)};J.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};J.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};J.prototype.mulAdd=function(e,t,i){return this.curve._wnafMulAdd(1,[this,t],[e,i],2,!1)};J.prototype.jmulAdd=function(e,t,i){return this.curve._wnafMulAdd(1,[this,t],[e,i],2,!0)};J.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};J.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};J.prototype.getX=function(){return this.normalize(),this.x.fromRed()};J.prototype.getY=function(){return this.normalize(),this.y.fromRed()};J.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};J.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(t)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(s),this.x.cmp(t)===0)return!0}};J.prototype.toP=J.prototype.normalize;J.prototype.mixedAdd=J.prototype.add;(function(r){var e=r;e.base=kr,e.short=qf,e.mont=zf,e.edwards=Uf})(Wi);var Nr={},Or={},q={},Ff=Bt,Hf=Er;q.inherits=Hf;function Jf(r,e){return(r.charCodeAt(e)&64512)!==55296||e<0||e+1>=r.length?!1:(r.charCodeAt(e+1)&64512)===56320}function Vf(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r=="string")if(e){if(e==="hex")for(r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r),s=0;s<r.length;s+=2)t.push(parseInt(r[s]+r[s+1],16))}else for(var i=0,s=0;s<r.length;s++){var n=r.charCodeAt(s);n<128?t[i++]=n:n<2048?(t[i++]=n>>6|192,t[i++]=n&63|128):Jf(r,s)?(n=65536+((n&1023)<<10)+(r.charCodeAt(++s)&1023),t[i++]=n>>18|240,t[i++]=n>>12&63|128,t[i++]=n>>6&63|128,t[i++]=n&63|128):(t[i++]=n>>12|224,t[i++]=n>>6&63|128,t[i++]=n&63|128)}else for(s=0;s<r.length;s++)t[s]=r[s]|0;return t}q.toArray=Vf;function Wf(r){for(var e="",t=0;t<r.length;t++)e+=_s(r[t].toString(16));return e}q.toHex=Wf;function Ss(r){var e=r>>>24|r>>>8&65280|r<<8&16711680|(r&255)<<24;return e>>>0}q.htonl=Ss;function jf(r,e){for(var t="",i=0;i<r.length;i++){var s=r[i];e==="little"&&(s=Ss(s)),t+=As(s.toString(16))}return t}q.toHex32=jf;function _s(r){return r.length===1?"0"+r:r}q.zero2=_s;function As(r){return r.length===7?"0"+r:r.length===6?"00"+r:r.length===5?"000"+r:r.length===4?"0000"+r:r.length===3?"00000"+r:r.length===2?"000000"+r:r.length===1?"0000000"+r:r}q.zero8=As;function Gf(r,e,t,i){var s=t-e;Ff(s%4===0);for(var n=new Array(s/4),c=0,u=e;c<n.length;c++,u+=4){var p;i==="big"?p=r[u]<<24|r[u+1]<<16|r[u+2]<<8|r[u+3]:p=r[u+3]<<24|r[u+2]<<16|r[u+1]<<8|r[u],n[c]=p>>>0}return n}q.join32=Gf;function Yf(r,e){for(var t=new Array(r.length*4),i=0,s=0;i<r.length;i++,s+=4){var n=r[i];e==="big"?(t[s]=n>>>24,t[s+1]=n>>>16&255,t[s+2]=n>>>8&255,t[s+3]=n&255):(t[s+3]=n>>>24,t[s+2]=n>>>16&255,t[s+1]=n>>>8&255,t[s]=n&255)}return t}q.split32=Yf;function Xf(r,e){return r>>>e|r<<32-e}q.rotr32=Xf;function Zf(r,e){return r<<e|r>>>32-e}q.rotl32=Zf;function Qf(r,e){return r+e>>>0}q.sum32=Qf;function eo(r,e,t){return r+e+t>>>0}q.sum32_3=eo;function to(r,e,t,i){return r+e+t+i>>>0}q.sum32_4=to;function ro(r,e,t,i,s){return r+e+t+i+s>>>0}q.sum32_5=ro;function io(r,e,t,i){var s=r[e],n=r[e+1],c=i+n>>>0,u=(c<i?1:0)+t+s;r[e]=u>>>0,r[e+1]=c}q.sum64=io;function no(r,e,t,i){var s=e+i>>>0,n=(s<e?1:0)+r+t;return n>>>0}q.sum64_hi=no;function so(r,e,t,i){var s=e+i;return s>>>0}q.sum64_lo=so;function ao(r,e,t,i,s,n,c,u){var p=0,y=e;y=y+i>>>0,p+=y<e?1:0,y=y+n>>>0,p+=y<n?1:0,y=y+u>>>0,p+=y<u?1:0;var g=r+t+s+c+p;return g>>>0}q.sum64_4_hi=ao;function fo(r,e,t,i,s,n,c,u){var p=e+i+n+u;return p>>>0}q.sum64_4_lo=fo;function oo(r,e,t,i,s,n,c,u,p,y){var g=0,x=e;x=x+i>>>0,g+=x<e?1:0,x=x+n>>>0,g+=x<n?1:0,x=x+u>>>0,g+=x<u?1:0,x=x+y>>>0,g+=x<y?1:0;var _=r+t+s+c+p+g;return _>>>0}q.sum64_5_hi=oo;function co(r,e,t,i,s,n,c,u,p,y){var g=e+i+n+u+y;return g>>>0}q.sum64_5_lo=co;function ho(r,e,t){var i=e<<32-t|r>>>t;return i>>>0}q.rotr64_hi=ho;function uo(r,e,t){var i=r<<32-t|e>>>t;return i>>>0}q.rotr64_lo=uo;function lo(r,e,t){return r>>>t}q.shr64_hi=lo;function bo(r,e,t){var i=r<<32-t|e>>>t;return i>>>0}q.shr64_lo=bo;var Ht={},Ln=q,po=Bt;function Tr(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Ht.BlockHash=Tr;Tr.prototype.update=function(e,t){if(e=Ln.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var i=e.length%this._delta8;this.pending=e.slice(e.length-i,e.length),this.pending.length===0&&(this.pending=null),e=Ln.join32(e,0,e.length-i,this.endian);for(var s=0;s<e.length;s+=this._delta32)this._update(e,s,s+this._delta32)}return this};Tr.prototype.digest=function(e){return this.update(this._pad()),po(this.pending===null),this._digest(e)};Tr.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,i=t-(e+this.padLength)%t,s=new Array(i+this.padLength);s[0]=128;for(var n=1;n<i;n++)s[n]=0;if(e<<=3,this.endian==="big"){for(var c=8;c<this.padLength;c++)s[n++]=0;s[n++]=0,s[n++]=0,s[n++]=0,s[n++]=0,s[n++]=e>>>24&255,s[n++]=e>>>16&255,s[n++]=e>>>8&255,s[n++]=e&255}else for(s[n++]=e&255,s[n++]=e>>>8&255,s[n++]=e>>>16&255,s[n++]=e>>>24&255,s[n++]=0,s[n++]=0,s[n++]=0,s[n++]=0,c=8;c<this.padLength;c++)s[n++]=0;return s};var Jt={},ct={},vo=q,tt=vo.rotr32;function mo(r,e,t,i){if(r===0)return Es(e,t,i);if(r===1||r===3)return Ps(e,t,i);if(r===2)return Is(e,t,i)}ct.ft_1=mo;function Es(r,e,t){return r&e^~r&t}ct.ch32=Es;function Is(r,e,t){return r&e^r&t^e&t}ct.maj32=Is;function Ps(r,e,t){return r^e^t}ct.p32=Ps;function go(r){return tt(r,2)^tt(r,13)^tt(r,22)}ct.s0_256=go;function yo(r){return tt(r,6)^tt(r,11)^tt(r,25)}ct.s1_256=yo;function wo(r){return tt(r,7)^tt(r,18)^r>>>3}ct.g0_256=wo;function xo(r){return tt(r,17)^tt(r,19)^r>>>10}ct.g1_256=xo;var Lt=q,Mo=Ht,So=ct,ui=Lt.rotl32,Zt=Lt.sum32,_o=Lt.sum32_5,Ao=So.ft_1,ks=Mo.BlockHash,Eo=[1518500249,1859775393,2400959708,3395469782];function st(){if(!(this instanceof st))return new st;ks.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Lt.inherits(st,ks);var Io=st;st.blockSize=512;st.outSize=160;st.hmacStrength=80;st.padLength=64;st.prototype._update=function(e,t){for(var i=this.W,s=0;s<16;s++)i[s]=e[t+s];for(;s<i.length;s++)i[s]=ui(i[s-3]^i[s-8]^i[s-14]^i[s-16],1);var n=this.h[0],c=this.h[1],u=this.h[2],p=this.h[3],y=this.h[4];for(s=0;s<i.length;s++){var g=~~(s/20),x=_o(ui(n,5),Ao(g,c,u,p),y,i[s],Eo[g]);y=p,p=u,u=ui(c,30),c=n,n=x}this.h[0]=Zt(this.h[0],n),this.h[1]=Zt(this.h[1],c),this.h[2]=Zt(this.h[2],u),this.h[3]=Zt(this.h[3],p),this.h[4]=Zt(this.h[4],y)};st.prototype._digest=function(e){return e==="hex"?Lt.toHex32(this.h,"big"):Lt.split32(this.h,"big")};var qt=q,Po=Ht,Vt=ct,ko=Bt,Ye=qt.sum32,Ro=qt.sum32_4,Bo=qt.sum32_5,No=Vt.ch32,Oo=Vt.maj32,To=Vt.s0_256,Co=Vt.s1_256,Lo=Vt.g0_256,qo=Vt.g1_256,Rs=Po.BlockHash,$o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function at(){if(!(this instanceof at))return new at;Rs.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=$o,this.W=new Array(64)}qt.inherits(at,Rs);var Bs=at;at.blockSize=512;at.outSize=256;at.hmacStrength=192;at.padLength=64;at.prototype._update=function(e,t){for(var i=this.W,s=0;s<16;s++)i[s]=e[t+s];for(;s<i.length;s++)i[s]=Ro(qo(i[s-2]),i[s-7],Lo(i[s-15]),i[s-16]);var n=this.h[0],c=this.h[1],u=this.h[2],p=this.h[3],y=this.h[4],g=this.h[5],x=this.h[6],_=this.h[7];for(ko(this.k.length===i.length),s=0;s<i.length;s++){var S=Bo(_,Co(y),No(y,g,x),this.k[s],i[s]),A=Ye(To(n),Oo(n,c,u));_=x,x=g,g=y,y=Ye(p,S),p=u,u=c,c=n,n=Ye(S,A)}this.h[0]=Ye(this.h[0],n),this.h[1]=Ye(this.h[1],c),this.h[2]=Ye(this.h[2],u),this.h[3]=Ye(this.h[3],p),this.h[4]=Ye(this.h[4],y),this.h[5]=Ye(this.h[5],g),this.h[6]=Ye(this.h[6],x),this.h[7]=Ye(this.h[7],_)};at.prototype._digest=function(e){return e==="hex"?qt.toHex32(this.h,"big"):qt.split32(this.h,"big")};var Ni=q,Ns=Bs;function ut(){if(!(this instanceof ut))return new ut;Ns.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Ni.inherits(ut,Ns);var zo=ut;ut.blockSize=512;ut.outSize=224;ut.hmacStrength=192;ut.padLength=64;ut.prototype._digest=function(e){return e==="hex"?Ni.toHex32(this.h.slice(0,7),"big"):Ni.split32(this.h.slice(0,7),"big")};var Ke=q,Do=Ht,Ko=Bt,rt=Ke.rotr64_hi,it=Ke.rotr64_lo,Os=Ke.shr64_hi,Ts=Ke.shr64_lo,mt=Ke.sum64,li=Ke.sum64_hi,bi=Ke.sum64_lo,Uo=Ke.sum64_4_hi,Fo=Ke.sum64_4_lo,Ho=Ke.sum64_5_hi,Jo=Ke.sum64_5_lo,Cs=Do.BlockHash,Vo=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Ze(){if(!(this instanceof Ze))return new Ze;Cs.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Vo,this.W=new Array(160)}Ke.inherits(Ze,Cs);var Ls=Ze;Ze.blockSize=1024;Ze.outSize=512;Ze.hmacStrength=192;Ze.padLength=128;Ze.prototype._prepareBlock=function(e,t){for(var i=this.W,s=0;s<32;s++)i[s]=e[t+s];for(;s<i.length;s+=2){var n=ic(i[s-4],i[s-3]),c=nc(i[s-4],i[s-3]),u=i[s-14],p=i[s-13],y=tc(i[s-30],i[s-29]),g=rc(i[s-30],i[s-29]),x=i[s-32],_=i[s-31];i[s]=Uo(n,c,u,p,y,g,x,_),i[s+1]=Fo(n,c,u,p,y,g,x,_)}};Ze.prototype._update=function(e,t){this._prepareBlock(e,t);var i=this.W,s=this.h[0],n=this.h[1],c=this.h[2],u=this.h[3],p=this.h[4],y=this.h[5],g=this.h[6],x=this.h[7],_=this.h[8],S=this.h[9],A=this.h[10],E=this.h[11],N=this.h[12],B=this.h[13],O=this.h[14],L=this.h[15];Ko(this.k.length===i.length);for(var H=0;H<i.length;H+=2){var K=O,W=L,Le=Qo(_,S),qe=ec(_,S),$=Wo(_,S,A,E,N),Te=jo(_,S,A,E,N,B),m=this.k[H],a=this.k[H+1],o=i[H],l=i[H+1],b=Ho(K,W,Le,qe,$,Te,m,a,o,l),v=Jo(K,W,Le,qe,$,Te,m,a,o,l);K=Xo(s,n),W=Zo(s,n),Le=Go(s,n,c,u,p),qe=Yo(s,n,c,u,p,y);var w=li(K,W,Le,qe),M=bi(K,W,Le,qe);O=N,L=B,N=A,B=E,A=_,E=S,_=li(g,x,b,v),S=bi(x,x,b,v),g=p,x=y,p=c,y=u,c=s,u=n,s=li(b,v,w,M),n=bi(b,v,w,M)}mt(this.h,0,s,n),mt(this.h,2,c,u),mt(this.h,4,p,y),mt(this.h,6,g,x),mt(this.h,8,_,S),mt(this.h,10,A,E),mt(this.h,12,N,B),mt(this.h,14,O,L)};Ze.prototype._digest=function(e){return e==="hex"?Ke.toHex32(this.h,"big"):Ke.split32(this.h,"big")};function Wo(r,e,t,i,s){var n=r&t^~r&s;return n<0&&(n+=4294967296),n}function jo(r,e,t,i,s,n){var c=e&i^~e&n;return c<0&&(c+=4294967296),c}function Go(r,e,t,i,s){var n=r&t^r&s^t&s;return n<0&&(n+=4294967296),n}function Yo(r,e,t,i,s,n){var c=e&i^e&n^i&n;return c<0&&(c+=4294967296),c}function Xo(r,e){var t=rt(r,e,28),i=rt(e,r,2),s=rt(e,r,7),n=t^i^s;return n<0&&(n+=4294967296),n}function Zo(r,e){var t=it(r,e,28),i=it(e,r,2),s=it(e,r,7),n=t^i^s;return n<0&&(n+=4294967296),n}function Qo(r,e){var t=rt(r,e,14),i=rt(r,e,18),s=rt(e,r,9),n=t^i^s;return n<0&&(n+=4294967296),n}function ec(r,e){var t=it(r,e,14),i=it(r,e,18),s=it(e,r,9),n=t^i^s;return n<0&&(n+=4294967296),n}function tc(r,e){var t=rt(r,e,1),i=rt(r,e,8),s=Os(r,e,7),n=t^i^s;return n<0&&(n+=4294967296),n}function rc(r,e){var t=it(r,e,1),i=it(r,e,8),s=Ts(r,e,7),n=t^i^s;return n<0&&(n+=4294967296),n}function ic(r,e){var t=rt(r,e,19),i=rt(e,r,29),s=Os(r,e,6),n=t^i^s;return n<0&&(n+=4294967296),n}function nc(r,e){var t=it(r,e,19),i=it(e,r,29),s=Ts(r,e,6),n=t^i^s;return n<0&&(n+=4294967296),n}var Oi=q,qs=Ls;function lt(){if(!(this instanceof lt))return new lt;qs.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Oi.inherits(lt,qs);var sc=lt;lt.blockSize=1024;lt.outSize=384;lt.hmacStrength=192;lt.padLength=128;lt.prototype._digest=function(e){return e==="hex"?Oi.toHex32(this.h.slice(0,12),"big"):Oi.split32(this.h.slice(0,12),"big")};Jt.sha1=Io;Jt.sha224=zo;Jt.sha256=Bs;Jt.sha384=sc;Jt.sha512=Ls;var $s={},Rt=q,ac=Ht,lr=Rt.rotl32,qn=Rt.sum32,Qt=Rt.sum32_3,$n=Rt.sum32_4,zs=ac.BlockHash;function ft(){if(!(this instanceof ft))return new ft;zs.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Rt.inherits(ft,zs);$s.ripemd160=ft;ft.blockSize=512;ft.outSize=160;ft.hmacStrength=192;ft.padLength=64;ft.prototype._update=function(e,t){for(var i=this.h[0],s=this.h[1],n=this.h[2],c=this.h[3],u=this.h[4],p=i,y=s,g=n,x=c,_=u,S=0;S<80;S++){var A=qn(lr($n(i,zn(S,s,n,c),e[cc[S]+t],fc(S)),hc[S]),u);i=u,u=c,c=lr(n,10),n=s,s=A,A=qn(lr($n(p,zn(79-S,y,g,x),e[dc[S]+t],oc(S)),uc[S]),_),p=_,_=x,x=lr(g,10),g=y,y=A}A=Qt(this.h[1],n,x),this.h[1]=Qt(this.h[2],c,_),this.h[2]=Qt(this.h[3],u,p),this.h[3]=Qt(this.h[4],i,y),this.h[4]=Qt(this.h[0],s,g),this.h[0]=A};ft.prototype._digest=function(e){return e==="hex"?Rt.toHex32(this.h,"little"):Rt.split32(this.h,"little")};function zn(r,e,t,i){return r<=15?e^t^i:r<=31?e&t|~e&i:r<=47?(e|~t)^i:r<=63?e&i|t&~i:e^(t|~i)}function fc(r){return r<=15?0:r<=31?1518500249:r<=47?1859775393:r<=63?2400959708:2840853838}function oc(r){return r<=15?1352829926:r<=31?1548603684:r<=47?1836072691:r<=63?2053994217:0}var cc=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],dc=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],hc=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],uc=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],lc=q,bc=Bt;function $t(r,e,t){if(!(this instanceof $t))return new $t(r,e,t);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(lc.toArray(e,t))}var pc=$t;$t.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),bc(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};$t.prototype.update=function(e,t){return this.inner.update(e,t),this};$t.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(r){var e=r;e.utils=q,e.common=Ht,e.sha=Jt,e.ripemd=$s,e.hmac=pc,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(Or);var pi,Dn;function vc(){return Dn||(Dn=1,pi={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),pi}(function(r){var e=r,t=Or,i=Wi,s=Fe,n=s.assert;function c(y){y.type==="short"?this.curve=new i.short(y):y.type==="edwards"?this.curve=new i.edwards(y):this.curve=new i.mont(y),this.g=this.curve.g,this.n=this.curve.n,this.hash=y.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=c;function u(y,g){Object.defineProperty(e,y,{configurable:!0,enumerable:!0,get:function(){var x=new c(g);return Object.defineProperty(e,y,{configurable:!0,enumerable:!0,value:x}),x}})}u("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:t.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),u("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:t.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),u("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:t.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),u("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:t.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),u("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:t.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),u("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["9"]}),u("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var p;try{p=vc()}catch{p=void 0}u("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:t.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",p]})})(Nr);var mc=Or,It=Ji,Ds=Bt;function Mt(r){if(!(this instanceof Mt))return new Mt(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=It.toArray(r.entropy,r.entropyEnc||"hex"),t=It.toArray(r.nonce,r.nonceEnc||"hex"),i=It.toArray(r.pers,r.persEnc||"hex");Ds(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,i)}var gc=Mt;Mt.prototype._init=function(e,t,i){var s=e.concat(t).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var n=0;n<this.V.length;n++)this.K[n]=0,this.V[n]=1;this._update(s),this._reseed=1,this.reseedInterval=281474976710656};Mt.prototype._hmac=function(){return new mc.hmac(this.hash,this.K)};Mt.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Mt.prototype.reseed=function(e,t,i,s){typeof t!="string"&&(s=i,i=t,t=null),e=It.toArray(e,t),i=It.toArray(i,s),Ds(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(i||[])),this._reseed=1};Mt.prototype.generate=function(e,t,i,s){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(s=i,i=t,t=null),i&&(i=It.toArray(i,s||"hex"),this._update(i));for(var n=[];n.length<e;)this.V=this._hmac().update(this.V).digest(),n=n.concat(this.V);var c=n.slice(0,e);return this._update(i),this._reseed++,It.encode(c,t)};var yc=pt,wc=Fe,Ti=wc.assert;function De(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var xc=De;De.fromPublic=function(e,t,i){return t instanceof De?t:new De(e,{pub:t,pubEnc:i})};De.fromPrivate=function(e,t,i){return t instanceof De?t:new De(e,{priv:t,privEnc:i})};De.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};De.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};De.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};De.prototype._importPrivate=function(e,t){this.priv=new yc(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};De.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?Ti(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Ti(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};De.prototype.derive=function(e){return e.validate()||Ti(e.validate(),"public point not validated"),e.mul(this.priv).getX()};De.prototype.sign=function(e,t,i){return this.ec.sign(e,this,t,i)};De.prototype.verify=function(e,t){return this.ec.verify(e,t,this)};De.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Sr=pt,Gi=Fe,Mc=Gi.assert;function Cr(r,e){if(r instanceof Cr)return r;this._importDER(r,e)||(Mc(r.r&&r.s,"Signature without r or s"),this.r=new Sr(r.r,16),this.s=new Sr(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}var Sc=Cr;function _c(){this.place=0}function vi(r,e){var t=r[e.place++];if(!(t&128))return t;var i=t&15;if(i===0||i>4)return!1;for(var s=0,n=0,c=e.place;n<i;n++,c++)s<<=8,s|=r[c],s>>>=0;return s<=127?!1:(e.place=c,s)}function Kn(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}Cr.prototype._importDER=function(e,t){e=Gi.toArray(e,t);var i=new _c;if(e[i.place++]!==48)return!1;var s=vi(e,i);if(s===!1||s+i.place!==e.length||e[i.place++]!==2)return!1;var n=vi(e,i);if(n===!1)return!1;var c=e.slice(i.place,n+i.place);if(i.place+=n,e[i.place++]!==2)return!1;var u=vi(e,i);if(u===!1||e.length!==u+i.place)return!1;var p=e.slice(i.place,u+i.place);if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;if(p[0]===0)if(p[1]&128)p=p.slice(1);else return!1;return this.r=new Sr(c),this.s=new Sr(p),this.recoveryParam=null,!0};function mi(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}Cr.prototype.toDER=function(e){var t=this.r.toArray(),i=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),i[0]&128&&(i=[0].concat(i)),t=Kn(t),i=Kn(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var s=[2];mi(s,t.length),s=s.concat(t),s.push(2),mi(s,i.length);var n=s.concat(i),c=[48];return mi(c,n.length),c=c.concat(n),Gi.encode(c,e)};var Pt=pt,Ks=gc,Ac=Fe,gi=Nr,Ec=ws,Us=Ac.assert,Yi=xc,Lr=Sc;function Ve(r){if(!(this instanceof Ve))return new Ve(r);typeof r=="string"&&(Us(Object.prototype.hasOwnProperty.call(gi,r),"Unknown curve "+r),r=gi[r]),r instanceof gi.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}var Ic=Ve;Ve.prototype.keyPair=function(e){return new Yi(this,e)};Ve.prototype.keyFromPrivate=function(e,t){return Yi.fromPrivate(this,e,t)};Ve.prototype.keyFromPublic=function(e,t){return Yi.fromPublic(this,e,t)};Ve.prototype.genKeyPair=function(e){e||(e={});for(var t=new Ks({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||Ec(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),s=this.n.sub(new Pt(2));;){var n=new Pt(t.generate(i));if(!(n.cmp(s)>0))return n.iaddn(1),this.keyFromPrivate(n)}};Ve.prototype._truncateToN=function(e,t){var i=e.byteLength()*8-this.n.bitLength();return i>0&&(e=e.ushrn(i)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};Ve.prototype.sign=function(e,t,i,s){typeof i=="object"&&(s=i,i=null),s||(s={}),t=this.keyFromPrivate(t,i),e=this._truncateToN(new Pt(e,16));for(var n=this.n.byteLength(),c=t.getPrivate().toArray("be",n),u=e.toArray("be",n),p=new Ks({hash:this.hash,entropy:c,nonce:u,pers:s.pers,persEnc:s.persEnc||"utf8"}),y=this.n.sub(new Pt(1)),g=0;;g++){var x=s.k?s.k(g):new Pt(p.generate(this.n.byteLength()));if(x=this._truncateToN(x,!0),!(x.cmpn(1)<=0||x.cmp(y)>=0)){var _=this.g.mul(x);if(!_.isInfinity()){var S=_.getX(),A=S.umod(this.n);if(A.cmpn(0)!==0){var E=x.invm(this.n).mul(A.mul(t.getPrivate()).iadd(e));if(E=E.umod(this.n),E.cmpn(0)!==0){var N=(_.getY().isOdd()?1:0)|(S.cmp(A)!==0?2:0);return s.canonical&&E.cmp(this.nh)>0&&(E=this.n.sub(E),N^=1),new Lr({r:A,s:E,recoveryParam:N})}}}}}};Ve.prototype.verify=function(e,t,i,s){e=this._truncateToN(new Pt(e,16)),i=this.keyFromPublic(i,s),t=new Lr(t,"hex");var n=t.r,c=t.s;if(n.cmpn(1)<0||n.cmp(this.n)>=0||c.cmpn(1)<0||c.cmp(this.n)>=0)return!1;var u=c.invm(this.n),p=u.mul(e).umod(this.n),y=u.mul(n).umod(this.n),g;return this.curve._maxwellTrick?(g=this.g.jmulAdd(p,i.getPublic(),y),g.isInfinity()?!1:g.eqXToP(n)):(g=this.g.mulAdd(p,i.getPublic(),y),g.isInfinity()?!1:g.getX().umod(this.n).cmp(n)===0)};Ve.prototype.recoverPubKey=function(r,e,t,i){Us((3&t)===t,"The recovery param is more than two bits"),e=new Lr(e,i);var s=this.n,n=new Pt(r),c=e.r,u=e.s,p=t&1,y=t>>1;if(c.cmp(this.curve.p.umod(this.curve.n))>=0&&y)throw new Error("Unable to find sencond key candinate");y?c=this.curve.pointFromX(c.add(this.curve.n),p):c=this.curve.pointFromX(c,p);var g=e.r.invm(s),x=s.sub(n).mul(g).umod(s),_=u.mul(g).umod(s);return this.g.mulAdd(x,c,_)};Ve.prototype.getKeyRecoveryParam=function(r,e,t,i){if(e=new Lr(e,i),e.recoveryParam!==null)return e.recoveryParam;for(var s=0;s<4;s++){var n;try{n=this.recoverPubKey(r,e,s)}catch{continue}if(n.eq(t))return s}throw new Error("Unable to find valid recovery factor")};var sr=Fe,Fs=sr.assert,Un=sr.parseBytes,Wt=sr.cachedProperty;function Be(r,e){this.eddsa=r,this._secret=Un(e.secret),r.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=Un(e.pub)}Be.fromPublic=function(e,t){return t instanceof Be?t:new Be(e,{pub:t})};Be.fromSecret=function(e,t){return t instanceof Be?t:new Be(e,{secret:t})};Be.prototype.secret=function(){return this._secret};Wt(Be,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});Wt(Be,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});Wt(Be,"privBytes",function(){var e=this.eddsa,t=this.hash(),i=e.encodingLength-1,s=t.slice(0,e.encodingLength);return s[0]&=248,s[i]&=127,s[i]|=64,s});Wt(Be,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});Wt(Be,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});Wt(Be,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Be.prototype.sign=function(e){return Fs(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};Be.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)};Be.prototype.getSecret=function(e){return Fs(this._secret,"KeyPair is public only"),sr.encode(this.secret(),e)};Be.prototype.getPublic=function(e){return sr.encode(this.pubBytes(),e)};var Pc=Be,kc=pt,qr=Fe,Rc=qr.assert,$r=qr.cachedProperty,Bc=qr.parseBytes;function Nt(r,e){this.eddsa=r,typeof e!="object"&&(e=Bc(e)),Array.isArray(e)&&(e={R:e.slice(0,r.encodingLength),S:e.slice(r.encodingLength)}),Rc(e.R&&e.S,"Signature without R or S"),r.isPoint(e.R)&&(this._R=e.R),e.S instanceof kc&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}$r(Nt,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});$r(Nt,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});$r(Nt,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});$r(Nt,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});Nt.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};Nt.prototype.toHex=function(){return qr.encode(this.toBytes(),"hex").toUpperCase()};var Nc=Nt,Oc=Or,Tc=Nr,zt=Fe,Cc=zt.assert,Hs=zt.parseBytes,Js=Pc,Fn=Nc;function Ue(r){if(Cc(r==="ed25519","only tested with ed25519 so far"),!(this instanceof Ue))return new Ue(r);r=Tc[r].curve,this.curve=r,this.g=r.g,this.g.precompute(r.n.bitLength()+1),this.pointClass=r.point().constructor,this.encodingLength=Math.ceil(r.n.bitLength()/8),this.hash=Oc.sha512}var Lc=Ue;Ue.prototype.sign=function(e,t){e=Hs(e);var i=this.keyFromSecret(t),s=this.hashInt(i.messagePrefix(),e),n=this.g.mul(s),c=this.encodePoint(n),u=this.hashInt(c,i.pubBytes(),e).mul(i.priv()),p=s.add(u).umod(this.curve.n);return this.makeSignature({R:n,S:p,Rencoded:c})};Ue.prototype.verify=function(e,t,i){e=Hs(e),t=this.makeSignature(t);var s=this.keyFromPublic(i),n=this.hashInt(t.Rencoded(),s.pubBytes(),e),c=this.g.mul(t.S()),u=t.R().add(s.pub().mul(n));return u.eq(c)};Ue.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return zt.intFromLE(e.digest()).umod(this.curve.n)};Ue.prototype.keyFromPublic=function(e){return Js.fromPublic(this,e)};Ue.prototype.keyFromSecret=function(e){return Js.fromSecret(this,e)};Ue.prototype.makeSignature=function(e){return e instanceof Fn?e:new Fn(this,e)};Ue.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t};Ue.prototype.decodePoint=function(e){e=zt.parseBytes(e);var t=e.length-1,i=e.slice(0,t).concat(e[t]&-129),s=(e[t]&128)!==0,n=zt.intFromLE(i);return this.curve.pointFromY(n,s)};Ue.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};Ue.prototype.decodeInt=function(e){return zt.intFromLE(e)};Ue.prototype.isPoint=function(e){return e instanceof this.pointClass};(function(r){var e=r;e.version=Of.version,e.utils=Fe,e.rand=ws,e.curve=Wi,e.curves=Nr,e.ec=Ic,e.eddsa=Lc})(Pr);const Dt=new Pr.ec("secp256k1"),_r=globalThis.crypto||globalThis.msCrypto||{},xt=_r.subtle||_r.webkitSubtle,qc=Buffer.from("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141","hex"),$c=Buffer.alloc(32,0);function ke(r,e){if(!r)throw new Error(e||"Assertion failed")}function zc(r){return Buffer.isBuffer(r)&&r.length===32}function jt(r){return zc(r)?r.compare($c)>0&&r.compare(qc)<0:!1}function Dc(r,e){if(r.length!==e.length)return!1;let t=0;for(let i=0;i<r.length;i++)t|=r[i]^e[i];return t===0}function rr(r){const e=new Uint8Array(r);return typeof _r.getRandomValues>"u"?Buffer.from(ir.randomBytes(r)):(_r.getRandomValues(e),Buffer.from(e))}async function Vs(r){if(xt){const i=await xt.digest("SHA-512",r);return new Uint8Array(i)}const t=ir.createHash("sha512").update(r).digest();return new Uint8Array(t)}function Ws(r){return async function(e,t,i){if(xt){const s={name:"AES-CBC"},n=await xt.importKey("raw",t,s,!1,[r]),c={name:"AES-CBC",iv:e},u=await xt[r](c,n,i);return Buffer.from(new Uint8Array(u))}else if(r==="encrypt"){const s=ir.createCipheriv("aes-256-cbc",t,e),n=s.update(i),c=s.final();return Buffer.concat([n,c])}else if(r==="decrypt"){const s=ir.createDecipheriv("aes-256-cbc",t,e),n=s.update(i),c=s.final();return Buffer.concat([n,c])}throw new Error(`Unsupported operation: ${r}`)}}const Kc=Ws("encrypt"),Uc=Ws("decrypt");async function js(r,e){if(xt){const s={name:"HMAC",hash:{name:"SHA-256"}},n=await xt.importKey("raw",new Uint8Array(r),s,!1,["sign","verify"]),c=await xt.sign("HMAC",n,e);return Buffer.from(new Uint8Array(c))}const t=ir.createHmac("sha256",Buffer.from(r));return t.update(e),t.digest()}async function Fc(r,e,t){const i=await js(r,e);return Dc(i,t)}const Hc=function(){let r=rr(32);for(;!jt(r);)r=rr(32);return r},ht=function(r){return ke(r.length===32,"Bad private key"),ke(jt(r),"Bad private key"),Buffer.from(Dt.keyFromPrivate(r).getPublic("array"))},yr=async function(r,e){return ke(r.length===32,"Bad private key"),ke(jt(r),"Bad private key"),ke(e.length>0,"Message should not be empty"),ke(e.length<=32,"Message is too long"),Buffer.from(Dt.sign(e,r,{canonical:!0}).toDER())},Jc=async function(r,e){ke(Buffer.isBuffer(r),"Bad private key"),ke(Buffer.isBuffer(e),"Bad public key"),ke(r.length===32,"Bad private key"),ke(jt(r),"Bad private key"),ke(e.length===65||e.length===33,"Bad public key"),e.length===65&&ke(e[0]===4,"Bad public key"),e.length===33&&ke(e[0]===2||e[0]===3,"Bad public key");const t=Dt.keyFromPrivate(r),i=Dt.keyFromPublic(e),s=t.derive(i.getPublic());return Buffer.from(s.toArray())},Gs=Jc,Vc=async function(r,e){ke(Buffer.isBuffer(r),"Bad private key"),ke(Buffer.isBuffer(e),"Bad public key"),ke(r.length===32,"Bad private key"),ke(jt(r),"Bad private key"),ke(e.length===65||e.length===33,"Bad public key"),e.length===65&&ke(e[0]===4,"Bad public key"),e.length===33&&ke(e[0]===2||e[0]===3,"Bad public key");const t=Dt.keyFromPrivate(r),i=Dt.keyFromPublic(e),s=t.derive(i.getPublic());return Buffer.from(s.toString(16,64),"hex")},Ys=async function(r,e,t){t=t||{};let i=t.ephemPrivateKey||rr(32);for(;!jt(i);)i=t.ephemPrivateKey||rr(32);const s=ht(i),n=await Gs(i,r),c=await Vs(n),u=t.iv||rr(16),p=c.slice(0,32),y=c.slice(32),x=await Kc(u,Buffer.from(p),e),_=Buffer.concat([u,s,x]),S=await js(Buffer.from(y),_);return{iv:u,ephemPublicKey:s,ciphertext:x,mac:S}},Xi=async function(r,e,t){const i=t??!1,n=await(i?Vc:Gs)(r,e.ephemPublicKey),c=await Vs(n),u=c.slice(0,32),p=c.slice(32),y=Buffer.concat([e.iv,e.ephemPublicKey,e.ciphertext]),g=await Fc(Buffer.from(p),y,e.mac);if(!g&&i===!1)return Xi(r,e,!0);if(!g&&i===!0)throw new Error("bad MAC after trying padded");const x=await Uc(e.iv,Buffer.from(u),e.ciphertext);return Buffer.from(new Uint8Array(x))},Wc=Qn.getLogger("http-helpers");Wc.setLevel(es.levels.INFO);var br={},yi,Hn;function jc(){if(Hn)return yi;Hn=1;var r,e,t={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},i;function s(S){throw{name:"SyntaxError",message:S,at:r,text:i}}function n(S){return S&&S!==e&&s("Expected '"+S+"' instead of '"+e+"'"),e=i.charAt(r),r+=1,e}function c(){var S,A="";for(e==="-"&&(A="-",n("-"));e>="0"&&e<="9";)A+=e,n();if(e===".")for(A+=".";n()&&e>="0"&&e<="9";)A+=e;if(e==="e"||e==="E")for(A+=e,n(),(e==="-"||e==="+")&&(A+=e,n());e>="0"&&e<="9";)A+=e,n();return S=Number(A),isFinite(S)||s("Bad number"),S}function u(){var S,A,E="",N;if(e==='"')for(;n();){if(e==='"')return n(),E;if(e==="\\")if(n(),e==="u"){for(N=0,A=0;A<4&&(S=parseInt(n(),16),!!isFinite(S));A+=1)N=N*16+S;E+=String.fromCharCode(N)}else if(typeof t[e]=="string")E+=t[e];else break;else E+=e}s("Bad string")}function p(){for(;e&&e<=" ";)n()}function y(){switch(e){case"t":return n("t"),n("r"),n("u"),n("e"),!0;case"f":return n("f"),n("a"),n("l"),n("s"),n("e"),!1;case"n":return n("n"),n("u"),n("l"),n("l"),null;default:s("Unexpected '"+e+"'")}}function g(){var S=[];if(e==="["){if(n("["),p(),e==="]")return n("]"),S;for(;e;){if(S.push(_()),p(),e==="]")return n("]"),S;n(","),p()}}s("Bad array")}function x(){var S,A={};if(e==="{"){if(n("{"),p(),e==="}")return n("}"),A;for(;e;){if(S=u(),p(),n(":"),Object.prototype.hasOwnProperty.call(A,S)&&s('Duplicate key "'+S+'"'),A[S]=_(),p(),e==="}")return n("}"),A;n(","),p()}}s("Bad object")}function _(){switch(p(),e){case"{":return x();case"[":return g();case'"':return u();case"-":return c();default:return e>="0"&&e<="9"?c():y()}}return yi=function(S,A){var E;return i=S,r=0,e=" ",E=_(),p(),e&&s("Syntax error"),typeof A=="function"?function N(B,O){var L,H,K=B[O];if(K&&typeof K=="object")for(L in _)Object.prototype.hasOwnProperty.call(K,L)&&(H=N(K,L),typeof H>"u"?delete K[L]:K[L]=H);return A.call(B,O,K)}({"":E},""):E},yi}var wi,Jn;function Gc(){if(Jn)return wi;Jn=1;var r=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,t,i={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},s;function n(u){return r.lastIndex=0,r.test(u)?'"'+u.replace(r,function(p){var y=i[p];return typeof y=="string"?y:"\\u"+("0000"+p.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+u+'"'}function c(u,p){var y,g,x,_,S=e,A,E=p[u];switch(E&&typeof E=="object"&&typeof E.toJSON=="function"&&(E=E.toJSON(u)),typeof s=="function"&&(E=s.call(p,u,E)),typeof E){case"string":return n(E);case"number":return isFinite(E)?String(E):"null";case"boolean":case"null":return String(E);case"object":if(!E)return"null";if(e+=t,A=[],Object.prototype.toString.apply(E)==="[object Array]"){for(_=E.length,y=0;y<_;y+=1)A[y]=c(y,E)||"null";return x=A.length===0?"[]":e?`[
`+e+A.join(`,
`+e)+`
`+S+"]":"["+A.join(",")+"]",e=S,x}if(s&&typeof s=="object")for(_=s.length,y=0;y<_;y+=1)g=s[y],typeof g=="string"&&(x=c(g,E),x&&A.push(n(g)+(e?": ":":")+x));else for(g in E)Object.prototype.hasOwnProperty.call(E,g)&&(x=c(g,E),x&&A.push(n(g)+(e?": ":":")+x));return x=A.length===0?"{}":e?`{
`+e+A.join(`,
`+e)+`
`+S+"}":"{"+A.join(",")+"}",e=S,x}}return wi=function(u,p,y){var g;if(e="",t="",typeof y=="number")for(g=0;g<y;g+=1)t+=" ";else typeof y=="string"&&(t=y);if(s=p,p&&typeof p!="function"&&(typeof p!="object"||typeof p.length!="number"))throw new Error("JSON.stringify");return c("",{"":u})},wi}var Vn;function Yc(){return Vn||(Vn=1,br.parse=jc(),br.stringify=Gc()),br}typeof JSON<"u"||Yc();function Ci(r){return Buffer.from(ts(r))}const Xc=new Pr.ec("secp256k1");function Zc(r){return{iv:Buffer.from(r.iv,"hex"),ephemPublicKey:Buffer.from(r.ephemPublicKey,"hex"),ciphertext:Buffer.from(r.ciphertext,"hex"),mac:Buffer.from(r.mac,"hex")}}function Qc(r){return{iv:Buffer.from(r.iv).toString("hex"),ephemPublicKey:Buffer.from(r.ephemPublicKey).toString("hex"),ciphertext:Buffer.from(r.ciphertext).toString("hex"),mac:Buffer.from(r.mac).toString("hex")}}async function ed(r,e){const t=JSON.stringify(e),i=Buffer.from(t,"utf-8"),s=await Ys(ht(Buffer.from(r,"hex")),i),n=Qc(s);return JSON.stringify(n)}async function td(r,e){const t=JSON.parse(e),i=Zc(t),s=Xc.keyFromPrivate(r),c=(await Xi(Buffer.from(s.getPrivate().toString("hex",64),"hex"),i)).toString("utf-8");return JSON.parse(c)}class rd{constructor(){F(this,"sessionId",void 0)}checkSessionParams(){if(!this.sessionId)throw new Error("Session id is required");this.sessionId=this.sessionId.padStart(64,"0")}request(e){let{method:t="GET",url:i,data:s={},headers:n={}}=e;const c={headers:n};switch(t){case"GET":return ha(i,c);case"POST":return da(i,s,c);case"PUT":return ca(i,s,c);case"PATCH":return oa(i,s,c)}throw new Error("Invalid method type")}}function xi(r){return Buffer.from(ts(r))}const id=new Pr.ec("secp256k1");function nd(r){return{iv:Buffer.from(r.iv,"hex"),ephemPublicKey:Buffer.from(r.ephemPublicKey,"hex"),ciphertext:Buffer.from(r.ciphertext,"hex"),mac:Buffer.from(r.mac,"hex")}}function sd(r){return{iv:Buffer.from(r.iv).toString("hex"),ephemPublicKey:Buffer.from(r.ephemPublicKey).toString("hex"),ciphertext:Buffer.from(r.ciphertext).toString("hex"),mac:Buffer.from(r.mac).toString("hex")}}async function Mi(r,e){const t=JSON.stringify(e),i=Buffer.from(t,"utf-8"),s=await Ys(ht(Buffer.from(r,"hex")),i),n=sd(s);return JSON.stringify(n)}async function ad(r,e){const t=JSON.parse(e),i=nd(t),s=id.keyFromPrivate(r),c=(await Xi(Buffer.from(s.getPrivate().toString("hex",64),"hex"),i)).toString("utf-8");return JSON.parse(c)}const fd=86400;class Si extends rd{constructor(){let{sessionServerBaseUrl:e,sessionNamespace:t,sessionTime:i,sessionId:s}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),F(this,"sessionServerBaseUrl","https://broadcast-server.tor.us"),F(this,"sessionNamespace",void 0),F(this,"sessionTime",fd),F(this,"sessionId",""),e&&(this.sessionServerBaseUrl=e),t&&(this.sessionNamespace=t),i&&(this.sessionTime=i),s&&(this.sessionId=s.padStart(64,"0"))}static generateRandomSessionKey(){return Hc().toString("hex").padStart(64,"0")}async createSession(e){super.checkSessionParams();const t=Buffer.from(this.sessionId,"hex"),i=ht(t).toString("hex"),s=await Mi(this.sessionId,e),n=(await yr(t,xi(Buffer.from(s,"utf8")))).toString("hex"),c={key:i,data:s,signature:n,namespace:this.sessionNamespace,timeout:this.sessionTime};return await super.request({method:"POST",url:`${this.sessionServerBaseUrl}/store/set`,data:c}),this.sessionId}async authorizeSession(){super.checkSessionParams();const e=ht(Buffer.from(this.sessionId,"hex")).toString("hex"),t=new URL(`${this.sessionServerBaseUrl}/store/get`);t.searchParams.append("key",e),this.sessionNamespace&&t.searchParams.append("namespace",this.sessionNamespace);const i=await super.request({url:t.toString()});if(!i.message)throw new Error("Session Expired or Invalid public key");const s=await ad(this.sessionId,i.message);if(s.error)throw new Error("There was an error decrypting data.");return s}async updateSession(e){super.checkSessionParams();const t=Buffer.from(this.sessionId,"hex"),i=ht(t).toString("hex"),s=await Mi(this.sessionId,e),n=(await yr(t,xi(Buffer.from(s,"utf8")))).toString("hex"),c={key:i,data:s,signature:n,namespace:this.sessionNamespace};await super.request({method:"PUT",url:`${this.sessionServerBaseUrl}/store/update`,data:c})}async invalidateSession(){super.checkSessionParams();const e=Buffer.from(this.sessionId,"hex"),t=ht(e).toString("hex"),i=await Mi(this.sessionId,{}),s=(await yr(e,xi(Buffer.from(i,"utf8")))).toString("hex"),n={key:t,data:i,signature:s,namespace:this.sessionNamespace,timeout:1};return await super.request({method:"POST",url:`${this.sessionServerBaseUrl}/store/set`,data:n}),this.sessionId="",!0}}function od(r){return!!(r&&typeof r.then=="function")}Promise.resolve(!1);Promise.resolve(!0);var kt=Promise.resolve();function Zi(r,e){return r||(r=0),new Promise(function(t){return setTimeout(function(){return t(e)},r)})}function cd(r,e){return Math.floor(Math.random()*(e-r+1)+r)}function ar(){return Math.random().toString(36).substring(2)}var Wn=0,_i=0;function fr(){var r=new Date().getTime();return r===Wn?(_i++,r*1e3+_i):(Wn=r,_i=0,r*1e3)}function dd(){if(typeof navigator>"u")return!1;var r=Ct.parse(navigator.userAgent);Je.info(JSON.stringify(r),"current browser info");var e=!0;return navigator.brave&&(e=!1),(r.engine.name===Ct.ENGINE_MAP.WebKit||r.engine.name===Ct.ENGINE_MAP.Gecko)&&(e=!1),e}var Je=Qn.getLogger("broadcast-channel");Je.setLevel("error");var hd=fr,ud="native";function ld(r){var e={messagesCallback:null,bc:new BroadcastChannel(r),subFns:[]};return e.bc.onmessage=function(t){e.messagesCallback&&e.messagesCallback(t.data)},e}function bd(r){r.bc.close(),r.subFns=[]}function pd(r,e){try{return r.bc.postMessage(e,!1),kt}catch(t){return Promise.reject(t)}}function vd(r,e){r.messagesCallback=e}function md(r){if(typeof window>"u"||!r.support3PC)return!1;if(typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function gd(){return 150}const yd={create:ld,close:bd,onMessage:vd,postMessage:pd,canBeUsed:md,type:ud,averageResponseTime:gd,microSeconds:hd};function zr(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=JSON.parse(JSON.stringify(r));return typeof e.support3PC>"u"&&(e.support3PC=dd()),typeof e.webWorkerSupport>"u"&&(e.webWorkerSupport=!0),e.idb||(e.idb={}),e.idb.ttl||(e.idb.ttl=1e3*45),e.idb.fallbackInterval||(e.idb.fallbackInterval=150),r.idb&&typeof r.idb.onclose=="function"&&(e.idb.onclose=r.idb.onclose),e.localstorage||(e.localstorage={}),e.localstorage.removeTimeout||(e.localstorage.removeTimeout=1e3*60),e.server||(e.server={}),e.server.url||(e.server.url="https://broadcast-server.tor.us"),e.server.removeTimeout||(e.server.removeTimeout=1e3*60*5),r.methods&&(e.methods=r.methods),e}var wd=fr,xd="pubkey.broadcast-channel-0-",bt="messages",Dr={durability:"relaxed"},Md="idb";function Xs(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function Qi(r){r.commit&&r.commit()}function Sd(r){var e=Xs(),t=xd+r,i=e.open(t);i.onupgradeneeded=function(n){var c=n.target.result;c.createObjectStore(bt,{keyPath:"id",autoIncrement:!0})};var s=new Promise(function(n,c){i.onerror=function(u){return c(u)},i.onsuccess=function(){n(i.result)}});return s}function _d(r,e,t){var i=new Date().getTime(),s={uuid:e,time:i,data:t},n=r.transaction([bt],"readwrite",Dr);return new Promise(function(c,u){n.oncomplete=function(){return c()},n.onerror=function(y){return u(y)};var p=n.objectStore(bt);p.add(s),Qi(n)})}function Ad(r,e){var t=r.transaction(bt,"readonly",Dr),i=t.objectStore(bt),s=[],n=IDBKeyRange.bound(e+1,1/0);if(i.getAll){var c=i.getAll(n);return new Promise(function(p,y){c.onerror=function(g){return y(g)},c.onsuccess=function(g){p(g.target.result)}})}function u(){try{return n=IDBKeyRange.bound(e+1,1/0),i.openCursor(n)}catch{return i.openCursor()}}return new Promise(function(p,y){var g=u();g.onerror=function(x){return y(x)},g.onsuccess=function(x){var _=x.target.result;_?_.value.id<e+1?_.continue(e+1):(s.push(_.value),_.continue()):(Qi(t),p(s))}})}function Ed(r,e){var t=r.transaction([bt],"readwrite",Dr),i=t.objectStore(bt);return Promise.all(e.map(function(s){var n=i.delete(s);return new Promise(function(c){n.onsuccess=function(){return c()}})}))}function Id(r,e){var t=new Date().getTime()-e,i=r.transaction(bt,"readonly",Dr),s=i.objectStore(bt),n=[];return new Promise(function(c){s.openCursor().onsuccess=function(u){var p=u.target.result;if(p){var y=p.value;if(y.time<t)n.push(y),p.continue();else{Qi(i),c(n);return}}else c(n)}})}function Pd(r,e){return Id(r,e).then(function(t){return Ed(r,t.map(function(i){return i.id}))})}function kd(r,e){return e=zr(e),Sd(r).then(function(t){var i={closed:!1,lastCursorId:0,channelName:r,options:e,uuid:ar(),eMIs:new qi(e.idb.ttl*2),writeBlockPromise:kt,messagesCallback:null,readQueuePromises:[],db:t};return t.onclose=function(){i.closed=!0,e.idb.onclose&&e.idb.onclose()},Zs(i),i})}function Zs(r){r.closed||Qs(r).then(function(){return Zi(r.options.idb.fallbackInterval)}).then(function(){return Zs(r)})}function Rd(r,e){return!(r.uuid===e.uuid||e.eMIs.has(r.id)||r.data.time<e.messagesCallbackTime)}function Qs(r){return r.closed||!r.messagesCallback?kt:Ad(r.db,r.lastCursorId).then(function(e){var t=e.filter(function(i){return!!i}).map(function(i){return i.id>r.lastCursorId&&(r.lastCursorId=i.id),i}).filter(function(i){return Rd(i,r)}).sort(function(i,s){return i.time-s.time});return t.forEach(function(i){r.messagesCallback&&(r.eMIs.add(i.id),r.messagesCallback(i.data))}),kt})}function Bd(r){r.closed=!0,r.db.close()}function Nd(r,e){return r.writeBlockPromise=r.writeBlockPromise.then(function(){return _d(r.db,r.uuid,e)}).then(function(){cd(0,10)===0&&Pd(r.db,r.options.idb.ttl)}),r.writeBlockPromise}function Od(r,e,t){r.messagesCallbackTime=t,r.messagesCallback=e,Qs(r)}function Td(r){if(!r.support3PC)return!1;var e=Xs();return!!e}function Cd(r){return r.idb.fallbackInterval*2}const Ld={create:kd,close:Bd,onMessage:Od,postMessage:Nd,canBeUsed:Td,type:Md,averageResponseTime:Cd,microSeconds:wd};var qd=fr,$d="pubkey.broadcastChannel-",zd="localstorage";function ea(){var r;if(typeof window>"u")return null;try{r=window.localStorage,r=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return r}function ta(r){return $d+r}function Dd(r,e){return new Promise(function(t){Zi().then(function(){var i=ta(r.channelName),s={token:ar(),time:new Date().getTime(),data:e,uuid:r.uuid},n=JSON.stringify(s);ea().setItem(i,n);var c=document.createEvent("Event");c.initEvent("storage",!0,!0),c.key=i,c.newValue=n,window.dispatchEvent(c),t()})})}function Kd(r,e){var t=ta(r),i=function(n){n.key===t&&e(JSON.parse(n.newValue))};return window.addEventListener("storage",i),i}function Ud(r){window.removeEventListener("storage",r)}function Fd(r,e){if(e=zr(e),!ra(e))throw new Error("BroadcastChannel: localstorage cannot be used");var t=ar(),i=new qi(e.localstorage.removeTimeout),s={channelName:r,uuid:t,eMIs:i};return s.listener=Kd(r,function(n){s.messagesCallback&&n.uuid!==t&&(!n.token||i.has(n.token)||n.data.time&&n.data.time<s.messagesCallbackTime||(i.add(n.token),s.messagesCallback(n.data)))}),s}function Hd(r){Ud(r.listener)}function Jd(r,e,t){r.messagesCallbackTime=t,r.messagesCallback=e}function ra(r){if(!r.support3PC)return!1;var e=ea();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch{return!1}return!0}function Vd(){var r=120,e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?r*2:r}const Wd={create:Fd,close:Hd,onMessage:Jd,postMessage:Dd,canBeUsed:ra,type:zd,averageResponseTime:Vd,microSeconds:qd};var jd=fr,Gd="pubkey.broadcastChannel-",Yd="server",Ai=null,en=new Set;function ia(r){return Gd+r}function Xd(r,e){return new Promise(function(t,i){Zi().then(wr(gt.mark(function s(){var n,c,u,p;return gt.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return n=ia(r.channelName),c=Ci(Buffer.from(n,"utf8")),g.next=4,ed(c.toString("hex"),{token:ar(),time:new Date().getTime(),data:e,uuid:r.uuid});case 4:return u=g.sent,g.t0=ht(c).toString("hex"),g.t1=u,g.next=9,yr(c,Ci(Buffer.from(u,"utf8")));case 9:return g.t2=g.sent.toString("hex"),p={key:g.t0,data:g.t1,signature:g.t2},r.timeout&&(p.timeout=r.timeout),g.abrupt("return",fetch(r.serverUrl+"/channel/set",{method:"POST",body:JSON.stringify(p),headers:{"Content-Type":"application/json; charset=utf-8"}}).then(t).catch(i));case 13:case"end":return g.stop()}},s)})))})}function Zd(r){if(Ai)return Ai;var e=gr(r,{transports:["websocket","polling"],withCredentials:!0,reconnectionDelayMax:1e4,reconnectionAttempts:10});return e.on("connect_error",function(t){e.io.opts.transports=["polling","websocket"],Je.error("connect error",t)}),e.on("connect",wr(gt.mark(function t(){var i;return gt.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=e.io.engine,Je.debug("initially connected to",i.transport.name),i.once("upgrade",function(){Je.debug("upgraded",i.transport.name)}),i.once("close",function(c){Je.debug("connection closed",c)});case 4:case"end":return n.stop()}},t)}))),e.on("error",function(t){Je.error("socket errored",t),e.disconnect()}),Ai=e,e}function Qd(r,e,t){var i=Zd(r),s=ia(e),n=Ci(Buffer.from(s,"utf8")),c=ht(n).toString("hex");i.connected?i.emit("check_auth_status",c):i.once("connect",function(){Je.debug("connected with socket"),i.emit("check_auth_status",c)});var u=function(){i.once("connect",wr(gt.mark(function x(){return gt.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:i.emit("check_auth_status",c);case 1:case"end":return S.stop()}},x)})))},p=function g(){if(!i){document.removeEventListener("visibilitychange",g);return}!i.connected&&document.visibilityState==="visible"&&u()},y=function(){var g=wr(gt.mark(function x(_){var S;return gt.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.prev=0,E.next=3,td(n.toString("hex"),_);case 3:S=E.sent,Je.info(S),t(S),E.next=11;break;case 8:E.prev=8,E.t0=E.catch(0),Je.error(E.t0);case 11:case"end":return E.stop()}},x,null,[[0,8]])}));return function(_){return g.apply(this,arguments)}}();return i.on("disconnect",function(){Je.debug("socket disconnected"),en.has(e)&&(Je.error("socket disconnected unexpectedly, reconnecting socket"),u())}),i.on(c+"_success",y),typeof document<"u"&&document.addEventListener("visibilitychange",p),i}function eh(r,e){e=zr(e);var t=ar(),i=new qi(e.server.removeTimeout),s={channelName:r,uuid:t,eMIs:i,serverUrl:e.server.url};return e.server.timeout&&(s.timeout=e.server.timeout),Qd(e.server.url,r,function(n){s.messagesCallback&&n.uuid!==s.uuid&&(!n.token||s.eMIs.has(n.token)||(s.eMIs.add(n.token),s.messagesCallback(n.data)))}),en.add(r),s}function th(r){en.delete(r.channelName)}function rh(r,e,t){r.messagesCallbackTime=t,r.messagesCallback=e}function ih(){return!0}function nh(){var r=500;return r}const sh={create:eh,close:th,onMessage:rh,postMessage:Xd,canBeUsed:ih,type:Yd,averageResponseTime:nh,microSeconds:jd};var ah=fr,fh="simulate",tn=new Set;function oh(r){var e={name:r,messagesCallback:null};return tn.add(e),e}function ch(r){tn.delete(r)}function dh(r,e){return new Promise(function(t){return setTimeout(function(){var i=Array.from(tn);i.filter(function(s){return s.name===r.name}).filter(function(s){return s!==r}).filter(function(s){return!!s.messagesCallback}).forEach(function(s){return s.messagesCallback(e)}),t()},5)})}function hh(r,e){r.messagesCallback=e}function uh(){return!0}function lh(){return 5}const bh={create:oh,close:ch,onMessage:hh,postMessage:dh,canBeUsed:uh,type:fh,averageResponseTime:lh,microSeconds:ah};var jn=[yd,Ld,Wd,sh];function ph(r){var e=[].concat(r.methods,jn).filter(Boolean);if(r.type){if(r.type==="simulate")return bh;var t=e.find(function(s){return s.type===r.type});if(t)return t;throw new Error("method-type "+r.type+" not found")}r.webWorkerSupport||(e=e.filter(function(s){return s.type!=="idb"}));var i=e.find(function(s){return s.canBeUsed(r)});if(i)return i;throw new Error("No useable method found in "+JSON.stringify(jn.map(function(s){return s.type})))}var na=new Set,vh=0,rn=function(e,t){this.id=vh++,na.add(this),this.name=e,Gn&&(t=Gn),this.options=zr(t),this.method=ph(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,mh(this)};rn._pubkey=!0;var Gn;rn.prototype={postMessage:function(e){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(e));return Yn(this,"message",e)},postInternal:function(e){return Yn(this,"internal",e)},set onmessage(r){var e=this.method.microSeconds(),t={time:e,fn:r};Zn(this,"message",this._onML),r&&typeof r=="function"?(this._onML=t,Xn(this,"message",t)):this._onML=null},addEventListener:function(e,t){var i=this.method.microSeconds(),s={time:i,fn:t};Xn(this,e,s)},removeEventListener:function(e,t){var i=this._addEL[e].find(function(s){return s.fn===t});Zn(this,e,i)},close:function(){var e=this;if(!this.closed){na.delete(this),this.closed=!0;var t=this._prepP?this._prepP:kt;return this._onML=null,this._addEL.message=[],t.then(function(){return Promise.all(Array.from(e._uMP))}).then(function(){return Promise.all(e._befC.map(function(i){return i()}))}).then(function(){return e.method.close(e._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function Yn(r,e,t){var i=r.method.microSeconds(),s={time:i,type:e,data:t},n=r._prepP?r._prepP:kt;return n.then(function(){var c=r.method.postMessage(r._state,s);return r._uMP.add(c),c.catch().then(function(){return r._uMP.delete(c)}),c})}function mh(r){var e=r.method.create(r.name,r.options);od(e)?(r._prepP=e,e.then(function(t){r._state=t})):r._state=e}function sa(r){return r._addEL.message.length>0||r._addEL.internal.length>0}function Xn(r,e,t){r._addEL[e].push(t),gh(r)}function Zn(r,e,t){r._addEL[e]=r._addEL[e].filter(function(i){return i!==t}),yh(r)}function gh(r){if(!r._iL&&sa(r)){var e=function(s){r._addEL[s.type].forEach(function(n){var c=1e5,u=n.time-c;(s.time>=u||r.method.type==="server")&&n.fn(s.data)})},t=r.method.microSeconds();r._prepP?r._prepP.then(function(){r._iL=!0,r.method.onMessage(r._state,e,t)}):(r._iL=!0,r.method.onMessage(r._state,e,t))}}function yh(r){if(r._iL&&!sa(r)){r._iL=!1;var e=r.method.microSeconds();r.method.onMessage(r._state,null,e)}}class aa extends ba{constructor(e,t){super(t),F(this,"code",void 0),F(this,"message",void 0),this.code=e,this.message=t||"",Object.defineProperty(this,"name",{value:"OpenloginError"})}toJSON(){return{name:this.name,code:this.code,message:this.message}}toString(){return JSON.stringify(this.toJSON())}}class wt extends aa{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{value:"InitializationError"})}static fromCode(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new wt(e,`${wt.messages[e]}, ${t}`)}static invalidParams(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return wt.fromCode(5001,e)}static notInitialized(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return wt.fromCode(5002,e)}}F(wt,"messages",{5e3:"Custom",5001:"Invalid constructor params",5002:"SDK not initialized. please call init first"});class ze extends aa{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{value:"LoginError"})}static fromCode(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new ze(e,`${ze.messages[e]}, ${t}`)}static invalidLoginParams(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return ze.fromCode(5111,e)}static userNotLoggedIn(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return ze.fromCode(5112,e)}static popupClosed(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return ze.fromCode(5113,e)}static loginFailed(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return ze.fromCode(5114,e)}}F(ze,"messages",{5e3:"Custom",5111:"Invalid login params",5112:"User not logged in.",5113:"login popup has been closed by the user",5114:"Login failed"});const Ar=es.getLogger("openlogin");Ar.setLevel("error");const wh="5.3.0";function xh(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const e={},t=new URL(window.location.href);t.searchParams.forEach((u,p)=>{p!=="result"&&(e[p]=u)});const i=t.searchParams.get("result");if(i)try{const u=JSON.parse(fi(i));Object.keys(u).forEach(p=>{e[p]=u[p]})}catch(u){Ar.error(u)}const s=t.hash.substring(1),n=new URL(`${window.location.origin}/?${s}`);n.searchParams.forEach((u,p)=>{p!=="result"&&(e[p]=u)});const c=n.searchParams.get("result");if(c)try{const u=JSON.parse(fi(c));Object.keys(u).forEach(p=>{e[p]=u[p]})}catch(u){Ar.error(u)}if(r){const u=new URL(window.location.origin+window.location.pathname);if(u.search=window.location.search,c){const p=JSON.parse(fi(c));delete p.sessionId,delete p.sessionNamespace,delete p.error,u.hash=pa(JSON.stringify(p))}window.history.replaceState(V(V({},window.history.state),{},{as:u.href,url:u.href}),"",u.href)}return e}function Li(r){const{baseURL:e,query:t,hash:i}=r,s=new URL(e);if(t&&Object.keys(t).forEach(n=>{s.searchParams.append(n,t[n])}),i){const n=new URL(Li({baseURL:e,query:i})).searchParams.toString();s.hash=n}return s.toString()}function Mh(){if(typeof window>"u")return"";const r=window.screenLeft!==void 0?window.screenLeft:window.screenX,e=window.screenTop!==void 0?window.screenTop:window.screenY,t=1200,i=700,s=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,n=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,c=1,u=Math.abs((s-t)/2/c+r),p=Math.abs((n-i)/2/c+e);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${i/c},width=${t/c},top=${p},left=${u}`}function Sh(){if(typeof window>"u")return!1;const e=Ct.getParser(window.navigator.userAgent).getPlatform();return e.type===Ct.PLATFORMS_MAP.tablet||e.type===Ct.PLATFORMS_MAP.mobile}function _h(r){return(r===Mn.FACEBOOK||r===Mn.LINE)&&Sh()?1e3*60*5:1e3*10}class Ah extends va.EventEmitter{constructor(e){let{url:t,target:i,features:s,timeout:n=3e4}=e;super(),F(this,"url",void 0),F(this,"target",void 0),F(this,"features",void 0),F(this,"window",void 0),F(this,"windowTimer",void 0),F(this,"iClosedWindow",void 0),F(this,"timeout",void 0),this.url=t,this.target=i||"_blank",this.features=s||Mh(),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this.timeout=n,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),setTimeout(()=>{this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0},this.timeout)),this.window===void 0&&clearInterval(this.windowTimer)},500))}open(){var e;this.window=window.open(this.url,this.target,this.features),(e=this.window)!==null&&e!==void 0&&e.focus&&this.window.focus()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(e){e?window.location.replace(this.url):window.location.href=this.url}async listenOnChannel(e){return new Promise((t,i)=>{const s=new rn(e,{webWorkerSupport:!1,type:"server"});s.addEventListener("message",n=>{this.close(),s.close(),n.error?t({error:n.error,state:n.state}):t(n.data)})})}}class Eh{constructor(e){if(F(this,"state",{}),F(this,"options",void 0),F(this,"sessionManager",void 0),F(this,"currentStorage",void 0),F(this,"_storageBaseKey","openlogin_store"),F(this,"dappState",void 0),F(this,"addVersionInUrls",!0),!e.clientId)throw wt.invalidParams("clientId is required");if(e.network||(e.network=tr.SAPPHIRE_MAINNET),e.buildEnv||(e.buildEnv=Qe.PRODUCTION),(e.buildEnv===Qe.DEVELOPMENT||e.buildEnv===Qe.TESTING||e.sdkUrl)&&(this.addVersionInUrls=!1),!e.sdkUrl&&!e.useMpc&&(e.buildEnv===Qe.DEVELOPMENT?e.sdkUrl="http://localhost:3000":e.buildEnv===Qe.STAGING?e.sdkUrl="https://staging-auth.web3auth.io":e.buildEnv===Qe.TESTING?e.sdkUrl="https://develop-auth.web3auth.io":e.sdkUrl="https://auth.web3auth.io"),e.useMpc&&!e.sdkUrl){if(Object.values(ua).includes(e.network))throw new Error("MPC is not supported on legacy networks");e.buildEnv===Qe.DEVELOPMENT?e.sdkUrl="http://localhost:3000":e.buildEnv===Qe.STAGING?e.sdkUrl="https://staging-mpc-auth.web3auth.io":e.buildEnv===Qe.TESTING?e.sdkUrl="https://develop-mpc-auth.web3auth.io":e.sdkUrl="https://mpc-auth.web3auth.io"}!e.redirectUrl&&typeof window<"u"&&(e.redirectUrl=`${window.location.protocol}//${window.location.host}${window.location.pathname}`),e.uxMode||(e.uxMode=Et.REDIRECT),typeof e.replaceUrlOnRedirect!="boolean"&&(e.replaceUrlOnRedirect=!0),e.originData||(e.originData={}),e.whiteLabel||(e.whiteLabel={}),e.loginConfig||(e.loginConfig={}),e.mfaSettings||(e.mfaSettings={}),e.storageServerUrl||(e.storageServerUrl="https://broadcast-server.tor.us"),e.storageKey||(e.storageKey="local"),e.webauthnTransports||(e.webauthnTransports=["internal"]),e.sessionTime||(e.sessionTime=86400),this.options=e}get privKey(){return this.options.useMpc?this.state.factorKey||"":this.state.privKey?this.state.privKey.padStart(64,"0"):""}get coreKitKey(){return this.state.coreKitKey?this.state.coreKitKey.padStart(64,"0"):""}get ed25519PrivKey(){return this.state.ed25519PrivKey?this.state.ed25519PrivKey.padStart(128,"0"):""}get coreKitEd25519Key(){return this.state.coreKitEd25519PrivKey?this.state.coreKitEd25519PrivKey.padStart(128,"0"):""}get sessionId(){return this.state.sessionId||""}get sessionNamespace(){return this.options.sessionNamespace||""}get appState(){return this.state.userInfo.appState||this.dappState||""}get baseUrl(){return this.addVersionInUrls?`${this.options.sdkUrl}/v${wh.split(".")[0]}`:`${this.options.sdkUrl}`}async init(){const e=xh(this.options.replaceUrlOnRedirect);e.sessionNamespace&&(this.options.sessionNamespace=e.sessionNamespace);const t=this.options.sessionNamespace?`${this._storageBaseKey}_${this.options.sessionNamespace}`:this._storageBaseKey;this.currentStorage=la.getInstance(t,this.options.storageKey);const i=this.currentStorage.get("sessionId");if(this.sessionManager=new Si({sessionServerBaseUrl:this.options.storageServerUrl,sessionNamespace:this.options.sessionNamespace,sessionTime:this.options.sessionTime,sessionId:i}),(this.options.network===tr.TESTNET||this.options.network===tr.SAPPHIRE_DEVNET)&&console.log(`%c WARNING! You are on ${this.options.network}. Please set network: 'mainnet' or 'sapphire_mainnet' in production`,"color: #FF0000"),this.options.buildEnv!==Qe.PRODUCTION&&console.log(`%c WARNING! You are using build env ${this.options.buildEnv}. Please set buildEnv: 'production' in production`,"color: #FF0000"),e.error)throw this.dappState=e.state,ze.loginFailed(e.error);if(e.sessionId&&(this.currentStorage.set("sessionId",e.sessionId),this.sessionManager.sessionId=e.sessionId),this.sessionManager.sessionId){const s=await this._authorizeSession();this.updateState(s),Object.keys(s).length===0&&this.currentStorage.set("sessionId","")}}async login(e){if(!e.loginProvider)throw ze.invalidLoginParams("loginProvider is required");const t={redirectUrl:this.options.redirectUrl},i=V(V({loginProvider:e.loginProvider},t),e),s={actionType:ai.LOGIN,options:this.options,params:i},n=await this.openloginHandler(`${this.baseUrl}/start`,s,_h(e.loginProvider));if(this.options.uxMode===Et.REDIRECT)return null;if(n.error)throw this.dappState=n.state,ze.loginFailed(n.error);return this.sessionManager.sessionId=n.sessionId,this.options.sessionNamespace=n.sessionNamespace,this.currentStorage.set("sessionId",n.sessionId),await this.rehydrateSession(),{privKey:this.privKey}}async logout(){if(!this.sessionManager.sessionId)throw ze.userNotLoggedIn();await this.sessionManager.invalidateSession(),this.updateState({privKey:"",coreKitKey:"",coreKitEd25519PrivKey:"",ed25519PrivKey:"",walletKey:"",oAuthPrivateKey:"",tKey:"",metadataNonce:"",keyMode:void 0,userInfo:{name:"",profileImage:"",dappShare:"",idToken:"",oAuthIdToken:"",oAuthAccessToken:"",appState:"",email:"",verifier:"",verifierId:"",aggregateVerifier:"",typeOfLogin:"",isMfaEnabled:!1},authToken:"",sessionId:"",factorKey:"",signatures:[],tssShareIndex:-1,tssPubKey:"",tssShare:"",tssNonce:-1}),this.currentStorage.set("sessionId","")}async setupMFA(e){if(!this.sessionId)throw ze.userNotLoggedIn();const t={redirectUrl:this.options.redirectUrl},i={actionType:ai.ENABLE_MFA,options:this.options,params:V(V({},t),e),sessionId:this.sessionId},s=await this.openloginHandler(`${this.baseUrl}/start`,i);if(this.options.uxMode!==Et.REDIRECT)return this.sessionManager.sessionId=s.sessionId,this.options.sessionNamespace=s.sessionNamespace,this.currentStorage.set("sessionId",s.sessionId),await this.rehydrateSession(),!0}async changeSocialFactor(e){if(!this.sessionId)throw ze.userNotLoggedIn();const t={redirectUrl:this.options.redirectUrl},i={actionType:ai.MODIFY_MFA,options:this.options,params:V(V({},t),e),sessionId:this.sessionId},s=await this.openloginHandler(`${this.baseUrl}/start`,i);if(this.options.uxMode!==Et.REDIRECT)return this.sessionManager.sessionId=s.sessionId,this.options.sessionNamespace=s.sessionNamespace,this.currentStorage.set("sessionId",s.sessionId),await this.rehydrateSession(),!0}getUserInfo(){if(!this.sessionManager.sessionId)throw ze.userNotLoggedIn();return this.state.userInfo}async getLoginId(e){if(!this.sessionManager)throw wt.notInitialized();const t=Si.generateRandomSessionKey();return await new Si({sessionServerBaseUrl:this.options.storageServerUrl,sessionNamespace:this.options.sessionNamespace,sessionTime:600,sessionId:t}).createSession(JSON.parse(JSON.stringify(e))),t}async _authorizeSession(){try{return this.sessionManager.sessionId?await this.sessionManager.authorizeSession():{}}catch(e){return Ar.error("authorization failed",e),{}}}updateState(e){this.state=V(V({},this.state),e)}async rehydrateSession(){const e=await this._authorizeSession();this.updateState(e)}async openloginHandler(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e4;const s=await this.getLoginId(t),n={loginId:s,sessionNamespace:this.options.sessionNamespace};if(this.options.uxMode===Et.REDIRECT){const c=Li({baseURL:e,hash:{b64Params:xn(n)}});window.location.href=c;return}return new Promise((c,u)=>{const p=Li({baseURL:e,hash:{b64Params:xn(n)}}),y=new Ah({url:p,timeout:i});y.on("close",()=>{u(ze.popupClosed())}),y.listenOnChannel(s).then(c).catch(u),y.open()})}}const Ih=()=>({adapterSettings:{network:tr.SAPPHIRE_MAINNET,clientId:"",uxMode:Et.POPUP},loginSettings:{},privateKeyProvider:void 0});class Oh extends ma{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),F(this,"name",or.OPENLOGIN),F(this,"adapterNamespace",ga.MULTICHAIN),F(this,"type",ya.IN_APP),F(this,"openloginInstance",null),F(this,"status",Ge.NOT_READY),F(this,"currentChainNamespace",oi.EIP155),F(this,"privateKeyProvider",null),F(this,"openloginOptions",void 0),F(this,"loginSettings",{loginProvider:""}),this.setAdapterSettings(V(V({},e.adapterSettings),{},{chainConfig:e.chainConfig,clientId:e.clientId||"",sessionTime:e.sessionTime,web3AuthNetwork:e.web3AuthNetwork,useCoreKitKey:e.useCoreKitKey,privateKeyProvider:e.privateKeyProvider})),this.loginSettings=e.loginSettings||{loginProvider:""},this.privateKeyProvider=e.privateKeyProvider||null}get chainConfigProxy(){return this.chainConfig?V({},this.chainConfig):null}get provider(){return this.status!==Ge.NOT_READY&&this.privateKeyProvider?this.privateKeyProvider:null}set provider(e){throw new Error("Not implemented")}async init(e){if(super.checkInitializationRequirements(),!this.clientId)throw vt.invalidParams("clientId is required before openlogin's initialization");if(!this.openloginOptions)throw vt.invalidParams("openloginOptions is required before openlogin's initialization");const t=this.openloginOptions.uxMode===Et.REDIRECT;if(this.openloginOptions=V(V({},this.openloginOptions),{},{replaceUrlOnRedirect:t}),this.openloginInstance=new Eh(V(V({},this.openloginOptions),{},{clientId:this.clientId,network:this.openloginOptions.network||this.web3AuthNetwork||tr.SAPPHIRE_MAINNET})),Gt.debug("initializing openlogin adapter init"),await this.openloginInstance.init(),!this.chainConfig)throw vt.invalidParams("chainConfig is required before initialization");this.status=Ge.READY,this.emit(Yt.READY,or.OPENLOGIN);try{Gt.debug("initializing openlogin adapter"),this._getFinalPrivKey()&&(e.autoConnect||t)&&(this.rehydrated=!0,await this.connect())}catch(i){Gt.error("Failed to connect with cached openlogin provider",i),this.emit("ERRORED",i)}}async connect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{loginProvider:""};super.checkConnectionRequirements(),this.status=Ge.CONNECTING,this.emit(Yt.CONNECTING,V(V({},e),{},{adapter:or.OPENLOGIN}));try{return await this.connectWithProvider(e),this.provider}catch(t){throw Gt.error("Failed to connect with openlogin provider",t),this.status=Ge.READY,this.emit(Yt.ERRORED,t),t!=null&&t.message.includes("user closed popup")?_t.popupClosed():t instanceof wa?t:_t.connectionError("Failed to login with openlogin")}}async disconnect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cleanup:!1};if(this.status!==Ge.CONNECTED)throw _t.notConnectedError("Not connected with wallet");if(!this.openloginInstance)throw vt.notReady("openloginInstance is not ready");await this.openloginInstance.logout(),e.cleanup?(this.status=Ge.NOT_READY,this.openloginInstance=null,this.privateKeyProvider=null):this.status=Ge.READY,this.rehydrated=!1,this.emit(Yt.DISCONNECTED)}async authenticateUser(){if(this.status!==Ge.CONNECTED)throw _t.notConnectedError("Not connected with wallet, Please login/connect first");return{idToken:(await this.getUserInfo()).idToken}}async getUserInfo(){if(this.status!==Ge.CONNECTED)throw _t.notConnectedError("Not connected with wallet");if(!this.openloginInstance)throw vt.notReady("openloginInstance is not ready");return this.openloginInstance.getUserInfo()}setAdapterSettings(e){super.setAdapterSettings(e);const t=Ih();Gt.info("setting adapter settings",e),this.openloginOptions=V(V(V({},t.adapterSettings),this.openloginOptions),e),e.web3AuthNetwork&&(this.openloginOptions.network=e.web3AuthNetwork),e.useCoreKitKey!==void 0&&(this.openloginOptions.useCoreKitKey=e.useCoreKitKey),e.privateKeyProvider&&(this.privateKeyProvider=e.privateKeyProvider)}async addChain(e){var t;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.checkAddChainRequirements(e,i),(t=this.privateKeyProvider)===null||t===void 0||t.addChain(e),this.addChainConfig(e)}async switchChain(e){var t;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.checkSwitchChainRequirements(e,i),await((t=this.privateKeyProvider)===null||t===void 0?void 0:t.switchChain(e)),this.setAdapterSettings({chainConfig:this.getChainConfig(e.chainId)})}_getFinalPrivKey(){var e;if(!this.openloginInstance)return"";let t=this.openloginInstance.privKey;if((e=this.openloginOptions)!==null&&e!==void 0&&e.useCoreKitKey){if(this.openloginInstance.privKey&&!this.openloginInstance.coreKitKey)throw _t.coreKitKeyNotFound();t=this.openloginInstance.coreKitKey}return t}_getFinalEd25519PrivKey(){var e;if(!this.openloginInstance)return"";let t=this.openloginInstance.ed25519PrivKey;if((e=this.openloginOptions)!==null&&e!==void 0&&e.useCoreKitKey){if(this.openloginInstance.ed25519PrivKey&&!this.openloginInstance.coreKitEd25519Key)throw _t.coreKitKeyNotFound();t=this.openloginInstance.coreKitEd25519Key}return t}async connectWithProvider(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{loginProvider:""};if(!this.privateKeyProvider)throw vt.invalidParams("PrivateKey Provider is required before initialization");if(!this.openloginInstance)throw vt.notReady("openloginInstance is not ready");if(!this._getFinalPrivKey()||(e=t.extraLoginOptions)!==null&&e!==void 0&&e.id_token){var s;if(this.loginSettings.curve||(this.loginSettings.curve=this.currentChainNamespace===oi.SOLANA?Sn.ED25519:Sn.SECP256K1),!t.loginProvider&&!this.loginSettings.loginProvider)throw vt.invalidParams("loginProvider is required for login");await this.openloginInstance.login(xa(this.loginSettings,t,{extraLoginOptions:V(V({},t.extraLoginOptions||{}),{},{login_hint:t.login_hint||((s=t.extraLoginOptions)===null||s===void 0?void 0:s.login_hint)})}))}let n=this._getFinalPrivKey();n&&(this.currentChainNamespace===oi.SOLANA&&(n=this._getFinalEd25519PrivKey()),await this.privateKeyProvider.setupProvider(n),this.status=Ge.CONNECTED,this.emit(Yt.CONNECTED,{adapter:or.OPENLOGIN,reconnected:this.rehydrated}))}}export{Qe as BUILD_ENV,la as BrowserStorage,Lh as LANGUAGES,Mn as LOGIN_PROVIDER,qh as MFA_FACTOR,$h as MFA_LEVELS,zh as MemoryStore,ai as OPENLOGIN_ACTIONS,tr as OPENLOGIN_NETWORK,Oh as OpenloginAdapter,Sn as SUPPORTED_KEY_CURVES,Dh as THEME_MODES,ua as TORUS_LEGACY_NETWORK,Kh as TORUS_SAPPHIRE_NETWORK,Et as UX_MODE,Uh as base64toJSON,Fh as base64url,Ih as getOpenloginDefaultOptions,xn as jsonToBase64,fi as safeatob,pa as safebtoa,Hh as storageAvailable,Jh as storeKey};
