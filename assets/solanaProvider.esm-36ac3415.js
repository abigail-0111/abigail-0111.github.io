import{K as gs,L as lc,M as ro,a as xr,C as $n,d as je,N as qo,n as no,J as so,Q as oo,_ as _i,R as Rn,q as dc,T as Qn,U as hc}from"./home-2ff6d8fb.js";import{g as on,c as Ei,d as er,b as qe}from"./index-f08dc7fe.js";import{b as pc,B as Fo,c as gc}from"./_commonjs-dynamic-modules-82ba31df.js";import{r as yc}from"./index-83bc3ffd.js";function wc(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var r=0;r<n.length;r++){var s=n.charAt(r),o=s.charCodeAt(0);if(e[o]!==255)throw new TypeError(s+" is ambiguous");e[o]=r}var i=n.length,c=n.charAt(0),u=Math.log(i)/Math.log(256),p=Math.log(256)/Math.log(i);function g(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var m=0,y=0,x=0,B=S.length;x!==B&&S[x]===0;)x++,m++;for(var C=(B-x)*p+1>>>0,v=new Uint8Array(C);x!==B;){for(var K=S[x],A=0,O=C-1;(K!==0||A<y)&&O!==-1;O--,A++)K+=256*v[O]>>>0,v[O]=K%i>>>0,K=K/i>>>0;if(K!==0)throw new Error("Non-zero carry");y=A,x++}for(var M=C-y;M!==C&&v[M]===0;)M++;for(var H=c.repeat(m);M<C;++M)H+=n.charAt(v[M]);return H}function b(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;for(var m=0,y=0,x=0;S[m]===c;)y++,m++;for(var B=(S.length-m)*u+1>>>0,C=new Uint8Array(B);S[m];){var v=e[S.charCodeAt(m)];if(v===255)return;for(var K=0,A=B-1;(v!==0||K<x)&&A!==-1;A--,K++)v+=i*C[A]>>>0,C[A]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");x=K,m++}for(var O=B-x;O!==B&&C[O]===0;)O++;for(var M=new Uint8Array(y+(B-O)),H=y;O!==B;)M[H++]=C[O++];return M}function I(S){var m=b(S);if(m)return m;throw new Error("Non-base"+i+" character")}return{encode:g,decodeUnsafe:b,decode:I}}var bc=wc;const xc=bc,mc="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var vc=xc(mc);const Xt=on(vc);function zo(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function Ai(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function Sc(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");zo(n.outputLen),zo(n.blockLen)}function jn(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function _c(n,e){Ai(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Bi=n=>n instanceof Uint8Array,ys=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),Zt=(n,e)=>n<<32-e|n>>>e,Ec=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Ec)throw new Error("Non little-endian hardware is not supported");function Ii(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function io(n){if(typeof n=="string"&&(n=Ii(n)),!Bi(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function ki(...n){const e=new Uint8Array(n.reduce((r,s)=>r+s.length,0));let t=0;return n.forEach(r=>{if(!Bi(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}class Ri{clone(){return this._cloneInto()}}function Ti(n){const e=r=>n().update(io(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function Ci(n=32){if(gs&&typeof gs.getRandomValues=="function")return gs.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}function Ac(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const s=BigInt(32),o=BigInt(4294967295),i=Number(t>>s&o),c=Number(t&o),u=r?4:0,p=r?0:4;n.setUint32(e+u,i,r),n.setUint32(e+p,c,r)}class Li extends Ri{constructor(e,t,r,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=ys(this.buffer)}update(e){jn(this);const{view:t,buffer:r,blockLen:s}=this;e=io(e);const o=e.length;for(let i=0;i<o;){const c=Math.min(s-this.pos,o-i);if(c===s){const u=ys(e);for(;s<=o-i;i+=s)this.process(u,i);continue}r.set(e.subarray(i,i+c),this.pos),this.pos+=c,i+=c,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){jn(this),_c(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:s,isLE:o}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>s-i&&(this.process(r,0),i=0);for(let b=i;b<s;b++)t[b]=0;Ac(r,s-8,BigInt(this.length*8),o),this.process(r,0);const c=ys(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const p=u/4,g=this.get();if(p>g.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<p;b++)c.setUint32(4*b,g[b],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:s,finished:o,destroyed:i,pos:c}=this;return e.length=s,e.pos=c,e.finished=o,e.destroyed=i,s%t&&e.buffer.set(r),e}}const qn=BigInt(2**32-1),$s=BigInt(32);function Pi(n,e=!1){return e?{h:Number(n&qn),l:Number(n>>$s&qn)}:{h:Number(n>>$s&qn)|0,l:Number(n&qn)|0}}function Bc(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let s=0;s<n.length;s++){const{h:o,l:i}=Pi(n[s],e);[t[s],r[s]]=[o,i]}return[t,r]}const Ic=(n,e)=>BigInt(n>>>0)<<$s|BigInt(e>>>0),kc=(n,e,t)=>n>>>t,Rc=(n,e,t)=>n<<32-t|e>>>t,Tc=(n,e,t)=>n>>>t|e<<32-t,Cc=(n,e,t)=>n<<32-t|e>>>t,Lc=(n,e,t)=>n<<64-t|e>>>t-32,Pc=(n,e,t)=>n>>>t-32|e<<64-t,Uc=(n,e)=>e,Oc=(n,e)=>n,Nc=(n,e,t)=>n<<t|e>>>32-t,Mc=(n,e,t)=>e<<t|n>>>32-t,qc=(n,e,t)=>e<<t-32|n>>>64-t,Fc=(n,e,t)=>n<<t-32|e>>>64-t;function zc(n,e,t,r){const s=(e>>>0)+(r>>>0);return{h:n+t+(s/2**32|0)|0,l:s|0}}const Kc=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),Hc=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,Dc=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),$c=(n,e,t,r,s)=>e+t+r+s+(n/2**32|0)|0,jc=(n,e,t,r,s)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(s>>>0),Wc=(n,e,t,r,s,o)=>e+t+r+s+o+(n/2**32|0)|0,Gc={fromBig:Pi,split:Bc,toBig:Ic,shrSH:kc,shrSL:Rc,rotrSH:Tc,rotrSL:Cc,rotrBH:Lc,rotrBL:Pc,rotr32H:Uc,rotr32L:Oc,rotlSH:Nc,rotlSL:Mc,rotlBH:qc,rotlBL:Fc,add:zc,add3L:Kc,add3H:Hc,add4L:Dc,add4H:$c,add5H:Wc,add5L:jc},Ne=Gc,[Vc,Yc]=(()=>Ne.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))))(),hr=new Uint32Array(80),pr=new Uint32Array(80);class Zc extends Li{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:s,Ch:o,Cl:i,Dh:c,Dl:u,Eh:p,El:g,Fh:b,Fl:I,Gh:S,Gl:m,Hh:y,Hl:x}=this;return[e,t,r,s,o,i,c,u,p,g,b,I,S,m,y,x]}set(e,t,r,s,o,i,c,u,p,g,b,I,S,m,y,x){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=s|0,this.Ch=o|0,this.Cl=i|0,this.Dh=c|0,this.Dl=u|0,this.Eh=p|0,this.El=g|0,this.Fh=b|0,this.Fl=I|0,this.Gh=S|0,this.Gl=m|0,this.Hh=y|0,this.Hl=x|0}process(e,t){for(let v=0;v<16;v++,t+=4)hr[v]=e.getUint32(t),pr[v]=e.getUint32(t+=4);for(let v=16;v<80;v++){const K=hr[v-15]|0,A=pr[v-15]|0,O=Ne.rotrSH(K,A,1)^Ne.rotrSH(K,A,8)^Ne.shrSH(K,A,7),M=Ne.rotrSL(K,A,1)^Ne.rotrSL(K,A,8)^Ne.shrSL(K,A,7),H=hr[v-2]|0,_e=pr[v-2]|0,xe=Ne.rotrSH(H,_e,19)^Ne.rotrBH(H,_e,61)^Ne.shrSH(H,_e,6),me=Ne.rotrSL(H,_e,19)^Ne.rotrBL(H,_e,61)^Ne.shrSL(H,_e,6),He=Ne.add4L(M,me,pr[v-7],pr[v-16]),Qe=Ne.add4H(He,O,xe,hr[v-7],hr[v-16]);hr[v]=Qe|0,pr[v]=He|0}let{Ah:r,Al:s,Bh:o,Bl:i,Ch:c,Cl:u,Dh:p,Dl:g,Eh:b,El:I,Fh:S,Fl:m,Gh:y,Gl:x,Hh:B,Hl:C}=this;for(let v=0;v<80;v++){const K=Ne.rotrSH(b,I,14)^Ne.rotrSH(b,I,18)^Ne.rotrBH(b,I,41),A=Ne.rotrSL(b,I,14)^Ne.rotrSL(b,I,18)^Ne.rotrBL(b,I,41),O=b&S^~b&y,M=I&m^~I&x,H=Ne.add5L(C,A,M,Yc[v],pr[v]),_e=Ne.add5H(H,B,K,O,Vc[v],hr[v]),xe=H|0,me=Ne.rotrSH(r,s,28)^Ne.rotrBH(r,s,34)^Ne.rotrBH(r,s,39),He=Ne.rotrSL(r,s,28)^Ne.rotrBL(r,s,34)^Ne.rotrBL(r,s,39),Qe=r&o^r&c^o&c,pt=s&i^s&u^i&u;B=y|0,C=x|0,y=S|0,x=m|0,S=b|0,m=I|0,{h:b,l:I}=Ne.add(p|0,g|0,_e|0,xe|0),p=c|0,g=u|0,c=o|0,u=i|0,o=r|0,i=s|0;const J=Ne.add3L(xe,He,pt);r=Ne.add3H(J,_e,me,Qe),s=J|0}({h:r,l:s}=Ne.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:o,l:i}=Ne.add(this.Bh|0,this.Bl|0,o|0,i|0),{h:c,l:u}=Ne.add(this.Ch|0,this.Cl|0,c|0,u|0),{h:p,l:g}=Ne.add(this.Dh|0,this.Dl|0,p|0,g|0),{h:b,l:I}=Ne.add(this.Eh|0,this.El|0,b|0,I|0),{h:S,l:m}=Ne.add(this.Fh|0,this.Fl|0,S|0,m|0),{h:y,l:x}=Ne.add(this.Gh|0,this.Gl|0,y|0,x|0),{h:B,l:C}=Ne.add(this.Hh|0,this.Hl|0,B|0,C|0),this.set(r,s,o,i,c,u,p,g,b,I,S,m,y,x,B,C)}roundClean(){hr.fill(0),pr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Ui=Ti(()=>new Zc);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Oi=BigInt(0),es=BigInt(1),Xc=BigInt(2),ts=n=>n instanceof Uint8Array,Jc=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Ur(n){if(!ts(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=Jc[n[t]];return e}function Ni(n){const e=n.toString(16);return e.length&1?`0${e}`:e}function ao(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function en(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let r=0;r<t.length;r++){const s=r*2,o=n.slice(s,s+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[r]=i}return t}function Lr(n){return ao(Ur(n))}function Xr(n){if(!ts(n))throw new Error("Uint8Array expected");return ao(Ur(Uint8Array.from(n).reverse()))}function tn(n,e){return en(n.toString(16).padStart(e*2,"0"))}function En(n,e){return tn(n,e).reverse()}function Qc(n){return en(Ni(n))}function mt(n,e,t){let r;if(typeof e=="string")try{r=en(e)}catch(o){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${o}`)}else if(ts(e))r=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);const s=r.length;if(typeof t=="number"&&s!==t)throw new Error(`${n} expected ${t} bytes, got ${s}`);return r}function Or(...n){const e=new Uint8Array(n.reduce((r,s)=>r+s.length,0));let t=0;return n.forEach(r=>{if(!ts(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}function ef(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function tf(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function rf(n){let e;for(e=0;n>Oi;n>>=es,e+=1);return e}function nf(n,e){return n>>BigInt(e)&es}const sf=(n,e,t)=>n|(t?es:Oi)<<BigInt(e),co=n=>(Xc<<BigInt(n-1))-es,ws=n=>new Uint8Array(n),Ko=n=>Uint8Array.from(n);function Mi(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=ws(n),s=ws(n),o=0;const i=()=>{r.fill(1),s.fill(0),o=0},c=(...b)=>t(s,r,...b),u=(b=ws())=>{s=c(Ko([0]),b),r=c(),b.length!==0&&(s=c(Ko([1]),b),r=c())},p=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let b=0;const I=[];for(;b<e;){r=c();const S=r.slice();I.push(S),b+=r.length}return Or(...I)};return(b,I)=>{i(),u(b);let S;for(;!(S=I(p()));)u();return i(),S}}const of={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function an(n,e,t={}){const r=(s,o,i)=>{const c=of[o];if(typeof c!="function")throw new Error(`Invalid validator "${o}", expected function`);const u=n[s];if(!(i&&u===void 0)&&!c(u,n))throw new Error(`Invalid param ${String(s)}=${u} (${typeof u}), expected ${o}`)};for(const[s,o]of Object.entries(e))r(s,o,!1);for(const[s,o]of Object.entries(t))r(s,o,!0);return n}const af=Object.freeze(Object.defineProperty({__proto__:null,bitGet:nf,bitLen:rf,bitMask:co,bitSet:sf,bytesToHex:Ur,bytesToNumberBE:Lr,bytesToNumberLE:Xr,concatBytes:Or,createHmacDrbg:Mi,ensureBytes:mt,equalBytes:ef,hexToBytes:en,hexToNumber:ao,numberToBytesBE:tn,numberToBytesLE:En,numberToHexUnpadded:Ni,numberToVarBytesBE:Qc,utf8ToBytes:tf,validateObject:an},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vt=BigInt(0),ct=BigInt(1),kr=BigInt(2),cf=BigInt(3),js=BigInt(4),Ho=BigInt(5),Do=BigInt(8);BigInt(9);BigInt(16);function it(n,e){const t=n%e;return t>=vt?t:e+t}function ff(n,e,t){if(t<=vt||e<vt)throw new Error("Expected power/modulo > 0");if(t===ct)return vt;let r=ct;for(;e>vt;)e&ct&&(r=r*n%t),n=n*n%t,e>>=ct;return r}function dt(n,e,t){let r=n;for(;e-- >vt;)r*=r,r%=t;return r}function Ws(n,e){if(n===vt||e<=vt)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=it(n,e),r=e,s=vt,o=ct;for(;t!==vt;){const c=r/t,u=r%t,p=s-o*c;r=t,t=u,s=o,o=p}if(r!==ct)throw new Error("invert: does not exist");return it(s,e)}function uf(n){const e=(n-ct)/kr;let t,r,s;for(t=n-ct,r=0;t%kr===vt;t/=kr,r++);for(s=kr;s<n&&ff(s,e,n)!==n-ct;s++);if(r===1){const i=(n+ct)/js;return function(u,p){const g=u.pow(p,i);if(!u.eql(u.sqr(g),p))throw new Error("Cannot find square root");return g}}const o=(t+ct)/kr;return function(c,u){if(c.pow(u,e)===c.neg(c.ONE))throw new Error("Cannot find square root");let p=r,g=c.pow(c.mul(c.ONE,s),t),b=c.pow(u,o),I=c.pow(u,t);for(;!c.eql(I,c.ONE);){if(c.eql(I,c.ZERO))return c.ZERO;let S=1;for(let y=c.sqr(I);S<p&&!c.eql(y,c.ONE);S++)y=c.sqr(y);const m=c.pow(g,ct<<BigInt(p-S-1));g=c.sqr(m),b=c.mul(b,m),I=c.mul(I,g),p=S}return b}}function lf(n){if(n%js===cf){const e=(n+ct)/js;return function(r,s){const o=r.pow(s,e);if(!r.eql(r.sqr(o),s))throw new Error("Cannot find square root");return o}}if(n%Do===Ho){const e=(n-Ho)/Do;return function(r,s){const o=r.mul(s,kr),i=r.pow(o,e),c=r.mul(s,i),u=r.mul(r.mul(c,kr),i),p=r.mul(c,r.sub(u,r.ONE));if(!r.eql(r.sqr(p),s))throw new Error("Cannot find square root");return p}}return uf(n)}const df=(n,e)=>(it(n,e)&ct)===ct,hf=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function pf(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=hf.reduce((r,s)=>(r[s]="function",r),e);return an(n,t)}function gf(n,e,t){if(t<vt)throw new Error("Expected power > 0");if(t===vt)return n.ONE;if(t===ct)return e;let r=n.ONE,s=e;for(;t>vt;)t&ct&&(r=n.mul(r,s)),s=n.sqr(s),t>>=ct;return r}function yf(n,e){const t=new Array(e.length),r=e.reduce((o,i,c)=>n.is0(i)?o:(t[c]=o,n.mul(o,i)),n.ONE),s=n.inv(r);return e.reduceRight((o,i,c)=>n.is0(i)?o:(t[c]=n.mul(o,t[c]),n.mul(o,i)),s),t}function qi(n,e){const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function Fi(n,e,t=!1,r={}){if(n<=vt)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:s,nByteLength:o}=qi(n,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const i=lf(n),c=Object.freeze({ORDER:n,BITS:s,BYTES:o,MASK:co(s),ZERO:vt,ONE:ct,create:u=>it(u,n),isValid:u=>{if(typeof u!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof u}`);return vt<=u&&u<n},is0:u=>u===vt,isOdd:u=>(u&ct)===ct,neg:u=>it(-u,n),eql:(u,p)=>u===p,sqr:u=>it(u*u,n),add:(u,p)=>it(u+p,n),sub:(u,p)=>it(u-p,n),mul:(u,p)=>it(u*p,n),pow:(u,p)=>gf(c,u,p),div:(u,p)=>it(u*Ws(p,n),n),sqrN:u=>u*u,addN:(u,p)=>u+p,subN:(u,p)=>u-p,mulN:(u,p)=>u*p,inv:u=>Ws(u,n),sqrt:r.sqrt||(u=>i(c,u)),invertBatch:u=>yf(c,u),cmov:(u,p,g)=>g?p:u,toBytes:u=>t?En(u,o):tn(u,o),fromBytes:u=>{if(u.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${u.length}`);return t?Xr(u):Lr(u)}});return Object.freeze(c)}function wf(n,e){if(!n.isOdd)throw new Error("Field doesn't have isOdd");const t=n.sqrt(e);return n.isOdd(t)?n.neg(t):t}function zi(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function Ki(n){const e=zi(n);return e+Math.ceil(e/2)}function bf(n,e,t=!1){const r=n.length,s=zi(e),o=Ki(e);if(r<16||r<o||r>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${r}`);const i=t?Lr(n):Xr(n),c=it(i,e-ct)+ct;return t?En(c,s):tn(c,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xf=BigInt(0),bs=BigInt(1);function Hi(n,e){const t=(s,o)=>{const i=o.negate();return s?i:o},r=s=>{const o=Math.ceil(e/s)+1,i=2**(s-1);return{windows:o,windowSize:i}};return{constTimeNegate:t,unsafeLadder(s,o){let i=n.ZERO,c=s;for(;o>xf;)o&bs&&(i=i.add(c)),c=c.double(),o>>=bs;return i},precomputeWindow(s,o){const{windows:i,windowSize:c}=r(o),u=[];let p=s,g=p;for(let b=0;b<i;b++){g=p,u.push(g);for(let I=1;I<c;I++)g=g.add(p),u.push(g);p=g.double()}return u},wNAF(s,o,i){const{windows:c,windowSize:u}=r(s);let p=n.ZERO,g=n.BASE;const b=BigInt(2**s-1),I=2**s,S=BigInt(s);for(let m=0;m<c;m++){const y=m*u;let x=Number(i&b);i>>=S,x>u&&(x-=I,i+=bs);const B=y,C=y+Math.abs(x)-1,v=m%2!==0,K=x<0;x===0?g=g.add(t(v,o[B])):p=p.add(t(K,o[C]))}return{p,f:g}},wNAFCached(s,o,i,c){const u=s._WINDOW_SIZE||1;let p=o.get(s);return p||(p=this.precomputeWindow(s,u),u!==1&&o.set(s,c(p))),this.wNAF(u,p,i)}}}function fo(n){return pf(n.Fp),an(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...qi(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Gt=BigInt(0),Ft=BigInt(1),Fn=BigInt(2),mf=BigInt(8),vf={zip215:!0};function Sf(n){const e=fo(n);return an(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function uo(n){const e=Sf(n),{Fp:t,n:r,prehash:s,hash:o,randomBytes:i,nByteLength:c,h:u}=e,p=Fn<<BigInt(c*8)-Ft,g=t.create,b=e.uvRatio||((Z,_)=>{try{return{isValid:!0,value:t.sqrt(Z*t.inv(_))}}catch{return{isValid:!1,value:Gt}}}),I=e.adjustScalarBytes||(Z=>Z),S=e.domain||((Z,_,k)=>{if(_.length||k)throw new Error("Contexts/pre-hash are not supported");return Z}),m=Z=>typeof Z=="bigint"&&Gt<Z,y=(Z,_)=>m(Z)&&m(_)&&Z<_,x=Z=>Z===Gt||y(Z,p);function B(Z,_){if(y(Z,_))return Z;throw new Error(`Expected valid scalar < ${_}, got ${typeof Z} ${Z}`)}function C(Z){return Z===Gt?Z:B(Z,r)}const v=new Map;function K(Z){if(!(Z instanceof A))throw new Error("ExtendedPoint expected")}class A{constructor(_,k,N,j){if(this.ex=_,this.ey=k,this.ez=N,this.et=j,!x(_))throw new Error("x required");if(!x(k))throw new Error("y required");if(!x(N))throw new Error("z required");if(!x(j))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(_){if(_ instanceof A)throw new Error("extended point not allowed");const{x:k,y:N}=_||{};if(!x(k)||!x(N))throw new Error("invalid affine point");return new A(k,N,Ft,g(k*N))}static normalizeZ(_){const k=t.invertBatch(_.map(N=>N.ez));return _.map((N,j)=>N.toAffine(k[j])).map(A.fromAffine)}_setWindowSize(_){this._WINDOW_SIZE=_,v.delete(this)}assertValidity(){const{a:_,d:k}=e;if(this.is0())throw new Error("bad point: ZERO");const{ex:N,ey:j,ez:V,et:G}=this,X=g(N*N),ue=g(j*j),ve=g(V*V),Ze=g(ve*ve),Ke=g(X*_),Je=g(ve*g(Ke+ue)),yt=g(Ze+g(k*g(X*ue)));if(Je!==yt)throw new Error("bad point: equation left != right (1)");const wt=g(N*j),nt=g(V*G);if(wt!==nt)throw new Error("bad point: equation left != right (2)")}equals(_){K(_);const{ex:k,ey:N,ez:j}=this,{ex:V,ey:G,ez:X}=_,ue=g(k*X),ve=g(V*j),Ze=g(N*X),Ke=g(G*j);return ue===ve&&Ze===Ke}is0(){return this.equals(A.ZERO)}negate(){return new A(g(-this.ex),this.ey,this.ez,g(-this.et))}double(){const{a:_}=e,{ex:k,ey:N,ez:j}=this,V=g(k*k),G=g(N*N),X=g(Fn*g(j*j)),ue=g(_*V),ve=k+N,Ze=g(g(ve*ve)-V-G),Ke=ue+G,Je=Ke-X,yt=ue-G,wt=g(Ze*Je),nt=g(Ke*yt),Mt=g(Ze*yt),or=g(Je*Ke);return new A(wt,nt,or,Mt)}add(_){K(_);const{a:k,d:N}=e,{ex:j,ey:V,ez:G,et:X}=this,{ex:ue,ey:ve,ez:Ze,et:Ke}=_;if(k===BigInt(-1)){const Er=g((V-j)*(ve+ue)),Kr=g((V+j)*(ve-ue)),dr=g(Kr-Er);if(dr===Gt)return this.double();const Hr=g(G*Fn*Ke),Ar=g(X*Fn*Ze),Dr=Ar+Hr,$r=Kr+Er,hn=Ar-Hr,ls=g(Dr*dr),pn=g($r*hn),gn=g(Dr*hn),jr=g(dr*$r);return new A(ls,pn,jr,gn)}const Je=g(j*ue),yt=g(V*ve),wt=g(X*N*Ke),nt=g(G*Ze),Mt=g((j+V)*(ue+ve)-Je-yt),or=nt-wt,_r=nt+wt,dn=g(yt-k*Je),On=g(Mt*or),ir=g(_r*dn),zr=g(Mt*dn),Nn=g(or*_r);return new A(On,ir,Nn,zr)}subtract(_){return this.add(_.negate())}wNAF(_){return H.wNAFCached(this,v,_,A.normalizeZ)}multiply(_){const{p:k,f:N}=this.wNAF(B(_,r));return A.normalizeZ([k,N])[0]}multiplyUnsafe(_){let k=C(_);return k===Gt?M:this.equals(M)||k===Ft?this:this.equals(O)?this.wNAF(k).p:H.unsafeLadder(this,k)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return H.unsafeLadder(this,r).is0()}toAffine(_){const{ex:k,ey:N,ez:j}=this,V=this.is0();_==null&&(_=V?mf:t.inv(j));const G=g(k*_),X=g(N*_),ue=g(j*_);if(V)return{x:Gt,y:Ft};if(ue!==Ft)throw new Error("invZ was invalid");return{x:G,y:X}}clearCofactor(){const{h:_}=e;return _===Ft?this:this.multiplyUnsafe(_)}static fromHex(_,k=!1){const{d:N,a:j}=e,V=t.BYTES;_=mt("pointHex",_,V);const G=_.slice(),X=_[V-1];G[V-1]=X&-129;const ue=Xr(G);ue===Gt||(k?B(ue,p):B(ue,t.ORDER));const ve=g(ue*ue),Ze=g(ve-Ft),Ke=g(N*ve-j);let{isValid:Je,value:yt}=b(Ze,Ke);if(!Je)throw new Error("Point.fromHex: invalid y coordinate");const wt=(yt&Ft)===Ft,nt=(X&128)!==0;if(!k&&yt===Gt&&nt)throw new Error("Point.fromHex: x=0 and x_0=1");return nt!==wt&&(yt=g(-yt)),A.fromAffine({x:yt,y:ue})}static fromPrivateKey(_){return me(_).point}toRawBytes(){const{x:_,y:k}=this.toAffine(),N=En(k,t.BYTES);return N[N.length-1]|=_&Ft?128:0,N}toHex(){return Ur(this.toRawBytes())}}A.BASE=new A(e.Gx,e.Gy,Ft,g(e.Gx*e.Gy)),A.ZERO=new A(Gt,Ft,Ft,Gt);const{BASE:O,ZERO:M}=A,H=Hi(A,c*8);function _e(Z){return it(Z,r)}function xe(Z){return _e(Xr(Z))}function me(Z){const _=c;Z=mt("private key",Z,_);const k=mt("hashed private key",o(Z),2*_),N=I(k.slice(0,_)),j=k.slice(_,2*_),V=xe(N),G=O.multiply(V),X=G.toRawBytes();return{head:N,prefix:j,scalar:V,point:G,pointBytes:X}}function He(Z){return me(Z).pointBytes}function Qe(Z=new Uint8Array,..._){const k=Or(..._);return xe(o(S(k,mt("context",Z),!!s)))}function pt(Z,_,k={}){Z=mt("message",Z),s&&(Z=s(Z));const{prefix:N,scalar:j,pointBytes:V}=me(_),G=Qe(k.context,N,Z),X=O.multiply(G).toRawBytes(),ue=Qe(k.context,X,V,Z),ve=_e(G+ue*j);C(ve);const Ze=Or(X,En(ve,t.BYTES));return mt("result",Ze,c*2)}const J=vf;function te(Z,_,k,N=J){const{context:j,zip215:V}=N,G=t.BYTES;Z=mt("signature",Z,2*G),_=mt("message",_),s&&(_=s(_));const X=Xr(Z.slice(G,2*G));let ue,ve,Ze;try{ue=A.fromHex(k,V),ve=A.fromHex(Z.slice(0,G),V),Ze=O.multiplyUnsafe(X)}catch{return!1}if(!V&&ue.isSmallOrder())return!1;const Ke=Qe(j,ve.toRawBytes(),ue.toRawBytes(),_);return ve.add(ue.multiplyUnsafe(Ke)).subtract(Ze).clearCofactor().equals(A.ZERO)}return O._setWindowSize(8),{CURVE:e,getPublicKey:He,sign:pt,verify:te,ExtendedPoint:A,utils:{getExtendedPublicKey:me,randomPrivateKey:()=>i(t.BYTES),precompute(Z=8,_=A.BASE){return _._setWindowSize(Z),_.multiply(BigInt(3)),_}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const lo=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),$o=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const _f=BigInt(1),Gs=BigInt(2),Ef=BigInt(5),jo=BigInt(10),Af=BigInt(20),Bf=BigInt(40),Wo=BigInt(80);function If(n){const e=lo,r=n*n%e*n%e,s=dt(r,Gs,e)*r%e,o=dt(s,_f,e)*n%e,i=dt(o,Ef,e)*o%e,c=dt(i,jo,e)*i%e,u=dt(c,Af,e)*c%e,p=dt(u,Bf,e)*u%e,g=dt(p,Wo,e)*p%e,b=dt(g,Wo,e)*p%e,I=dt(b,jo,e)*i%e;return{pow_p_5_8:dt(I,Gs,e)*n%e,b2:r}}function kf(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function Rf(n,e){const t=lo,r=it(e*e*e,t),s=it(r*r*e,t),o=If(n*s).pow_p_5_8;let i=it(n*r*o,t);const c=it(e*i*i,t),u=i,p=it(i*$o,t),g=c===n,b=c===it(-n,t),I=c===it(-n*$o,t);return g&&(i=u),(b||I)&&(i=p),df(i,t)&&(i=it(-i,t)),{isValid:g||b,value:i}}const ur=Fi(lo,void 0,!0),ho={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:ur,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Ui,randomBytes:Ci,adjustScalarBytes:kf,uvRatio:Rf},cn=uo(ho);function Di(n,e,t){if(e.length>255)throw new Error("Context is too big");return ki(Ii("SigEd25519 no Ed25519 collisions"),new Uint8Array([t?1:0,e.length]),e,n)}({...ho});({...ho});const Tf=(ur.ORDER+BigInt(3))/BigInt(8);ur.pow(Gs,Tf);ur.sqrt(ur.neg(ur.ONE));(ur.ORDER-BigInt(5))/BigInt(8);BigInt(486662);wf(ur,ur.neg(BigInt(486664)));BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235");BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578");BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838");BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var zn=lc.Buffer;function Cf(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var r=0;r<n.length;r++){var s=n.charAt(r),o=s.charCodeAt(0);if(e[o]!==255)throw new TypeError(s+" is ambiguous");e[o]=r}var i=n.length,c=n.charAt(0),u=Math.log(i)/Math.log(256),p=Math.log(256)/Math.log(i);function g(S){if((Array.isArray(S)||S instanceof Uint8Array)&&(S=zn.from(S)),!zn.isBuffer(S))throw new TypeError("Expected Buffer");if(S.length===0)return"";for(var m=0,y=0,x=0,B=S.length;x!==B&&S[x]===0;)x++,m++;for(var C=(B-x)*p+1>>>0,v=new Uint8Array(C);x!==B;){for(var K=S[x],A=0,O=C-1;(K!==0||A<y)&&O!==-1;O--,A++)K+=256*v[O]>>>0,v[O]=K%i>>>0,K=K/i>>>0;if(K!==0)throw new Error("Non-zero carry");y=A,x++}for(var M=C-y;M!==C&&v[M]===0;)M++;for(var H=c.repeat(m);M<C;++M)H+=n.charAt(v[M]);return H}function b(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return zn.alloc(0);for(var m=0,y=0,x=0;S[m]===c;)y++,m++;for(var B=(S.length-m)*u+1>>>0,C=new Uint8Array(B);S[m];){var v=e[S.charCodeAt(m)];if(v===255)return;for(var K=0,A=B-1;(v!==0||K<x)&&A!==-1;A--,K++)v+=i*C[A]>>>0,C[A]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");x=K,m++}for(var O=B-x;O!==B&&C[O]===0;)O++;var M=zn.allocUnsafe(y+(B-O));M.fill(0,0,y);for(var H=y;O!==B;)M[H++]=C[O++];return M}function I(S){var m=b(S);if(m)return m;throw new Error("Non-base"+i+" character")}return{encode:g,decodeUnsafe:b,decode:I}}var Lf=Cf,Pf=Lf,Uf="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",$i=Pf(Uf);const At=on($i),Of=(n,e,t)=>n&e^~n&t,Nf=(n,e,t)=>n&e^n&t^e&t,Mf=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),gr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),yr=new Uint32Array(64);class qf extends Li{constructor(){super(64,32,8,!1),this.A=gr[0]|0,this.B=gr[1]|0,this.C=gr[2]|0,this.D=gr[3]|0,this.E=gr[4]|0,this.F=gr[5]|0,this.G=gr[6]|0,this.H=gr[7]|0}get(){const{A:e,B:t,C:r,D:s,E:o,F:i,G:c,H:u}=this;return[e,t,r,s,o,i,c,u]}set(e,t,r,s,o,i,c,u){this.A=e|0,this.B=t|0,this.C=r|0,this.D=s|0,this.E=o|0,this.F=i|0,this.G=c|0,this.H=u|0}process(e,t){for(let b=0;b<16;b++,t+=4)yr[b]=e.getUint32(t,!1);for(let b=16;b<64;b++){const I=yr[b-15],S=yr[b-2],m=Zt(I,7)^Zt(I,18)^I>>>3,y=Zt(S,17)^Zt(S,19)^S>>>10;yr[b]=y+yr[b-7]+m+yr[b-16]|0}let{A:r,B:s,C:o,D:i,E:c,F:u,G:p,H:g}=this;for(let b=0;b<64;b++){const I=Zt(c,6)^Zt(c,11)^Zt(c,25),S=g+I+Of(c,u,p)+Mf[b]+yr[b]|0,y=(Zt(r,2)^Zt(r,13)^Zt(r,22))+Nf(r,s,o)|0;g=p,p=u,u=c,c=i+S|0,i=o,o=s,s=r,r=S+y|0}r=r+this.A|0,s=s+this.B|0,o=o+this.C|0,i=i+this.D|0,c=c+this.E|0,u=u+this.F|0,p=p+this.G|0,g=g+this.H|0,this.set(r,s,o,i,c,u,p,g)}roundClean(){yr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Vs=Ti(()=>new qf);var Et={};function cr(n,e,t){return e<=n&&n<=t}function rs(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function Ff(n){for(var e=String(n),t=e.length,r=0,s=[];r<t;){var o=e.charCodeAt(r);if(o<55296||o>57343)s.push(o);else if(56320<=o&&o<=57343)s.push(65533);else if(55296<=o&&o<=56319)if(r===t-1)s.push(65533);else{var i=n.charCodeAt(r+1);if(56320<=i&&i<=57343){var c=o&1023,u=i&1023;s.push(65536+(c<<10)+u),r+=1}else s.push(65533)}r+=1}return s}function zf(n){for(var e="",t=0;t<n.length;++t){var r=n[t];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var Wn=-1;function po(n){this.tokens=[].slice.call(n)}po.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Wn},prepend:function(n){if(Array.isArray(n))for(var e=n;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var e=n;e.length;)this.tokens.push(e.shift());else this.tokens.push(n)}};var rn=-1;function xs(n,e){if(n)throw TypeError("Decoder error");return e||65533}var Gn="utf-8";function Vn(n,e){if(!(this instanceof Vn))return new Vn(n,e);if(n=n!==void 0?String(n).toLowerCase():Gn,n!==Gn)throw new Error("Encoding not supported. Only utf-8 is supported");e=rs(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Vn.prototype={decode:function(e,t){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),t=rs(t),this._streaming||(this._decoder=new Kf({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var s=new po(r),o=[],i;!s.endOfStream()&&(i=this._decoder.handler(s,s.read()),i!==rn);)i!==null&&(Array.isArray(i)?o.push.apply(o,i):o.push(i));if(!this._streaming){do{if(i=this._decoder.handler(s,s.read()),i===rn)break;i!==null&&(Array.isArray(i)?o.push.apply(o,i):o.push(i))}while(!s.endOfStream());this._decoder=null}return o.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(o[0]===65279?(this._BOMseen=!0,o.shift()):this._BOMseen=!0),zf(o)}};function Yn(n,e){if(!(this instanceof Yn))return new Yn(n,e);if(n=n!==void 0?String(n).toLowerCase():Gn,n!==Gn)throw new Error("Encoding not supported. Only utf-8 is supported");e=rs(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Yn.prototype={encode:function(e,t){e=e?String(e):"",t=rs(t),this._streaming||(this._encoder=new Hf(this._options)),this._streaming=!!t.stream;for(var r=[],s=new po(Ff(e)),o;!s.endOfStream()&&(o=this._encoder.handler(s,s.read()),o!==rn);)Array.isArray(o)?r.push.apply(r,o):r.push(o);if(!this._streaming){for(;o=this._encoder.handler(s,s.read()),o!==rn;)Array.isArray(o)?r.push.apply(r,o):r.push(o);this._encoder=null}return new Uint8Array(r)}};function Kf(n){var e=n.fatal,t=0,r=0,s=0,o=128,i=191;this.handler=function(c,u){if(u===Wn&&s!==0)return s=0,xs(e);if(u===Wn)return rn;if(s===0){if(cr(u,0,127))return u;if(cr(u,194,223))s=1,t=u-192;else if(cr(u,224,239))u===224&&(o=160),u===237&&(i=159),s=2,t=u-224;else if(cr(u,240,244))u===240&&(o=144),u===244&&(i=143),s=3,t=u-240;else return xs(e);return t=t<<6*s,null}if(!cr(u,o,i))return t=s=r=0,o=128,i=191,c.prepend(u),xs(e);if(o=128,i=191,r+=1,t+=u-128<<6*(s-r),r!==s)return null;var p=t;return t=s=r=0,p}}function Hf(n){n.fatal,this.handler=function(e,t){if(t===Wn)return rn;if(cr(t,0,127))return t;var r,s;cr(t,128,2047)?(r=1,s=192):cr(t,2048,65535)?(r=2,s=224):cr(t,65536,1114111)&&(r=3,s=240);for(var o=[(t>>6*r)+s];r>0;){var i=t>>6*(r-1);o.push(128|i&63),r-=1}return o}}const Df=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Vn,TextEncoder:Yn},Symbol.toStringTag,{value:"Module"})),$f=Ei(Df);var jf=er&&er.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Wf=er&&er.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),rr=er&&er.__decorate||function(n,e,t,r){var s=arguments.length,o=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var c=n.length-1;c>=0;c--)(i=n[c])&&(o=(s<3?i(o):s>3?i(e,t,o):i(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Gf=er&&er.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.hasOwnProperty.call(n,t)&&jf(e,n,t);return Wf(e,n),e},ji=er&&er.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Et,"__esModule",{value:!0});var Wi=Et.deserializeUnchecked=Ji=Et.deserialize=Xi=Et.serialize=Et.BinaryReader=Et.BinaryWriter=Et.BorshError=Et.baseDecode=Et.baseEncode=void 0;const mr=ji(pc),Gi=ji($i),Vf=Gf($f),Yf=typeof TextDecoder!="function"?Vf.TextDecoder:TextDecoder,Zf=new Yf("utf-8",{fatal:!0});function Xf(n){return typeof n=="string"&&(n=Buffer.from(n,"utf8")),Gi.default.encode(Buffer.from(n))}Et.baseEncode=Xf;function Jf(n){return Buffer.from(Gi.default.decode(n))}Et.baseDecode=Jf;const ms=1024;class Ut extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Et.BorshError=Ut;class Vi{constructor(){this.buf=Buffer.alloc(ms),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(ms)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new mr.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new mr.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new mr.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new mr.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(ms)]),this.length+=e.length}writeString(e){this.maybeResize();const t=Buffer.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(const r of e)this.maybeResize(),t(r)}toArray(){return this.buf.subarray(0,this.length)}}Et.BinaryWriter=Vi;function nr(n,e,t){const r=t.value;t.value=function(...s){try{return r.apply(this,s)}catch(o){if(o instanceof RangeError){const i=o.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(i)>=0)throw new Ut("Reached the end of buffer when deserializing")}throw o}}}class Dt{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new mr.default(e,"le")}readU128(){const e=this.readBuffer(16);return new mr.default(e,"le")}readU256(){const e=this.readBuffer(32);return new mr.default(e,"le")}readU512(){const e=this.readBuffer(64);return new mr.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new Ut(`Expected buffer length ${e} isn't within bounds`);const t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){const e=this.readU32(),t=this.readBuffer(e);try{return Zf.decode(t)}catch(r){throw new Ut(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const t=this.readU32(),r=Array();for(let s=0;s<t;++s)r.push(e());return r}}rr([nr],Dt.prototype,"readU8",null);rr([nr],Dt.prototype,"readU16",null);rr([nr],Dt.prototype,"readU32",null);rr([nr],Dt.prototype,"readU64",null);rr([nr],Dt.prototype,"readU128",null);rr([nr],Dt.prototype,"readU256",null);rr([nr],Dt.prototype,"readU512",null);rr([nr],Dt.prototype,"readString",null);rr([nr],Dt.prototype,"readFixedArray",null);rr([nr],Dt.prototype,"readArray",null);Et.BinaryReader=Dt;function Yi(n){return n.charAt(0).toUpperCase()+n.slice(1)}function Rr(n,e,t,r,s){try{if(typeof r=="string")s[`write${Yi(r)}`](t);else if(r instanceof Array)if(typeof r[0]=="number"){if(t.length!==r[0])throw new Ut(`Expecting byte array of length ${r[0]}, but got ${t.length} bytes`);s.writeFixedArray(t)}else if(r.length===2&&typeof r[1]=="number"){if(t.length!==r[1])throw new Ut(`Expecting byte array of length ${r[1]}, but got ${t.length} bytes`);for(let o=0;o<r[1];o++)Rr(n,null,t[o],r[0],s)}else s.writeArray(t,o=>{Rr(n,e,o,r[0],s)});else if(r.kind!==void 0)switch(r.kind){case"option":{t==null?s.writeU8(0):(s.writeU8(1),Rr(n,e,t,r.type,s));break}case"map":{s.writeU32(t.size),t.forEach((o,i)=>{Rr(n,e,i,r.key,s),Rr(n,e,o,r.value,s)});break}default:throw new Ut(`FieldType ${r} unrecognized`)}else Zi(n,t,s)}catch(o){throw o instanceof Ut&&o.addToFieldPath(e),o}}function Zi(n,e,t){if(typeof e.borshSerialize=="function"){e.borshSerialize(t);return}const r=n.get(e.constructor);if(!r)throw new Ut(`Class ${e.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([s,o])=>{Rr(n,s,e[s],o,t)});else if(r.kind==="enum"){const s=e[r.field];for(let o=0;o<r.values.length;++o){const[i,c]=r.values[o];if(i===s){t.writeU8(o),Rr(n,i,e[i],c,t);break}}}else throw new Ut(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function Qf(n,e,t=Vi){const r=new t;return Zi(n,e,r),r.toArray()}var Xi=Et.serialize=Qf;function Tr(n,e,t,r){try{if(typeof t=="string")return r[`read${Yi(t)}`]();if(t instanceof Array){if(typeof t[0]=="number")return r.readFixedArray(t[0]);if(typeof t[1]=="number"){const s=[];for(let o=0;o<t[1];o++)s.push(Tr(n,null,t[0],r));return s}else return r.readArray(()=>Tr(n,e,t[0],r))}if(t.kind==="option")return r.readU8()?Tr(n,e,t.type,r):void 0;if(t.kind==="map"){let s=new Map;const o=r.readU32();for(let i=0;i<o;i++){const c=Tr(n,e,t.key,r),u=Tr(n,e,t.value,r);s.set(c,u)}return s}return go(n,t,r)}catch(s){throw s instanceof Ut&&s.addToFieldPath(e),s}}function go(n,e,t){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(t);const r=n.get(e);if(!r)throw new Ut(`Class ${e.name} is missing in schema`);if(r.kind==="struct"){const s={};for(const[o,i]of n.get(e).fields)s[o]=Tr(n,o,i,t);return new e(s)}if(r.kind==="enum"){const s=t.readU8();if(s>=r.values.length)throw new Ut(`Enum index: ${s} is out of range`);const[o,i]=r.values[s],c=Tr(n,o,i,t);return new e({[o]:c})}throw new Ut(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function eu(n,e,t,r=Dt){const s=new r(t),o=go(n,e,s);if(s.offset<t.length)throw new Ut(`Unexpected ${t.length-s.offset} bytes after deserialized data`);return o}var Ji=Et.deserialize=eu;function tu(n,e,t,r=Dt){const s=new r(t);return go(n,e,s)}Wi=Et.deserializeUnchecked=tu;var L={};Object.defineProperty(L,"__esModule",{value:!0});L.s16=L.s8=L.nu64be=L.u48be=L.u40be=L.u32be=L.u24be=L.u16be=_t=L.nu64=L.u48=L.u40=we=L.u32=L.u24=jt=L.u16=Xe=L.u8=Pr=L.offset=L.greedy=L.Constant=L.UTF8=L.CString=L.Blob=L.Boolean=L.BitField=L.BitStructure=L.VariantLayout=L.Union=L.UnionLayoutDiscriminator=L.UnionDiscriminator=L.Structure=L.Sequence=L.DoubleBE=L.Double=L.FloatBE=L.Float=L.NearInt64BE=L.NearInt64=L.NearUInt64BE=L.NearUInt64=L.IntBE=L.Int=L.UIntBE=L.UInt=L.OffsetLayout=L.GreedyCount=L.ExternalLayout=L.bindConstructorLayout=L.nameWithProperty=L.Layout=L.uint8ArrayToBuffer=L.checkUint8Array=void 0;L.constant=L.utf8=L.cstr=rt=L.blob=L.unionLayoutDiscriminator=L.union=Pt=L.seq=L.bits=he=L.struct=L.f64be=L.f64=L.f32be=L.f32=L.ns64be=L.s48be=L.s40be=L.s32be=L.s24be=L.s16be=zt=L.ns64=L.s48=L.s40=L.s32=L.s24=void 0;const yo=qe;function fn(n){if(!(n instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}L.checkUint8Array=fn;function Ye(n){return fn(n),yo.Buffer.from(n.buffer,n.byteOffset,n.length)}L.uint8ArrayToBuffer=Ye;class tt{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}L.Layout=tt;function wo(n,e){return e.property?n+"["+e.property+"]":n}L.nameWithProperty=wo;function ru(n,e){if(typeof n!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(n,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof tt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");n.layout_=e,e.boundConstructor_=n,e.makeDestinationObject=()=>new n,Object.defineProperty(n.prototype,"encode",{value(t,r){return e.encode(this,t,r)},writable:!0}),Object.defineProperty(n,"decode",{value(t,r){return e.decode(t,r)},writable:!0})}L.bindConstructorLayout=ru;class Ot extends tt{isCount(){throw new Error("ExternalLayout is abstract")}}L.ExternalLayout=Ot;class Qi extends Ot{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){fn(e);const r=e.length-t;return Math.floor(r/this.elementSpan)}encode(e,t,r){return 0}}L.GreedyCount=Qi;class bo extends Ot{constructor(e,t=0,r){if(!(e instanceof tt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof Wt||this.layout instanceof Vt}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,r=0){return this.layout.encode(e,t,r+this.offset)}}L.OffsetLayout=bo;class Wt extends tt{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Ye(e).readUIntLE(t,this.span)}encode(e,t,r=0){return Ye(t).writeUIntLE(e,r,this.span),this.span}}L.UInt=Wt;class Vt extends tt{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Ye(e).readUIntBE(t,this.span)}encode(e,t,r=0){return Ye(t).writeUIntBE(e,r,this.span),this.span}}L.UIntBE=Vt;class Nr extends tt{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Ye(e).readIntLE(t,this.span)}encode(e,t,r=0){return Ye(t).writeIntLE(e,r,this.span),this.span}}L.Int=Nr;class un extends tt{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Ye(e).readIntBE(t,this.span)}encode(e,t,r=0){return Ye(t).writeIntBE(e,r,this.span),this.span}}L.IntBE=un;const Ys=Math.pow(2,32);function ns(n){const e=Math.floor(n/Ys),t=n-e*Ys;return{hi32:e,lo32:t}}function ss(n,e){return n*Ys+e}class ea extends tt{constructor(e){super(8,e)}decode(e,t=0){const r=Ye(e),s=r.readUInt32LE(t),o=r.readUInt32LE(t+4);return ss(o,s)}encode(e,t,r=0){const s=ns(e),o=Ye(t);return o.writeUInt32LE(s.lo32,r),o.writeUInt32LE(s.hi32,r+4),8}}L.NearUInt64=ea;class ta extends tt{constructor(e){super(8,e)}decode(e,t=0){const r=Ye(e),s=r.readUInt32BE(t),o=r.readUInt32BE(t+4);return ss(s,o)}encode(e,t,r=0){const s=ns(e),o=Ye(t);return o.writeUInt32BE(s.hi32,r),o.writeUInt32BE(s.lo32,r+4),8}}L.NearUInt64BE=ta;class ra extends tt{constructor(e){super(8,e)}decode(e,t=0){const r=Ye(e),s=r.readUInt32LE(t),o=r.readInt32LE(t+4);return ss(o,s)}encode(e,t,r=0){const s=ns(e),o=Ye(t);return o.writeUInt32LE(s.lo32,r),o.writeInt32LE(s.hi32,r+4),8}}L.NearInt64=ra;class na extends tt{constructor(e){super(8,e)}decode(e,t=0){const r=Ye(e),s=r.readInt32BE(t),o=r.readUInt32BE(t+4);return ss(s,o)}encode(e,t,r=0){const s=ns(e),o=Ye(t);return o.writeInt32BE(s.hi32,r),o.writeUInt32BE(s.lo32,r+4),8}}L.NearInt64BE=na;class sa extends tt{constructor(e){super(4,e)}decode(e,t=0){return Ye(e).readFloatLE(t)}encode(e,t,r=0){return Ye(t).writeFloatLE(e,r),4}}L.Float=sa;class oa extends tt{constructor(e){super(4,e)}decode(e,t=0){return Ye(e).readFloatBE(t)}encode(e,t,r=0){return Ye(t).writeFloatBE(e,r),4}}L.FloatBE=oa;class ia extends tt{constructor(e){super(8,e)}decode(e,t=0){return Ye(e).readDoubleLE(t)}encode(e,t,r=0){return Ye(t).writeDoubleLE(e,r),8}}L.Double=ia;class aa extends tt{constructor(e){super(8,e)}decode(e,t=0){return Ye(e).readDoubleBE(t)}encode(e,t,r=0){return Ye(t).writeDoubleBE(e,r),8}}L.DoubleBE=aa;class ca extends tt{constructor(e,t,r){if(!(e instanceof tt))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof Ot&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(t instanceof Ot)&&0<e.span&&(s=t*e.span),super(s,r),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0,s=this.count;if(s instanceof Ot&&(s=s.decode(e,t)),0<this.elementLayout.span)r=s*this.elementLayout.span;else{let o=0;for(;o<s;)r+=this.elementLayout.getSpan(e,t+r),++o}return r}decode(e,t=0){const r=[];let s=0,o=this.count;for(o instanceof Ot&&(o=o.decode(e,t));s<o;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),s+=1;return r}encode(e,t,r=0){const s=this.elementLayout,o=e.reduce((i,c)=>i+s.encode(c,t,r+i),0);return this.count instanceof Ot&&this.count.encode(e.length,t,r),o}}L.Sequence=ca;class fa extends tt{constructor(e,t,r){if(!(Array.isArray(e)&&e.reduce((o,i)=>o&&i instanceof tt,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&r===void 0&&(r=t,t=void 0);for(const o of e)if(0>o.span&&o.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=e.reduce((o,i)=>o+i.getSpan(),0)}catch{}super(s,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((s,o)=>{const i=o.getSpan(e,t);return t+=i,s+i},0)}catch{throw new RangeError("indeterminate span")}return r}decode(e,t=0){fn(e);const r=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(r[s.property]=s.decode(e,t)),t+=s.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r=0){const s=r;let o=0,i=0;for(const c of this.fields){let u=c.span;if(i=0<u?u:0,c.property!==void 0){const p=e[c.property];p!==void 0&&(i=c.encode(p,t,r),0>u&&(u=c.getSpan(t,r)))}o=r,r+=u}return o+i-s}fromArray(e){const t=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}L.Structure=fa;class xo{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,r){throw new Error("UnionDiscriminator is abstract")}}L.UnionDiscriminator=xo;class Zn extends xo{constructor(e,t){if(!(e instanceof Ot&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}}L.UnionLayoutDiscriminator=Zn;class mo extends tt{constructor(e,t,r){let s;if(e instanceof Wt||e instanceof Vt)s=new Zn(new bo(e));else if(e instanceof Ot&&e.isCount())s=new Zn(e);else if(e instanceof xo)s=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof tt))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let o=-1;t&&(o=t.span,0<=o&&(e instanceof Wt||e instanceof Vt)&&(o+=s.layout.span)),super(o,r),this.discriminator=s,this.usesPrefixDiscriminator=e instanceof Wt||e instanceof Vt,this.defaultLayout=t,this.registry={};let i=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(c){return i(c)},this.configGetSourceVariant=function(c){i=c.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;const r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(const t in this.registry){const r=this.registry[t];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw new Error("unable to infer src variant")}decode(e,t=0){let r;const s=this.discriminator,o=s.decode(e,t),i=this.registry[o];if(i===void 0){const c=this.defaultLayout;let u=0;this.usesPrefixDiscriminator&&(u=s.layout.span),r=this.makeDestinationObject(),r[s.property]=o,r[c.property]=c.decode(e,t+u)}else r=i.decode(e,t);return r}encode(e,t,r=0){const s=this.getSourceVariant(e);if(s===void 0){const o=this.discriminator,i=this.defaultLayout;let c=0;return this.usesPrefixDiscriminator&&(c=o.layout.span),o.encode(e[o.property],t,r),c+i.encode(e[i.property],t,r+c)}return s.encode(e,t,r)}addVariant(e,t,r){const s=new ua(this,e,t,r);return this.registry[e]=s,s}getVariant(e,t=0){let r;return e instanceof Uint8Array?r=this.discriminator.decode(e,t):r=e,this.registry[r]}}L.Union=mo;class ua extends tt{constructor(e,t,r,s){if(!(e instanceof mo))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&s===void 0&&(s=r,r=null),r){if(!(r instanceof tt))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let o=e.span;0>e.span&&(o=r?r.span:0,0<=o&&e.usesPrefixDiscriminator&&(o+=e.discriminator.layout.span)),super(o,s),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(e,t+r)),r+s}decode(e,t=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+s):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let o=s;if(this.layout&&(this.layout.encode(e[this.property],t,r+s),o+=this.layout.getSpan(t,r+s),0<=this.union.span&&o>this.union.span))throw new Error("encoded variant overruns containing union");return o}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}L.VariantLayout=ua;function Vr(n){return 0>n&&(n+=4294967296),n}class vo extends tt{constructor(e,t,r){if(!(e instanceof Wt||e instanceof Vt))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof t=="string"&&r===void 0&&(r=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let s=0;this._packedSetValue=function(o){return s=Vr(o),this},this._packedGetValue=function(){return s}}decode(e,t=0){const r=this.makeDestinationObject(),s=this.word.decode(e,t);this._packedSetValue(s);for(const o of this.fields)o.property!==void 0&&(r[o.property]=o.decode(e));return r}encode(e,t,r=0){const s=this.word.decode(t,r);this._packedSetValue(s);for(const o of this.fields)if(o.property!==void 0){const i=e[o.property];i!==void 0&&o.encode(i)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){const r=new So(this,e,t);return this.fields.push(r),r}addBoolean(e){const t=new la(this,e);return this.fields.push(t),t}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}}L.BitStructure=vo;class So{constructor(e,t,r){if(!(e instanceof vo))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const s=8*e.span,o=e.fields.reduce((i,c)=>i+c.bits,0);if(t+o>s)throw new Error("bits too long for span remainder ("+(s-o)+" of "+s+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,t===32&&(this.valueMask=4294967295),this.start=o,this.container.msb&&(this.start=s-o-t),this.wordMask=Vr(this.valueMask<<this.start),this.property=r}decode(e,t){const r=this.container._packedGetValue();return Vr(r&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==Vr(e&this.valueMask))throw new TypeError(wo("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),r=Vr(e<<this.start);this.container._packedSetValue(Vr(t&~this.wordMask)|r)}}L.BitField=So;let la=class extends So{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};L.Boolean=la;class da extends tt{constructor(e,t){if(!(e instanceof Ot&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof Ot||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t=0){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),Ye(e).slice(t,t+r)}encode(e,t,r){let s=this.length;if(this.length instanceof Ot&&(s=e.length),!(e instanceof Uint8Array&&s===e.length))throw new TypeError(wo("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(r+s>t.length)throw new RangeError("encoding overruns Uint8Array");const o=Ye(e);return Ye(t).write(o.toString("hex"),r,s,"hex"),this.length instanceof Ot&&this.length.encode(s,t,r),s}}L.Blob=da;class ha extends tt{constructor(e){super(-1,e)}getSpan(e,t=0){fn(e);let r=t;for(;r<e.length&&e[r]!==0;)r+=1;return 1+r-t}decode(e,t=0){const r=this.getSpan(e,t);return Ye(e).slice(t,t+r-1).toString("utf-8")}encode(e,t,r=0){typeof e!="string"&&(e=String(e));const s=yo.Buffer.from(e,"utf8"),o=s.length;if(r+o>t.length)throw new RangeError("encoding overruns Buffer");const i=Ye(t);return s.copy(i,r),i[r+o]=0,o+1}}L.CString=ha;class pa extends tt{constructor(e,t){if(typeof e=="string"&&t===void 0&&(t=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return fn(e),e.length-t}decode(e,t=0){const r=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return Ye(e).slice(t,t+r).toString("utf-8")}encode(e,t,r=0){typeof e!="string"&&(e=String(e));const s=yo.Buffer.from(e,"utf8"),o=s.length;if(0<=this.maxSpan&&this.maxSpan<o)throw new RangeError("text length exceeds maxSpan");if(r+o>t.length)throw new RangeError("encoding overruns Buffer");return s.copy(Ye(t),r),o}}L.UTF8=pa;class ga extends tt{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,r){return 0}}L.Constant=ga;L.greedy=(n,e)=>new Qi(n,e);var Pr=L.offset=(n,e,t)=>new bo(n,e,t),Xe=L.u8=n=>new Wt(1,n),jt=L.u16=n=>new Wt(2,n);L.u24=n=>new Wt(3,n);var we=L.u32=n=>new Wt(4,n);L.u40=n=>new Wt(5,n);L.u48=n=>new Wt(6,n);var _t=L.nu64=n=>new ea(n);L.u16be=n=>new Vt(2,n);L.u24be=n=>new Vt(3,n);L.u32be=n=>new Vt(4,n);L.u40be=n=>new Vt(5,n);L.u48be=n=>new Vt(6,n);L.nu64be=n=>new ta(n);L.s8=n=>new Nr(1,n);L.s16=n=>new Nr(2,n);L.s24=n=>new Nr(3,n);L.s32=n=>new Nr(4,n);L.s40=n=>new Nr(5,n);L.s48=n=>new Nr(6,n);var zt=L.ns64=n=>new ra(n);L.s16be=n=>new un(2,n);L.s24be=n=>new un(3,n);L.s32be=n=>new un(4,n);L.s40be=n=>new un(5,n);L.s48be=n=>new un(6,n);L.ns64be=n=>new na(n);L.f32=n=>new sa(n);L.f32be=n=>new oa(n);L.f64=n=>new ia(n);L.f64be=n=>new aa(n);var he=L.struct=(n,e,t)=>new fa(n,e,t);L.bits=(n,e,t)=>new vo(n,e,t);var Pt=L.seq=(n,e,t)=>new ca(n,e,t);L.union=(n,e,t)=>new mo(n,e,t);L.unionLayoutDiscriminator=(n,e)=>new Zn(n,e);var rt=L.blob=(n,e)=>new da(n,e);L.cstr=n=>new ha(n);L.utf8=(n,e)=>new pa(n,e);L.constant=(n,e)=>new ga(n,e);var Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});function nu(n){{const e=Buffer.from(n);e.reverse();const t=e.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}var su=Tn.toBigIntLE=nu;function ou(n){{const e=n.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}Tn.toBigIntBE=ou;function iu(n,e){{const t=n.toString(16),r=Buffer.from(t.padStart(e*2,"0").slice(0,e*2),"hex");return r.reverse(),r}}var au=Tn.toBufferLE=iu;function cu(n,e){{const t=n.toString(16);return Buffer.from(t.padStart(e*2,"0").slice(0,e*2),"hex")}}Tn.toBufferBE=cu;class fu extends TypeError{constructor(e,t){let r;const{message:s,...o}=e,{path:i}=e,c=i.length===0?s:"At path: "+i.join(".")+" -- "+s;super(c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>{var u;return(u=r)!=null?u:r=[e,...t()]}}}function uu(n){return Sr(n)&&typeof n[Symbol.iterator]=="function"}function Sr(n){return typeof n=="object"&&n!=null}function Yt(n){return typeof n=="string"?JSON.stringify(n):""+n}function lu(n){const{done:e,value:t}=n.next();return e?void 0:t}function du(n,e,t,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:s,branch:o}=e,{type:i}=t,{refinement:c,message:u="Expected a value of type `"+i+"`"+(c?" with refinement `"+c+"`":"")+", but received: `"+Yt(r)+"`"}=n;return{value:r,type:i,refinement:c,key:s[s.length-1],path:s,branch:o,...n,message:u}}function*Go(n,e,t,r){uu(n)||(n=[n]);for(const s of n){const o=du(s,e,t,r);o&&(yield o)}}function*_o(n,e,t={}){const{path:r=[],branch:s=[n],coerce:o=!1,mask:i=!1}=t,c={path:r,branch:s};if(o&&(n=e.coercer(n,c),i&&e.type!=="type"&&Sr(e.schema)&&Sr(n)&&!Array.isArray(n)))for(const p in n)e.schema[p]===void 0&&delete n[p];let u=!0;for(const p of e.validator(n,c))u=!1,yield[p,void 0];for(let[p,g,b]of e.entries(n,c)){const I=_o(g,b,{path:p===void 0?r:[...r,p],branch:p===void 0?s:[...s,g],coerce:o,mask:i});for(const S of I)S[0]?(u=!1,yield[S[0],void 0]):o&&(g=S[1],p===void 0?n=g:n instanceof Map?n.set(p,g):n instanceof Set?n.add(g):Sr(n)&&(n[p]=g))}if(u)for(const p of e.refiner(n,c))u=!1,yield[p,void 0];u&&(yield[void 0,n])}let sr=class{constructor(e){const{type:t,schema:r,validator:s,refiner:o,coercer:i=u=>u,entries:c=function*(){}}=e;this.type=t,this.schema=r,this.entries=c,this.coercer=i,s?this.validator=(u,p)=>{const g=s(u,p);return Go(g,p,this,u)}:this.validator=()=>[],o?this.refiner=(u,p)=>{const g=o(u,p);return Go(g,p,this,u)}:this.refiner=()=>[]}assert(e){return hu(e,this)}create(e){return ee(e,this)}is(e){return ya(e,this)}mask(e){return pu(e,this)}validate(e,t={}){return Cn(e,this,t)}};function hu(n,e){const t=Cn(n,e);if(t[0])throw t[0]}function ee(n,e){const t=Cn(n,e,{coerce:!0});if(t[0])throw t[0];return t[1]}function pu(n,e){const t=Cn(n,e,{coerce:!0,mask:!0});if(t[0])throw t[0];return t[1]}function ya(n,e){return!Cn(n,e)[0]}function Cn(n,e,t={}){const r=_o(n,e,t),s=lu(r);return s[0]?[new fu(s[0],function*(){for(const i of r)i[0]&&(yield i[0])}),void 0]:[void 0,s[1]]}function Mr(n,e){return new sr({type:n,schema:null,validator:e})}function gu(){return Mr("any",()=>!0)}function se(n){return new sr({type:"array",schema:n,*entries(e){if(n&&Array.isArray(e))for(const[t,r]of e.entries())yield[t,r,n]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||"Expected an array value, but received: "+Yt(e)}})}function tr(){return Mr("boolean",n=>typeof n=="boolean")}function Eo(n){return Mr("instance",e=>e instanceof n||"Expected a `"+n.name+"` instance, but received: "+Yt(e))}function at(n){const e=Yt(n),t=typeof n;return new sr({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?n:null,validator(r){return r===n||"Expected the literal `"+e+"`, but received: "+Yt(r)}})}function yu(){return Mr("never",()=>!1)}function oe(n){return new sr({...n,validator:(e,t)=>e===null||n.validator(e,t),refiner:(e,t)=>e===null||n.refiner(e,t)})}function T(){return Mr("number",n=>typeof n=="number"&&!isNaN(n)||"Expected a number, but received: "+Yt(n))}function Se(n){return new sr({...n,validator:(e,t)=>e===void 0||n.validator(e,t),refiner:(e,t)=>e===void 0||n.refiner(e,t)})}function wa(n,e){return new sr({type:"record",schema:null,*entries(t){if(Sr(t))for(const r in t){const s=t[r];yield[r,r,n],yield[r,s,e]}},validator(t){return Sr(t)||"Expected an object, but received: "+Yt(t)}})}function Q(){return Mr("string",n=>typeof n=="string"||"Expected a string, but received: "+Yt(n))}function Ao(n){const e=yu();return new sr({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const r=Math.max(n.length,t.length);for(let s=0;s<r;s++)yield[s,t[s],n[s]||e]}},validator(t){return Array.isArray(t)||"Expected an array, but received: "+Yt(t)}})}function $(n){const e=Object.keys(n);return new sr({type:"type",schema:n,*entries(t){if(Sr(t))for(const r of e)yield[r,t[r],n[r]]},validator(t){return Sr(t)||"Expected an object, but received: "+Yt(t)}})}function Nt(n){const e=n.map(t=>t.type).join(" | ");return new sr({type:"union",schema:null,validator(t,r){const s=[];for(const o of n){const[...i]=_o(t,o,r),[c]=i;if(c[0])for(const[u]of i)u&&s.push(u);else return[]}return["Expected the value to satisfy a union of `"+e+"`, but received: "+Yt(t),...s]}})}function Ln(){return Mr("unknown",()=>!0)}function Pn(n,e,t){return new sr({...n,coercer:(r,s)=>ya(r,e)?n.coercer(t(r,s),s):n.coercer(r,s)})}var Kn,wu=new Uint8Array(16);function ba(){if(!Kn&&(Kn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Kn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Kn(wu)}const bu=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function os(n){return typeof n=="string"&&bu.test(n)}var St=[];for(var vs=0;vs<256;++vs)St.push((vs+256).toString(16).substr(1));function is(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(St[n[e+0]]+St[n[e+1]]+St[n[e+2]]+St[n[e+3]]+"-"+St[n[e+4]]+St[n[e+5]]+"-"+St[n[e+6]]+St[n[e+7]]+"-"+St[n[e+8]]+St[n[e+9]]+"-"+St[n[e+10]]+St[n[e+11]]+St[n[e+12]]+St[n[e+13]]+St[n[e+14]]+St[n[e+15]]).toLowerCase();if(!os(t))throw TypeError("Stringified UUID is invalid");return t}var Vo,Ss,_s=0,Es=0;function xu(n,e,t){var r=e&&t||0,s=e||new Array(16);n=n||{};var o=n.node||Vo,i=n.clockseq!==void 0?n.clockseq:Ss;if(o==null||i==null){var c=n.random||(n.rng||ba)();o==null&&(o=Vo=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),i==null&&(i=Ss=(c[6]<<8|c[7])&16383)}var u=n.msecs!==void 0?n.msecs:Date.now(),p=n.nsecs!==void 0?n.nsecs:Es+1,g=u-_s+(p-Es)/1e4;if(g<0&&n.clockseq===void 0&&(i=i+1&16383),(g<0||u>_s)&&n.nsecs===void 0&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_s=u,Es=p,Ss=i,u+=122192928e5;var b=((u&268435455)*1e4+p)%4294967296;s[r++]=b>>>24&255,s[r++]=b>>>16&255,s[r++]=b>>>8&255,s[r++]=b&255;var I=u/4294967296*1e4&268435455;s[r++]=I>>>8&255,s[r++]=I&255,s[r++]=I>>>24&15|16,s[r++]=I>>>16&255,s[r++]=i>>>8|128,s[r++]=i&255;for(var S=0;S<6;++S)s[r+S]=o[S];return e||is(s)}function xa(n){if(!os(n))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(n.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(n.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(n.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(n.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(n.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function mu(n){n=unescape(encodeURIComponent(n));for(var e=[],t=0;t<n.length;++t)e.push(n.charCodeAt(t));return e}var vu="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Su="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function ma(n,e,t){function r(s,o,i,c){if(typeof s=="string"&&(s=mu(s)),typeof o=="string"&&(o=xa(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+s.length);if(u.set(o),u.set(s,o.length),u=t(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,i){c=c||0;for(var p=0;p<16;++p)i[c+p]=u[p];return i}return is(u)}try{r.name=n}catch{}return r.DNS=vu,r.URL=Su,r}function _u(n){if(typeof n=="string"){var e=unescape(encodeURIComponent(n));n=new Uint8Array(e.length);for(var t=0;t<e.length;++t)n[t]=e.charCodeAt(t)}return Eu(Au(Bu(n),n.length*8))}function Eu(n){for(var e=[],t=n.length*32,r="0123456789abcdef",s=0;s<t;s+=8){var o=n[s>>5]>>>s%32&255,i=parseInt(r.charAt(o>>>4&15)+r.charAt(o&15),16);e.push(i)}return e}function va(n){return(n+64>>>9<<4)+14+1}function Au(n,e){n[e>>5]|=128<<e%32,n[va(e)-1]=e;for(var t=1732584193,r=-271733879,s=-1732584194,o=271733878,i=0;i<n.length;i+=16){var c=t,u=r,p=s,g=o;t=Rt(t,r,s,o,n[i],7,-680876936),o=Rt(o,t,r,s,n[i+1],12,-389564586),s=Rt(s,o,t,r,n[i+2],17,606105819),r=Rt(r,s,o,t,n[i+3],22,-1044525330),t=Rt(t,r,s,o,n[i+4],7,-176418897),o=Rt(o,t,r,s,n[i+5],12,1200080426),s=Rt(s,o,t,r,n[i+6],17,-1473231341),r=Rt(r,s,o,t,n[i+7],22,-45705983),t=Rt(t,r,s,o,n[i+8],7,1770035416),o=Rt(o,t,r,s,n[i+9],12,-1958414417),s=Rt(s,o,t,r,n[i+10],17,-42063),r=Rt(r,s,o,t,n[i+11],22,-1990404162),t=Rt(t,r,s,o,n[i+12],7,1804603682),o=Rt(o,t,r,s,n[i+13],12,-40341101),s=Rt(s,o,t,r,n[i+14],17,-1502002290),r=Rt(r,s,o,t,n[i+15],22,1236535329),t=Tt(t,r,s,o,n[i+1],5,-165796510),o=Tt(o,t,r,s,n[i+6],9,-1069501632),s=Tt(s,o,t,r,n[i+11],14,643717713),r=Tt(r,s,o,t,n[i],20,-373897302),t=Tt(t,r,s,o,n[i+5],5,-701558691),o=Tt(o,t,r,s,n[i+10],9,38016083),s=Tt(s,o,t,r,n[i+15],14,-660478335),r=Tt(r,s,o,t,n[i+4],20,-405537848),t=Tt(t,r,s,o,n[i+9],5,568446438),o=Tt(o,t,r,s,n[i+14],9,-1019803690),s=Tt(s,o,t,r,n[i+3],14,-187363961),r=Tt(r,s,o,t,n[i+8],20,1163531501),t=Tt(t,r,s,o,n[i+13],5,-1444681467),o=Tt(o,t,r,s,n[i+2],9,-51403784),s=Tt(s,o,t,r,n[i+7],14,1735328473),r=Tt(r,s,o,t,n[i+12],20,-1926607734),t=Ct(t,r,s,o,n[i+5],4,-378558),o=Ct(o,t,r,s,n[i+8],11,-2022574463),s=Ct(s,o,t,r,n[i+11],16,1839030562),r=Ct(r,s,o,t,n[i+14],23,-35309556),t=Ct(t,r,s,o,n[i+1],4,-1530992060),o=Ct(o,t,r,s,n[i+4],11,1272893353),s=Ct(s,o,t,r,n[i+7],16,-155497632),r=Ct(r,s,o,t,n[i+10],23,-1094730640),t=Ct(t,r,s,o,n[i+13],4,681279174),o=Ct(o,t,r,s,n[i],11,-358537222),s=Ct(s,o,t,r,n[i+3],16,-722521979),r=Ct(r,s,o,t,n[i+6],23,76029189),t=Ct(t,r,s,o,n[i+9],4,-640364487),o=Ct(o,t,r,s,n[i+12],11,-421815835),s=Ct(s,o,t,r,n[i+15],16,530742520),r=Ct(r,s,o,t,n[i+2],23,-995338651),t=Lt(t,r,s,o,n[i],6,-198630844),o=Lt(o,t,r,s,n[i+7],10,1126891415),s=Lt(s,o,t,r,n[i+14],15,-1416354905),r=Lt(r,s,o,t,n[i+5],21,-57434055),t=Lt(t,r,s,o,n[i+12],6,1700485571),o=Lt(o,t,r,s,n[i+3],10,-1894986606),s=Lt(s,o,t,r,n[i+10],15,-1051523),r=Lt(r,s,o,t,n[i+1],21,-2054922799),t=Lt(t,r,s,o,n[i+8],6,1873313359),o=Lt(o,t,r,s,n[i+15],10,-30611744),s=Lt(s,o,t,r,n[i+6],15,-1560198380),r=Lt(r,s,o,t,n[i+13],21,1309151649),t=Lt(t,r,s,o,n[i+4],6,-145523070),o=Lt(o,t,r,s,n[i+11],10,-1120210379),s=Lt(s,o,t,r,n[i+2],15,718787259),r=Lt(r,s,o,t,n[i+9],21,-343485551),t=vr(t,c),r=vr(r,u),s=vr(s,p),o=vr(o,g)}return[t,r,s,o]}function Bu(n){if(n.length===0)return[];for(var e=n.length*8,t=new Uint32Array(va(e)),r=0;r<e;r+=8)t[r>>5]|=(n[r/8]&255)<<r%32;return t}function vr(n,e){var t=(n&65535)+(e&65535),r=(n>>16)+(e>>16)+(t>>16);return r<<16|t&65535}function Iu(n,e){return n<<e|n>>>32-e}function as(n,e,t,r,s,o){return vr(Iu(vr(vr(e,n),vr(r,o)),s),t)}function Rt(n,e,t,r,s,o,i){return as(e&t|~e&r,n,e,s,o,i)}function Tt(n,e,t,r,s,o,i){return as(e&r|t&~r,n,e,s,o,i)}function Ct(n,e,t,r,s,o,i){return as(e^t^r,n,e,s,o,i)}function Lt(n,e,t,r,s,o,i){return as(t^(e|~r),n,e,s,o,i)}var ku=ma("v3",48,_u);const Ru=ku;function Tu(n,e,t){n=n||{};var r=n.random||(n.rng||ba)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(var s=0;s<16;++s)e[t+s]=r[s];return e}return is(r)}function Cu(n,e,t,r){switch(n){case 0:return e&t^~e&r;case 1:return e^t^r;case 2:return e&t^e&r^t&r;case 3:return e^t^r}}function As(n,e){return n<<e|n>>>32-e}function Lu(n){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var s=0;s<r.length;++s)n.push(r.charCodeAt(s))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var o=n.length/4+2,i=Math.ceil(o/16),c=new Array(i),u=0;u<i;++u){for(var p=new Uint32Array(16),g=0;g<16;++g)p[g]=n[u*64+g*4]<<24|n[u*64+g*4+1]<<16|n[u*64+g*4+2]<<8|n[u*64+g*4+3];c[u]=p}c[i-1][14]=(n.length-1)*8/Math.pow(2,32),c[i-1][14]=Math.floor(c[i-1][14]),c[i-1][15]=(n.length-1)*8&4294967295;for(var b=0;b<i;++b){for(var I=new Uint32Array(80),S=0;S<16;++S)I[S]=c[b][S];for(var m=16;m<80;++m)I[m]=As(I[m-3]^I[m-8]^I[m-14]^I[m-16],1);for(var y=t[0],x=t[1],B=t[2],C=t[3],v=t[4],K=0;K<80;++K){var A=Math.floor(K/20),O=As(y,5)+Cu(A,x,B,C)+v+e[A]+I[K]>>>0;v=C,C=B,B=As(x,30)>>>0,x=y,y=O}t[0]=t[0]+y>>>0,t[1]=t[1]+x>>>0,t[2]=t[2]+B>>>0,t[3]=t[3]+C>>>0,t[4]=t[4]+v>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var Pu=ma("v5",80,Lu);const Uu=Pu,Ou="00000000-0000-0000-0000-000000000000";function Nu(n){if(!os(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const Mu=Object.freeze(Object.defineProperty({__proto__:null,NIL:Ou,parse:xa,stringify:is,v1:xu,v3:Ru,v4:Tu,v5:Uu,validate:os,version:Nu},Symbol.toStringTag,{value:"Module"})),Sa=Ei(Mu),qu=Sa.v4,Fu=function(n,e,t,r){if(typeof n!="string")throw new TypeError(n+" must be a string");r=r||{};const s=typeof r.version=="number"?r.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const o={method:n};if(s===2&&(o.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");o.params=e}if(typeof t>"u"){const i=typeof r.generator=="function"?r.generator:function(){return qu()};o.id=i(o,r)}else s===2&&t===null?r.notificationIdNull&&(o.id=null):o.id=t;return o};var zu=Fu;const Ku=Sa.v4,Hu=zu,An=function(n,e){if(!(this instanceof An))return new An(n,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return Ku()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=n};var Du=An;An.prototype.request=function(n,e,t,r){const s=this;let o=null;const i=Array.isArray(n)&&typeof e=="function";if(this.options.version===1&&i)throw new TypeError("JSON-RPC 1.0 does not support batching");if(i||!i&&n&&typeof n=="object"&&typeof e=="function")r=e,o=n;else{typeof t=="function"&&(r=t,t=void 0);const p=typeof r=="function";try{o=Hu(n,e,t,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(g){if(p)return r(g);throw g}if(!p)return o}let u;try{u=JSON.stringify(o,this.options.replacer)}catch(p){return r(p)}return this.callServer(u,function(p,g){s._parseResponse(p,g,r)}),o};An.prototype._parseResponse=function(n,e,t){if(n){t(n);return}if(!e)return t();let r;try{r=JSON.parse(e,this.options.reviver)}catch(s){return t(s)}if(t.length===3)if(Array.isArray(r)){const s=function(i){return typeof i.error<"u"},o=function(i){return!s(i)};return t(null,r.filter(s),r.filter(o))}else return t(null,r.error,r.result);t(null,r)};const $u=on(Du);var _a={},Ea={exports:{}};(function(n){function e(t){return t&&t.__esModule?t:{default:t}}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(Ea);var Aa=Ea.exports,Bs={exports:{}},Is={exports:{}},Yo;function Un(){return Yo||(Yo=1,function(n){function e(t){"@babel/helpers - typeof";return n.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},n.exports.__esModule=!0,n.exports.default=n.exports,e(t)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(Is)),Is.exports}var Zo;function ju(){return Zo||(Zo=1,function(n){var e=Un().default;function t(){n.exports=t=function(){return s},n.exports.__esModule=!0,n.exports.default=n.exports;var r,s={},o=Object.prototype,i=o.hasOwnProperty,c=Object.defineProperty||function(_,k,N){_[k]=N.value},u=typeof Symbol=="function"?Symbol:{},p=u.iterator||"@@iterator",g=u.asyncIterator||"@@asyncIterator",b=u.toStringTag||"@@toStringTag";function I(_,k,N){return Object.defineProperty(_,k,{value:N,enumerable:!0,configurable:!0,writable:!0}),_[k]}try{I({},"")}catch{I=function(N,j,V){return N[j]=V}}function S(_,k,N,j){var V=k&&k.prototype instanceof K?k:K,G=Object.create(V.prototype),X=new Ae(j||[]);return c(G,"_invoke",{value:Qe(_,N,X)}),G}function m(_,k,N){try{return{type:"normal",arg:_.call(k,N)}}catch(j){return{type:"throw",arg:j}}}s.wrap=S;var y="suspendedStart",x="suspendedYield",B="executing",C="completed",v={};function K(){}function A(){}function O(){}var M={};I(M,p,function(){return this});var H=Object.getPrototypeOf,_e=H&&H(H(Z([])));_e&&_e!==o&&i.call(_e,p)&&(M=_e);var xe=O.prototype=K.prototype=Object.create(M);function me(_){["next","throw","return"].forEach(function(k){I(_,k,function(N){return this._invoke(k,N)})})}function He(_,k){function N(V,G,X,ue){var ve=m(_[V],_,G);if(ve.type!=="throw"){var Ze=ve.arg,Ke=Ze.value;return Ke&&e(Ke)=="object"&&i.call(Ke,"__await")?k.resolve(Ke.__await).then(function(Je){N("next",Je,X,ue)},function(Je){N("throw",Je,X,ue)}):k.resolve(Ke).then(function(Je){Ze.value=Je,X(Ze)},function(Je){return N("throw",Je,X,ue)})}ue(ve.arg)}var j;c(this,"_invoke",{value:function(G,X){function ue(){return new k(function(ve,Ze){N(G,X,ve,Ze)})}return j=j?j.then(ue,ue):ue()}})}function Qe(_,k,N){var j=y;return function(V,G){if(j===B)throw new Error("Generator is already running");if(j===C){if(V==="throw")throw G;return{value:r,done:!0}}for(N.method=V,N.arg=G;;){var X=N.delegate;if(X){var ue=pt(X,N);if(ue){if(ue===v)continue;return ue}}if(N.method==="next")N.sent=N._sent=N.arg;else if(N.method==="throw"){if(j===y)throw j=C,N.arg;N.dispatchException(N.arg)}else N.method==="return"&&N.abrupt("return",N.arg);j=B;var ve=m(_,k,N);if(ve.type==="normal"){if(j=N.done?C:x,ve.arg===v)continue;return{value:ve.arg,done:N.done}}ve.type==="throw"&&(j=C,N.method="throw",N.arg=ve.arg)}}}function pt(_,k){var N=k.method,j=_.iterator[N];if(j===r)return k.delegate=null,N==="throw"&&_.iterator.return&&(k.method="return",k.arg=r,pt(_,k),k.method==="throw")||N!=="return"&&(k.method="throw",k.arg=new TypeError("The iterator does not provide a '"+N+"' method")),v;var V=m(j,_.iterator,k.arg);if(V.type==="throw")return k.method="throw",k.arg=V.arg,k.delegate=null,v;var G=V.arg;return G?G.done?(k[_.resultName]=G.value,k.next=_.nextLoc,k.method!=="return"&&(k.method="next",k.arg=r),k.delegate=null,v):G:(k.method="throw",k.arg=new TypeError("iterator result is not an object"),k.delegate=null,v)}function J(_){var k={tryLoc:_[0]};1 in _&&(k.catchLoc=_[1]),2 in _&&(k.finallyLoc=_[2],k.afterLoc=_[3]),this.tryEntries.push(k)}function te(_){var k=_.completion||{};k.type="normal",delete k.arg,_.completion=k}function Ae(_){this.tryEntries=[{tryLoc:"root"}],_.forEach(J,this),this.reset(!0)}function Z(_){if(_||_===""){var k=_[p];if(k)return k.call(_);if(typeof _.next=="function")return _;if(!isNaN(_.length)){var N=-1,j=function V(){for(;++N<_.length;)if(i.call(_,N))return V.value=_[N],V.done=!1,V;return V.value=r,V.done=!0,V};return j.next=j}}throw new TypeError(e(_)+" is not iterable")}return A.prototype=O,c(xe,"constructor",{value:O,configurable:!0}),c(O,"constructor",{value:A,configurable:!0}),A.displayName=I(O,b,"GeneratorFunction"),s.isGeneratorFunction=function(_){var k=typeof _=="function"&&_.constructor;return!!k&&(k===A||(k.displayName||k.name)==="GeneratorFunction")},s.mark=function(_){return Object.setPrototypeOf?Object.setPrototypeOf(_,O):(_.__proto__=O,I(_,b,"GeneratorFunction")),_.prototype=Object.create(xe),_},s.awrap=function(_){return{__await:_}},me(He.prototype),I(He.prototype,g,function(){return this}),s.AsyncIterator=He,s.async=function(_,k,N,j,V){V===void 0&&(V=Promise);var G=new He(S(_,k,N,j),V);return s.isGeneratorFunction(k)?G:G.next().then(function(X){return X.done?X.value:G.next()})},me(xe),I(xe,b,"Generator"),I(xe,p,function(){return this}),I(xe,"toString",function(){return"[object Generator]"}),s.keys=function(_){var k=Object(_),N=[];for(var j in k)N.push(j);return N.reverse(),function V(){for(;N.length;){var G=N.pop();if(G in k)return V.value=G,V.done=!1,V}return V.done=!0,V}},s.values=Z,Ae.prototype={constructor:Ae,reset:function(k){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(te),!k)for(var N in this)N.charAt(0)==="t"&&i.call(this,N)&&!isNaN(+N.slice(1))&&(this[N]=r)},stop:function(){this.done=!0;var k=this.tryEntries[0].completion;if(k.type==="throw")throw k.arg;return this.rval},dispatchException:function(k){if(this.done)throw k;var N=this;function j(Ze,Ke){return X.type="throw",X.arg=k,N.next=Ze,Ke&&(N.method="next",N.arg=r),!!Ke}for(var V=this.tryEntries.length-1;V>=0;--V){var G=this.tryEntries[V],X=G.completion;if(G.tryLoc==="root")return j("end");if(G.tryLoc<=this.prev){var ue=i.call(G,"catchLoc"),ve=i.call(G,"finallyLoc");if(ue&&ve){if(this.prev<G.catchLoc)return j(G.catchLoc,!0);if(this.prev<G.finallyLoc)return j(G.finallyLoc)}else if(ue){if(this.prev<G.catchLoc)return j(G.catchLoc,!0)}else{if(!ve)throw new Error("try statement without catch or finally");if(this.prev<G.finallyLoc)return j(G.finallyLoc)}}}},abrupt:function(k,N){for(var j=this.tryEntries.length-1;j>=0;--j){var V=this.tryEntries[j];if(V.tryLoc<=this.prev&&i.call(V,"finallyLoc")&&this.prev<V.finallyLoc){var G=V;break}}G&&(k==="break"||k==="continue")&&G.tryLoc<=N&&N<=G.finallyLoc&&(G=null);var X=G?G.completion:{};return X.type=k,X.arg=N,G?(this.method="next",this.next=G.finallyLoc,v):this.complete(X)},complete:function(k,N){if(k.type==="throw")throw k.arg;return k.type==="break"||k.type==="continue"?this.next=k.arg:k.type==="return"?(this.rval=this.arg=k.arg,this.method="return",this.next="end"):k.type==="normal"&&N&&(this.next=N),v},finish:function(k){for(var N=this.tryEntries.length-1;N>=0;--N){var j=this.tryEntries[N];if(j.finallyLoc===k)return this.complete(j.completion,j.afterLoc),te(j),v}},catch:function(k){for(var N=this.tryEntries.length-1;N>=0;--N){var j=this.tryEntries[N];if(j.tryLoc===k){var V=j.completion;if(V.type==="throw"){var G=V.arg;te(j)}return G}}throw new Error("illegal catch attempt")},delegateYield:function(k,N,j){return this.delegate={iterator:Z(k),resultName:N,nextLoc:j},this.method==="next"&&(this.arg=r),v}},s}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports}(Bs)),Bs.exports}var ks,Xo;function Wu(){if(Xo)return ks;Xo=1;var n=ju()();ks=n;try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}return ks}var Rs={exports:{}},Jo;function Gu(){return Jo||(Jo=1,function(n){function e(r,s,o,i,c,u,p){try{var g=r[u](p),b=g.value}catch(I){o(I);return}g.done?s(b):Promise.resolve(b).then(i,c)}function t(r){return function(){var s=this,o=arguments;return new Promise(function(i,c){var u=r.apply(s,o);function p(b){e(u,i,c,p,g,"next",b)}function g(b){e(u,i,c,p,g,"throw",b)}p(void 0)})}}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports}(Rs)),Rs.exports}var Ts={exports:{}},Qo;function Ba(){return Qo||(Qo=1,function(n){function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(Ts)),Ts.exports}var Cs={exports:{}},Ls={exports:{}},Ps={exports:{}},ei;function Vu(){return ei||(ei=1,function(n){var e=Un().default;function t(r,s){if(e(r)!=="object"||r===null)return r;var o=r[Symbol.toPrimitive];if(o!==void 0){var i=o.call(r,s||"default");if(e(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(r)}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports}(Ps)),Ps.exports}var ti;function Yu(){return ti||(ti=1,function(n){var e=Un().default,t=Vu();function r(s){var o=t(s,"string");return e(o)==="symbol"?o:String(o)}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports}(Ls)),Ls.exports}var ri;function Ia(){return ri||(ri=1,function(n){var e=Yu();function t(s,o){for(var i=0;i<o.length;i++){var c=o[i];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(s,e(c.key),c)}}function r(s,o,i){return o&&t(s.prototype,o),i&&t(s,i),Object.defineProperty(s,"prototype",{writable:!1}),s}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports}(Cs)),Cs.exports}var Us={exports:{}},Os={exports:{}},ni;function Zu(){return ni||(ni=1,function(n){function e(t,r){return n.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,i){return o.__proto__=i,o},n.exports.__esModule=!0,n.exports.default=n.exports,e(t,r)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(Os)),Os.exports}var si;function ka(){return si||(si=1,function(n){var e=Zu();function t(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),s&&e(r,s)}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports}(Us)),Us.exports}var Ns={exports:{}},Ms={exports:{}},oi;function Xu(){return oi||(oi=1,function(n){function e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(Ms)),Ms.exports}var ii;function Ra(){return ii||(ii=1,function(n){var e=Un().default,t=Xu();function r(s,o){if(o&&(e(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t(s)}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports}(Ns)),Ns.exports}var qs={exports:{}},ai;function Ta(){return ai||(ai=1,function(n){function e(t){return n.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},n.exports.__esModule=!0,n.exports.default=n.exports,e(t)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(qs)),qs.exports}var Fs={exports:{}},ci;function Ca(){return ci||(ci=1,function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function s(u,p,g){this.fn=u,this.context=p,this.once=g||!1}function o(u,p,g,b,I){if(typeof g!="function")throw new TypeError("The listener must be a function");var S=new s(g,b||u,I),m=t?t+p:p;return u._events[m]?u._events[m].fn?u._events[m]=[u._events[m],S]:u._events[m].push(S):(u._events[m]=S,u._eventsCount++),u}function i(u,p){--u._eventsCount===0?u._events=new r:delete u._events[p]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var p=[],g,b;if(this._eventsCount===0)return p;for(b in g=this._events)e.call(g,b)&&p.push(t?b.slice(1):b);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(g)):p},c.prototype.listeners=function(p){var g=t?t+p:p,b=this._events[g];if(!b)return[];if(b.fn)return[b.fn];for(var I=0,S=b.length,m=new Array(S);I<S;I++)m[I]=b[I].fn;return m},c.prototype.listenerCount=function(p){var g=t?t+p:p,b=this._events[g];return b?b.fn?1:b.length:0},c.prototype.emit=function(p,g,b,I,S,m){var y=t?t+p:p;if(!this._events[y])return!1;var x=this._events[y],B=arguments.length,C,v;if(x.fn){switch(x.once&&this.removeListener(p,x.fn,void 0,!0),B){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,g),!0;case 3:return x.fn.call(x.context,g,b),!0;case 4:return x.fn.call(x.context,g,b,I),!0;case 5:return x.fn.call(x.context,g,b,I,S),!0;case 6:return x.fn.call(x.context,g,b,I,S,m),!0}for(v=1,C=new Array(B-1);v<B;v++)C[v-1]=arguments[v];x.fn.apply(x.context,C)}else{var K=x.length,A;for(v=0;v<K;v++)switch(x[v].once&&this.removeListener(p,x[v].fn,void 0,!0),B){case 1:x[v].fn.call(x[v].context);break;case 2:x[v].fn.call(x[v].context,g);break;case 3:x[v].fn.call(x[v].context,g,b);break;case 4:x[v].fn.call(x[v].context,g,b,I);break;default:if(!C)for(A=1,C=new Array(B-1);A<B;A++)C[A-1]=arguments[A];x[v].fn.apply(x[v].context,C)}}return!0},c.prototype.on=function(p,g,b){return o(this,p,g,b,!1)},c.prototype.once=function(p,g,b){return o(this,p,g,b,!0)},c.prototype.removeListener=function(p,g,b,I){var S=t?t+p:p;if(!this._events[S])return this;if(!g)return i(this,S),this;var m=this._events[S];if(m.fn)m.fn===g&&(!I||m.once)&&(!b||m.context===b)&&i(this,S);else{for(var y=0,x=[],B=m.length;y<B;y++)(m[y].fn!==g||I&&!m[y].once||b&&m[y].context!==b)&&x.push(m[y]);x.length?this._events[S]=x.length===1?x[0]:x:i(this,S)}return this},c.prototype.removeAllListeners=function(p){var g;return p?(g=t?t+p:p,this._events[g]&&i(this,g)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=t,c.EventEmitter=c,n.exports=c}(Fs)),Fs.exports}(function(n){var e=Aa;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=e(Wu()),r=e(Gu()),s=e(Un()),o=e(Ba()),i=e(Ia()),c=e(ka()),u=e(Ra()),p=e(Ta()),g=Ca();function b(y){var x=I();return function(){var C=(0,p.default)(y),v;if(x){var K=(0,p.default)(this).constructor;v=Reflect.construct(C,arguments,K)}else v=C.apply(this,arguments);return(0,u.default)(this,v)}}function I(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var S=function(y,x){var B={};for(var C in y)Object.prototype.hasOwnProperty.call(y,C)&&x.indexOf(C)<0&&(B[C]=y[C]);if(y!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,C=Object.getOwnPropertySymbols(y);v<C.length;v++)x.indexOf(C[v])<0&&Object.prototype.propertyIsEnumerable.call(y,C[v])&&(B[C[v]]=y[C[v]]);return B},m=function(y){(0,c.default)(B,y);var x=b(B);function B(C){var v,K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ws://localhost:8080",A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},O=arguments.length>3?arguments[3]:void 0;(0,o.default)(this,B);var M=A.autoconnect,H=M===void 0?!0:M,_e=A.reconnect,xe=_e===void 0?!0:_e,me=A.reconnect_interval,He=me===void 0?1e3:me,Qe=A.max_reconnects,pt=Qe===void 0?5:Qe,J=S(A,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return v=x.call(this),v.webSocketFactory=C,v.queue={},v.rpc_id=0,v.address=K,v.autoconnect=H,v.ready=!1,v.reconnect=xe,v.reconnect_timer_id=void 0,v.reconnect_interval=He,v.max_reconnects=pt,v.rest_options=J,v.current_reconnects=0,v.generate_request_id=O||function(){return++v.rpc_id},v.autoconnect&&v._connect(v.address,Object.assign({autoconnect:v.autoconnect,reconnect:v.reconnect,reconnect_interval:v.reconnect_interval,max_reconnects:v.max_reconnects},v.rest_options)),v}return(0,i.default)(B,[{key:"connect",value:function(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function(v,K,A,O){var M=this;return!O&&(0,s.default)(A)==="object"&&(O=A,A=null),new Promise(function(H,_e){if(!M.ready)return _e(new Error("socket not ready"));var xe=M.generate_request_id(v,K),me={jsonrpc:"2.0",method:v,params:K||null,id:xe};M.socket.send(JSON.stringify(me),O,function(He){if(He)return _e(He);M.queue[xe]={promise:[H,_e]},A&&(M.queue[xe].timeout=setTimeout(function(){delete M.queue[xe],_e(new Error("reply timeout"))},A))})})}},{key:"login",value:function(){var C=(0,r.default)(t.default.mark(function K(A){var O;return t.default.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,this.call("rpc.login",A);case 2:if(O=H.sent,O){H.next=5;break}throw new Error("authentication failed");case 5:return H.abrupt("return",O);case 6:case"end":return H.stop()}},K,this)}));function v(K){return C.apply(this,arguments)}return v}()},{key:"listMethods",value:function(){var C=(0,r.default)(t.default.mark(function K(){return t.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,this.call("__listMethods");case 2:return O.abrupt("return",O.sent);case 3:case"end":return O.stop()}},K,this)}));function v(){return C.apply(this,arguments)}return v}()},{key:"notify",value:function(v,K){var A=this;return new Promise(function(O,M){if(!A.ready)return M(new Error("socket not ready"));var H={jsonrpc:"2.0",method:v,params:K||null};A.socket.send(JSON.stringify(H),function(_e){if(_e)return M(_e);O()})})}},{key:"subscribe",value:function(){var C=(0,r.default)(t.default.mark(function K(A){var O;return t.default.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return typeof A=="string"&&(A=[A]),H.next=3,this.call("rpc.on",A);case 3:if(O=H.sent,!(typeof A=="string"&&O[A]!=="ok")){H.next=6;break}throw new Error("Failed subscribing to an event '"+A+"' with: "+O[A]);case 6:return H.abrupt("return",O);case 7:case"end":return H.stop()}},K,this)}));function v(K){return C.apply(this,arguments)}return v}()},{key:"unsubscribe",value:function(){var C=(0,r.default)(t.default.mark(function K(A){var O;return t.default.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return typeof A=="string"&&(A=[A]),H.next=3,this.call("rpc.off",A);case 3:if(O=H.sent,!(typeof A=="string"&&O[A]!=="ok")){H.next=6;break}throw new Error("Failed unsubscribing from an event with: "+O);case 6:return H.abrupt("return",O);case 7:case"end":return H.stop()}},K,this)}));function v(K){return C.apply(this,arguments)}return v}()},{key:"close",value:function(v,K){this.socket.close(v||1e3,K)}},{key:"_connect",value:function(v,K){var A=this;clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(v,K),this.socket.addEventListener("open",function(){A.ready=!0,A.emit("open"),A.current_reconnects=0}),this.socket.addEventListener("message",function(O){var M=O.data;M instanceof ArrayBuffer&&(M=Buffer.from(M).toString());try{M=JSON.parse(M)}catch{return}if(M.notification&&A.listeners(M.notification).length){if(!Object.keys(M.params).length)return A.emit(M.notification);var H=[M.notification];if(M.params.constructor===Object)H.push(M.params);else for(var _e=0;_e<M.params.length;_e++)H.push(M.params[_e]);return Promise.resolve().then(function(){A.emit.apply(A,H)})}if(!A.queue[M.id])return M.method&&M.params?Promise.resolve().then(function(){A.emit(M.method,M.params)}):void 0;"error"in M=="result"in M&&A.queue[M.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),A.queue[M.id].timeout&&clearTimeout(A.queue[M.id].timeout),M.error?A.queue[M.id].promise[1](M.error):A.queue[M.id].promise[0](M.result),delete A.queue[M.id]}),this.socket.addEventListener("error",function(O){return A.emit("error",O)}),this.socket.addEventListener("close",function(O){var M=O.code,H=O.reason;A.ready&&setTimeout(function(){return A.emit("close",M,H)},0),A.ready=!1,A.socket=void 0,M!==1e3&&(A.current_reconnects++,A.reconnect&&(A.max_reconnects>A.current_reconnects||A.max_reconnects===0)&&(A.reconnect_timer_id=setTimeout(function(){return A._connect(v,K)},A.reconnect_interval)))})}}]),B}(g.EventEmitter);n.default=m})(_a);const Ju=on(_a);var La={};(function(n){var e=Aa;Object.defineProperty(n,"__esModule",{value:!0}),n.default=b;var t=e(Ba()),r=e(Ia()),s=e(ka()),o=e(Ra()),i=e(Ta()),c=Ca();function u(I){var S=p();return function(){var y=(0,i.default)(I),x;if(S){var B=(0,i.default)(this).constructor;x=Reflect.construct(y,arguments,B)}else x=y.apply(this,arguments);return(0,o.default)(this,x)}}function p(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var g=function(I){(0,s.default)(m,I);var S=u(m);function m(y,x,B){var C;return(0,t.default)(this,m),C=S.call(this),C.socket=new window.WebSocket(y,B),C.socket.onopen=function(){return C.emit("open")},C.socket.onmessage=function(v){return C.emit("message",v.data)},C.socket.onerror=function(v){return C.emit("error",v)},C.socket.onclose=function(v){C.emit("close",v.code,v.reason)},C}return(0,r.default)(m,[{key:"send",value:function(x,B,C){var v=C||B;try{this.socket.send(x),v()}catch(K){v(K)}}},{key:"close",value:function(x,B){this.socket.close(x,B)}},{key:"addEventListener",value:function(x,B,C){this.socket.addEventListener(x,B,C)}}]),m}(c.EventEmitter);function b(I,S){return new g(I,S)}})(La);const Qu=on(La);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function el(n){const e=fo(n);an(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:r,a:s}=e;if(t){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:tl,hexToBytes:rl}=af,Cr={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){const{Err:e}=Cr;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");const t=n[1],r=n.subarray(2,t+2);if(!t||r.length!==t)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:tl(r),l:n.subarray(t+2)}},toSig(n){const{Err:e}=Cr,t=typeof n=="string"?rl(n):n;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let r=t.length;if(r<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:o}=Cr._parseInt(t.subarray(2)),{d:i,l:c}=Cr._parseInt(o);if(c.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:i}},hexFromSig(n){const e=p=>Number.parseInt(p[0],16)&8?"00"+p:p,t=p=>{const g=p.toString(16);return g.length&1?`0${g}`:g},r=e(t(n.s)),s=e(t(n.r)),o=r.length/2,i=s.length/2,c=t(o),u=t(i);return`30${t(i+o+4)}02${u}${s}02${c}${r}`}},fr=BigInt(0),$t=BigInt(1);BigInt(2);const fi=BigInt(3);BigInt(4);function nl(n){const e=el(n),{Fp:t}=e,r=e.toBytes||((m,y,x)=>{const B=y.toAffine();return Or(Uint8Array.from([4]),t.toBytes(B.x),t.toBytes(B.y))}),s=e.fromBytes||(m=>{const y=m.subarray(1),x=t.fromBytes(y.subarray(0,t.BYTES)),B=t.fromBytes(y.subarray(t.BYTES,2*t.BYTES));return{x,y:B}});function o(m){const{a:y,b:x}=e,B=t.sqr(m),C=t.mul(B,m);return t.add(t.add(C,t.mul(m,y)),x)}if(!t.eql(t.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function i(m){return typeof m=="bigint"&&fr<m&&m<e.n}function c(m){if(!i(m))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(m){const{allowedPrivateKeyLengths:y,nByteLength:x,wrapPrivateKey:B,n:C}=e;if(y&&typeof m!="bigint"){if(m instanceof Uint8Array&&(m=Ur(m)),typeof m!="string"||!y.includes(m.length))throw new Error("Invalid key");m=m.padStart(x*2,"0")}let v;try{v=typeof m=="bigint"?m:Lr(mt("private key",m,x))}catch{throw new Error(`private key must be ${x} bytes, hex or bigint, not ${typeof m}`)}return B&&(v=it(v,C)),c(v),v}const p=new Map;function g(m){if(!(m instanceof b))throw new Error("ProjectivePoint expected")}class b{constructor(y,x,B){if(this.px=y,this.py=x,this.pz=B,y==null||!t.isValid(y))throw new Error("x required");if(x==null||!t.isValid(x))throw new Error("y required");if(B==null||!t.isValid(B))throw new Error("z required")}static fromAffine(y){const{x,y:B}=y||{};if(!y||!t.isValid(x)||!t.isValid(B))throw new Error("invalid affine point");if(y instanceof b)throw new Error("projective point not allowed");const C=v=>t.eql(v,t.ZERO);return C(x)&&C(B)?b.ZERO:new b(x,B,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(y){const x=t.invertBatch(y.map(B=>B.pz));return y.map((B,C)=>B.toAffine(x[C])).map(b.fromAffine)}static fromHex(y){const x=b.fromAffine(s(mt("pointHex",y)));return x.assertValidity(),x}static fromPrivateKey(y){return b.BASE.multiply(u(y))}_setWindowSize(y){this._WINDOW_SIZE=y,p.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:y,y:x}=this.toAffine();if(!t.isValid(y)||!t.isValid(x))throw new Error("bad point: x or y not FE");const B=t.sqr(x),C=o(y);if(!t.eql(B,C))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y}=this.toAffine();if(t.isOdd)return!t.isOdd(y);throw new Error("Field doesn't support isOdd")}equals(y){g(y);const{px:x,py:B,pz:C}=this,{px:v,py:K,pz:A}=y,O=t.eql(t.mul(x,A),t.mul(v,C)),M=t.eql(t.mul(B,A),t.mul(K,C));return O&&M}negate(){return new b(this.px,t.neg(this.py),this.pz)}double(){const{a:y,b:x}=e,B=t.mul(x,fi),{px:C,py:v,pz:K}=this;let A=t.ZERO,O=t.ZERO,M=t.ZERO,H=t.mul(C,C),_e=t.mul(v,v),xe=t.mul(K,K),me=t.mul(C,v);return me=t.add(me,me),M=t.mul(C,K),M=t.add(M,M),A=t.mul(y,M),O=t.mul(B,xe),O=t.add(A,O),A=t.sub(_e,O),O=t.add(_e,O),O=t.mul(A,O),A=t.mul(me,A),M=t.mul(B,M),xe=t.mul(y,xe),me=t.sub(H,xe),me=t.mul(y,me),me=t.add(me,M),M=t.add(H,H),H=t.add(M,H),H=t.add(H,xe),H=t.mul(H,me),O=t.add(O,H),xe=t.mul(v,K),xe=t.add(xe,xe),H=t.mul(xe,me),A=t.sub(A,H),M=t.mul(xe,_e),M=t.add(M,M),M=t.add(M,M),new b(A,O,M)}add(y){g(y);const{px:x,py:B,pz:C}=this,{px:v,py:K,pz:A}=y;let O=t.ZERO,M=t.ZERO,H=t.ZERO;const _e=e.a,xe=t.mul(e.b,fi);let me=t.mul(x,v),He=t.mul(B,K),Qe=t.mul(C,A),pt=t.add(x,B),J=t.add(v,K);pt=t.mul(pt,J),J=t.add(me,He),pt=t.sub(pt,J),J=t.add(x,C);let te=t.add(v,A);return J=t.mul(J,te),te=t.add(me,Qe),J=t.sub(J,te),te=t.add(B,C),O=t.add(K,A),te=t.mul(te,O),O=t.add(He,Qe),te=t.sub(te,O),H=t.mul(_e,J),O=t.mul(xe,Qe),H=t.add(O,H),O=t.sub(He,H),H=t.add(He,H),M=t.mul(O,H),He=t.add(me,me),He=t.add(He,me),Qe=t.mul(_e,Qe),J=t.mul(xe,J),He=t.add(He,Qe),Qe=t.sub(me,Qe),Qe=t.mul(_e,Qe),J=t.add(J,Qe),me=t.mul(He,J),M=t.add(M,me),me=t.mul(te,J),O=t.mul(pt,O),O=t.sub(O,me),me=t.mul(pt,He),H=t.mul(te,H),H=t.add(H,me),new b(O,M,H)}subtract(y){return this.add(y.negate())}is0(){return this.equals(b.ZERO)}wNAF(y){return S.wNAFCached(this,p,y,x=>{const B=t.invertBatch(x.map(C=>C.pz));return x.map((C,v)=>C.toAffine(B[v])).map(b.fromAffine)})}multiplyUnsafe(y){const x=b.ZERO;if(y===fr)return x;if(c(y),y===$t)return this;const{endo:B}=e;if(!B)return S.unsafeLadder(this,y);let{k1neg:C,k1:v,k2neg:K,k2:A}=B.splitScalar(y),O=x,M=x,H=this;for(;v>fr||A>fr;)v&$t&&(O=O.add(H)),A&$t&&(M=M.add(H)),H=H.double(),v>>=$t,A>>=$t;return C&&(O=O.negate()),K&&(M=M.negate()),M=new b(t.mul(M.px,B.beta),M.py,M.pz),O.add(M)}multiply(y){c(y);let x=y,B,C;const{endo:v}=e;if(v){const{k1neg:K,k1:A,k2neg:O,k2:M}=v.splitScalar(x);let{p:H,f:_e}=this.wNAF(A),{p:xe,f:me}=this.wNAF(M);H=S.constTimeNegate(K,H),xe=S.constTimeNegate(O,xe),xe=new b(t.mul(xe.px,v.beta),xe.py,xe.pz),B=H.add(xe),C=_e.add(me)}else{const{p:K,f:A}=this.wNAF(x);B=K,C=A}return b.normalizeZ([B,C])[0]}multiplyAndAddUnsafe(y,x,B){const C=b.BASE,v=(A,O)=>O===fr||O===$t||!A.equals(C)?A.multiplyUnsafe(O):A.multiply(O),K=v(this,x).add(v(y,B));return K.is0()?void 0:K}toAffine(y){const{px:x,py:B,pz:C}=this,v=this.is0();y==null&&(y=v?t.ONE:t.inv(C));const K=t.mul(x,y),A=t.mul(B,y),O=t.mul(C,y);if(v)return{x:t.ZERO,y:t.ZERO};if(!t.eql(O,t.ONE))throw new Error("invZ was invalid");return{x:K,y:A}}isTorsionFree(){const{h:y,isTorsionFree:x}=e;if(y===$t)return!0;if(x)return x(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:y,clearCofactor:x}=e;return y===$t?this:x?x(b,this):this.multiplyUnsafe(e.h)}toRawBytes(y=!0){return this.assertValidity(),r(b,this,y)}toHex(y=!0){return Ur(this.toRawBytes(y))}}b.BASE=new b(e.Gx,e.Gy,t.ONE),b.ZERO=new b(t.ZERO,t.ONE,t.ZERO);const I=e.nBitLength,S=Hi(b,e.endo?Math.ceil(I/2):I);return{CURVE:e,ProjectivePoint:b,normPrivateKeyToScalar:u,weierstrassEquation:o,isWithinCurveOrder:i}}function sl(n){const e=fo(n);return an(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function ol(n){const e=sl(n),{Fp:t,n:r}=e,s=t.BYTES+1,o=2*t.BYTES+1;function i(J){return fr<J&&J<t.ORDER}function c(J){return it(J,r)}function u(J){return Ws(J,r)}const{ProjectivePoint:p,normPrivateKeyToScalar:g,weierstrassEquation:b,isWithinCurveOrder:I}=nl({...e,toBytes(J,te,Ae){const Z=te.toAffine(),_=t.toBytes(Z.x),k=Or;return Ae?k(Uint8Array.from([te.hasEvenY()?2:3]),_):k(Uint8Array.from([4]),_,t.toBytes(Z.y))},fromBytes(J){const te=J.length,Ae=J[0],Z=J.subarray(1);if(te===s&&(Ae===2||Ae===3)){const _=Lr(Z);if(!i(_))throw new Error("Point is not on curve");const k=b(_);let N=t.sqrt(k);const j=(N&$t)===$t;return(Ae&1)===1!==j&&(N=t.neg(N)),{x:_,y:N}}else if(te===o&&Ae===4){const _=t.fromBytes(Z.subarray(0,t.BYTES)),k=t.fromBytes(Z.subarray(t.BYTES,2*t.BYTES));return{x:_,y:k}}else throw new Error(`Point of length ${te} was invalid. Expected ${s} compressed bytes or ${o} uncompressed bytes`)}}),S=J=>Ur(tn(J,e.nByteLength));function m(J){const te=r>>$t;return J>te}function y(J){return m(J)?c(-J):J}const x=(J,te,Ae)=>Lr(J.slice(te,Ae));class B{constructor(te,Ae,Z){this.r=te,this.s=Ae,this.recovery=Z,this.assertValidity()}static fromCompact(te){const Ae=e.nByteLength;return te=mt("compactSignature",te,Ae*2),new B(x(te,0,Ae),x(te,Ae,2*Ae))}static fromDER(te){const{r:Ae,s:Z}=Cr.toSig(mt("DER",te));return new B(Ae,Z)}assertValidity(){if(!I(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!I(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(te){return new B(this.r,this.s,te)}recoverPublicKey(te){const{r:Ae,s:Z,recovery:_}=this,k=M(mt("msgHash",te));if(_==null||![0,1,2,3].includes(_))throw new Error("recovery id invalid");const N=_===2||_===3?Ae+e.n:Ae;if(N>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const j=_&1?"03":"02",V=p.fromHex(j+S(N)),G=u(N),X=c(-k*G),ue=c(Z*G),ve=p.BASE.multiplyAndAddUnsafe(V,X,ue);if(!ve)throw new Error("point at infinify");return ve.assertValidity(),ve}hasHighS(){return m(this.s)}normalizeS(){return this.hasHighS()?new B(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return en(this.toDERHex())}toDERHex(){return Cr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return en(this.toCompactHex())}toCompactHex(){return S(this.r)+S(this.s)}}const C={isValidPrivateKey(J){try{return g(J),!0}catch{return!1}},normPrivateKeyToScalar:g,randomPrivateKey:()=>{const J=Ki(e.n);return bf(e.randomBytes(J),e.n)},precompute(J=8,te=p.BASE){return te._setWindowSize(J),te.multiply(BigInt(3)),te}};function v(J,te=!0){return p.fromPrivateKey(J).toRawBytes(te)}function K(J){const te=J instanceof Uint8Array,Ae=typeof J=="string",Z=(te||Ae)&&J.length;return te?Z===s||Z===o:Ae?Z===2*s||Z===2*o:J instanceof p}function A(J,te,Ae=!0){if(K(J))throw new Error("first arg must be private key");if(!K(te))throw new Error("second arg must be public key");return p.fromHex(te).multiply(g(J)).toRawBytes(Ae)}const O=e.bits2int||function(J){const te=Lr(J),Ae=J.length*8-e.nBitLength;return Ae>0?te>>BigInt(Ae):te},M=e.bits2int_modN||function(J){return c(O(J))},H=co(e.nBitLength);function _e(J){if(typeof J!="bigint")throw new Error("bigint expected");if(!(fr<=J&&J<H))throw new Error(`bigint expected < 2^${e.nBitLength}`);return tn(J,e.nByteLength)}function xe(J,te,Ae=me){if(["recovered","canonical"].some(Ke=>Ke in Ae))throw new Error("sign() legacy options not supported");const{hash:Z,randomBytes:_}=e;let{lowS:k,prehash:N,extraEntropy:j}=Ae;k==null&&(k=!0),J=mt("msgHash",J),N&&(J=mt("prehashed msgHash",Z(J)));const V=M(J),G=g(te),X=[_e(G),_e(V)];if(j!=null){const Ke=j===!0?_(t.BYTES):j;X.push(mt("extraEntropy",Ke))}const ue=Or(...X),ve=V;function Ze(Ke){const Je=O(Ke);if(!I(Je))return;const yt=u(Je),wt=p.BASE.multiply(Je).toAffine(),nt=c(wt.x);if(nt===fr)return;const Mt=c(yt*c(ve+nt*G));if(Mt===fr)return;let or=(wt.x===nt?0:2)|Number(wt.y&$t),_r=Mt;return k&&m(Mt)&&(_r=y(Mt),or^=1),new B(nt,_r,or)}return{seed:ue,k2sig:Ze}}const me={lowS:e.lowS,prehash:!1},He={lowS:e.lowS,prehash:!1};function Qe(J,te,Ae=me){const{seed:Z,k2sig:_}=xe(J,te,Ae),k=e;return Mi(k.hash.outputLen,k.nByteLength,k.hmac)(Z,_)}p.BASE._setWindowSize(8);function pt(J,te,Ae,Z=He){var wt;const _=J;if(te=mt("msgHash",te),Ae=mt("publicKey",Ae),"strict"in Z)throw new Error("options.strict was renamed to lowS");const{lowS:k,prehash:N}=Z;let j,V;try{if(typeof _=="string"||_ instanceof Uint8Array)try{j=B.fromDER(_)}catch(nt){if(!(nt instanceof Cr.Err))throw nt;j=B.fromCompact(_)}else if(typeof _=="object"&&typeof _.r=="bigint"&&typeof _.s=="bigint"){const{r:nt,s:Mt}=_;j=new B(nt,Mt)}else throw new Error("PARSE");V=p.fromHex(Ae)}catch(nt){if(nt.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(k&&j.hasHighS())return!1;N&&(te=e.hash(te));const{r:G,s:X}=j,ue=M(te),ve=u(X),Ze=c(ue*ve),Ke=c(G*ve),Je=(wt=p.BASE.multiplyAndAddUnsafe(V,Ze,Ke))==null?void 0:wt.toAffine();return Je?c(Je.x)===G:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:A,sign:Qe,verify:pt,ProjectivePoint:p,Signature:B,utils:C}}class Pa extends Ri{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Sc(e);const r=io(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,o=new Uint8Array(s);o.set(r.length>s?e.create().update(r).digest():r);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=e.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),o.fill(0)}update(e){return jn(this),this.iHash.update(e),this}digestInto(e){jn(this),Ai(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:s,destroyed:o,blockLen:i,outputLen:c}=this;return e=e,e.finished=s,e.destroyed=o,e.blockLen=i,e.outputLen=c,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ua=(n,e,t)=>new Pa(n,e).update(t).digest();Ua.create=(n,e)=>new Pa(n,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function il(n){return{hash:n,hmac:(e,...t)=>Ua(n,e,ki(...t)),randomBytes:Ci}}function al(n,e){const t=r=>ol({...n,...il(r)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Oa=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ui=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),cl=BigInt(1),Zs=BigInt(2),li=(n,e)=>(n+e/Zs)/e;function fl(n){const e=Oa,t=BigInt(3),r=BigInt(6),s=BigInt(11),o=BigInt(22),i=BigInt(23),c=BigInt(44),u=BigInt(88),p=n*n*n%e,g=p*p*n%e,b=dt(g,t,e)*g%e,I=dt(b,t,e)*g%e,S=dt(I,Zs,e)*p%e,m=dt(S,s,e)*S%e,y=dt(m,o,e)*m%e,x=dt(y,c,e)*y%e,B=dt(x,u,e)*x%e,C=dt(B,c,e)*y%e,v=dt(C,t,e)*g%e,K=dt(v,i,e)*m%e,A=dt(K,r,e)*p%e,O=dt(A,Zs,e);if(!Xs.eql(Xs.sqr(O),n))throw new Error("Cannot find square root");return O}const Xs=Fi(Oa,void 0,void 0,{sqrt:fl}),Bo=al({a:BigInt(0),b:BigInt(7),Fp:Xs,n:ui,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=ui,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-cl*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=t,i=BigInt("0x100000000000000000000000000000000"),c=li(o*n,e),u=li(-r*n,e);let p=it(n-c*t-u*s,e),g=it(-c*r-u*o,e);const b=p>i,I=g>i;if(b&&(p=e-p),I&&(g=e-g),p>i||g>i)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:b,k1:p,k2neg:I,k2:g}}}},Vs);BigInt(0);Bo.ProjectivePoint;cn.utils.randomPrivateKey;const di=()=>{const n=cn.utils.randomPrivateKey(),e=Js(n),t=new Uint8Array(64);return t.set(n),t.set(e,32),{publicKey:e,secretKey:t}},Js=cn.getPublicKey;function hi(n){try{return cn.ExtendedPoint.fromHex(n),!0}catch{return!1}}const Na=(n,e)=>cn.sign(n,e.slice(0,32)),ul=cn.verify,nn=n=>qe.Buffer.isBuffer(n)?n:n instanceof Uint8Array?qe.Buffer.from(n.buffer,n.byteOffset,n.byteLength):qe.Buffer.from(n);class ll{constructor(e){Object.assign(this,e)}encode(){return qe.Buffer.from(Xi(Dn,this))}static decode(e){return Ji(Dn,this,e)}static decodeUnchecked(e){return Wi(Dn,this,e)}}const Dn=new Map;var Ma;let qa;const dl=32,Qt=32;function hl(n){return n._bn!==void 0}let pi=1;qa=Symbol.toStringTag;class be extends ll{constructor(e){if(super({}),this._bn=void 0,hl(e))this._bn=e._bn;else{if(typeof e=="string"){const t=At.decode(e);if(t.length!=Qt)throw new Error("Invalid public key input");this._bn=new Fo(t)}else this._bn=new Fo(e);if(this._bn.byteLength()>Qt)throw new Error("Invalid public key input")}}static unique(){const e=new be(pi);return pi+=1,new be(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return At.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(qe.Buffer);if(e.length===Qt)return e;const t=qe.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[qa](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,r){const s=qe.Buffer.concat([e.toBuffer(),qe.Buffer.from(t),r.toBuffer()]),o=Vs(s);return new be(o)}static createProgramAddressSync(e,t){let r=qe.Buffer.alloc(0);e.forEach(function(o){if(o.length>dl)throw new TypeError("Max seed length exceeded");r=qe.Buffer.concat([r,nn(o)])}),r=qe.Buffer.concat([r,t.toBuffer(),qe.Buffer.from("ProgramDerivedAddress")]);const s=Vs(r);if(hi(s))throw new Error("Invalid seeds, address must fall off the curve");return new be(s)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r=255,s;for(;r!=0;){try{const o=e.concat(qe.Buffer.from([r]));s=this.createProgramAddressSync(o,t)}catch(o){if(o instanceof TypeError)throw o;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new be(e);return hi(t.toBytes())}}Ma=be;be.default=new Ma("11111111111111111111111111111111");Dn.set(be,{kind:"struct",fields:[["_bn","u256"]]});new be("BPFLoader1111111111111111111111111111111111");const Jr=1280-40-8,Io=127,Bn=64;class Fa extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Fa.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class za extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(za.prototype,"name",{value:"TransactionExpiredTimeoutError"});class vn extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(vn.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Xn{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((o,i)=>{r.set(o.toBase58(),i)});const s=o=>{const i=r.get(o.toBase58());if(i===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return i};return e.map(o=>({programIdIndex:s(o.programId),accountKeyIndexes:o.keys.map(i=>s(i.pubkey)),data:o.data}))}}const ze=(n="publicKey")=>rt(32,n),pl=(n="signature")=>rt(64,n),Zr=(n="string")=>{const e=he([we("length"),we("lengthPadding"),rt(Pr(we(),-8),"chars")],n),t=e.decode.bind(e),r=e.encode.bind(e),s=e;return s.decode=(o,i)=>t(o,i).chars.toString(),s.encode=(o,i,c)=>{const u={chars:qe.Buffer.from(o,"utf8")};return r(u,i,c)},s.alloc=o=>we().span+we().span+qe.Buffer.from(o,"utf8").length,s},gl=(n="authorized")=>he([ze("staker"),ze("withdrawer")],n),yl=(n="lockup")=>he([zt("unixTimestamp"),zt("epoch"),ze("custodian")],n),wl=(n="voteInit")=>he([ze("nodePubkey"),ze("authorizedVoter"),ze("authorizedWithdrawer"),Xe("commission")],n),bl=(n="voteAuthorizeWithSeedArgs")=>he([we("voteAuthorizationType"),ze("currentAuthorityDerivedKeyOwnerPubkey"),Zr("currentAuthorityDerivedKeySeed"),ze("newAuthorized")],n);function Kt(n){let e=0,t=0;for(;;){let r=n.shift();if(e|=(r&127)<<t*7,t+=1,!(r&128))break}return e}function Ht(n,e){let t=e;for(;;){let r=t&127;if(t>>=7,t==0){n.push(r);break}else r|=128,n.push(r)}}function ot(n,e){if(!n)throw new Error(e||"Assertion failed")}class cs{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const r=new Map,s=i=>{const c=i.toBase58();let u=r.get(c);return u===void 0&&(u={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(c,u)),u},o=s(t);o.isSigner=!0,o.isWritable=!0;for(const i of e){s(i.programId).isInvoked=!0;for(const c of i.keys){const u=s(c.pubkey);u.isSigner||(u.isSigner=c.isSigner),u.isWritable||(u.isWritable=c.isWritable)}}return new cs(t,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];ot(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,u])=>u.isSigner&&u.isWritable),r=e.filter(([,u])=>u.isSigner&&!u.isWritable),s=e.filter(([,u])=>!u.isSigner&&u.isWritable),o=e.filter(([,u])=>!u.isSigner&&!u.isWritable),i={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:o.length};{ot(t.length>0,"Expected at least one writable signer key");const[u]=t[0];ot(u===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const c=[...t.map(([u])=>new be(u)),...r.map(([u])=>new be(u)),...s.map(([u])=>new be(u)),...o.map(([u])=>new be(u))];return[i,c]}extractTableLookup(e){const[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,i=>!i.isSigner&&!i.isInvoked&&i.isWritable),[s,o]=this.drainKeysFoundInLookupTable(e.state.addresses,i=>!i.isSigner&&!i.isInvoked&&!i.isWritable);if(!(t.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:s},{writable:r,readonly:o}]}drainKeysFoundInLookupTable(e,t){const r=new Array,s=new Array;for(const[o,i]of this.keyMetaMap.entries())if(t(i)){const c=new be(o),u=e.findIndex(p=>p.equals(c));u>=0&&(ot(u<256,"Max lookup table index exceeded"),r.push(u),s.push(c),this.keyMetaMap.delete(o))}return[r,s]}}class lr{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new be(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:At.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Xn(this.staticAccountKeys)}static compile(e){const t=cs.compile(e.instructions,e.payerKey),[r,s]=t.getMessageComponents(),i=new Xn(s).compileInstructions(e.instructions).map(c=>({programIdIndex:c.programIdIndex,accounts:c.accountKeyIndexes,data:At.encode(c.data)}));return new lr({header:r,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:i})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-t,o=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return r<o}else{const r=t-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];Ht(t,e);const r=this.instructions.map(b=>{const{accounts:I,programIdIndex:S}=b,m=Array.from(At.decode(b.data));let y=[];Ht(y,I.length);let x=[];return Ht(x,m.length),{programIdIndex:S,keyIndicesCount:qe.Buffer.from(y),keyIndices:I,dataLength:qe.Buffer.from(x),data:m}});let s=[];Ht(s,r.length);let o=qe.Buffer.alloc(Jr);qe.Buffer.from(s).copy(o);let i=s.length;r.forEach(b=>{const S=he([Xe("programIdIndex"),rt(b.keyIndicesCount.length,"keyIndicesCount"),Pt(Xe("keyIndex"),b.keyIndices.length,"keyIndices"),rt(b.dataLength.length,"dataLength"),Pt(Xe("userdatum"),b.data.length,"data")]).encode(b,o,i);i+=S}),o=o.slice(0,i);const c=he([rt(1,"numRequiredSignatures"),rt(1,"numReadonlySignedAccounts"),rt(1,"numReadonlyUnsignedAccounts"),rt(t.length,"keyCount"),Pt(ze("key"),e,"keys"),ze("recentBlockhash")]),u={numRequiredSignatures:qe.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:qe.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:qe.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:qe.Buffer.from(t),keys:this.accountKeys.map(b=>nn(b.toBytes())),recentBlockhash:At.decode(this.recentBlockhash)};let p=qe.Buffer.alloc(2048);const g=c.encode(u,p);return o.copy(p,g),p.slice(0,g+o.length)}static from(e){let t=[...e];const r=t.shift();if(r!==(r&Io))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=t.shift(),o=t.shift(),i=Kt(t);let c=[];for(let I=0;I<i;I++){const S=t.slice(0,Qt);t=t.slice(Qt),c.push(new be(qe.Buffer.from(S)))}const u=t.slice(0,Qt);t=t.slice(Qt);const p=Kt(t);let g=[];for(let I=0;I<p;I++){const S=t.shift(),m=Kt(t),y=t.slice(0,m);t=t.slice(m);const x=Kt(t),B=t.slice(0,x),C=At.encode(qe.Buffer.from(B));t=t.slice(x),g.push({programIdIndex:S,accounts:y,data:C})}const b={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:o},recentBlockhash:At.encode(qe.Buffer.from(u)),accountKeys:c,instructions:g};return new lr(b)}}class In{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Xn(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const s=e-r,o=this.addressTableLookups.reduce((i,c)=>i+c.writableIndexes.length,0);return s<o}else if(e>=this.header.numRequiredSignatures){const s=e-t,i=r-t-this.header.numReadonlyUnsignedAccounts;return s<i}else{const s=t-this.header.numReadonlySignedAccounts;return e<s}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=e.find(o=>o.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const o of r.writableIndexes)if(o<s.state.addresses.length)t.writable.push(s.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${r.accountKey.toBase58()}`);for(const o of r.readonlyIndexes)if(o<s.state.addresses.length)t.readonly.push(s.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${r.accountKey.toBase58()}`)}return t}static compile(e){const t=cs.compile(e.instructions,e.payerKey),r=new Array,s={writable:new Array,readonly:new Array},o=e.addressLookupTableAccounts||[];for(const g of o){const b=t.extractTableLookup(g);if(b!==void 0){const[I,{writable:S,readonly:m}]=b;r.push(I),s.writable.push(...S),s.readonly.push(...m)}}const[i,c]=t.getMessageComponents(),p=new Xn(c,s).compileInstructions(e.instructions);return new In({header:i,staticAccountKeys:c,recentBlockhash:e.recentBlockhash,compiledInstructions:p,addressTableLookups:r})}serialize(){const e=Array();Ht(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),r=Array();Ht(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),o=Array();Ht(o,this.addressTableLookups.length);const i=he([Xe("prefix"),he([Xe("numRequiredSignatures"),Xe("numReadonlySignedAccounts"),Xe("numReadonlyUnsignedAccounts")],"header"),rt(e.length,"staticAccountKeysLength"),Pt(ze(),this.staticAccountKeys.length,"staticAccountKeys"),ze("recentBlockhash"),rt(r.length,"instructionsLength"),rt(t.length,"serializedInstructions"),rt(o.length,"addressTableLookupsLength"),rt(s.length,"serializedAddressTableLookups")]),c=new Uint8Array(Jr),u=128,p=i.encode({prefix:u,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(g=>g.toBytes()),recentBlockhash:At.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(o),serializedAddressTableLookups:s},c);return c.slice(0,p)}serializeInstructions(){let e=0;const t=new Uint8Array(Jr);for(const r of this.compiledInstructions){const s=Array();Ht(s,r.accountKeyIndexes.length);const o=Array();Ht(o,r.data.length);const i=he([Xe("programIdIndex"),rt(s.length,"encodedAccountKeyIndexesLength"),Pt(Xe(),r.accountKeyIndexes.length,"accountKeyIndexes"),rt(o.length,"encodedDataLength"),rt(r.data.length,"data")]);e+=i.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(o),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(Jr);for(const r of this.addressTableLookups){const s=Array();Ht(s,r.writableIndexes.length);const o=Array();Ht(o,r.readonlyIndexes.length);const i=he([ze("accountKey"),rt(s.length,"encodedWritableIndexesLength"),Pt(Xe(),r.writableIndexes.length,"writableIndexes"),rt(o.length,"encodedReadonlyIndexesLength"),Pt(Xe(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=i.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(o),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const r=t.shift(),s=r&Io;ot(r!==s,"Expected versioned message but received legacy message");const o=s;ot(o===0,`Expected versioned message with version 0 but found version ${o}`);const i={numRequiredSignatures:t.shift(),numReadonlySignedAccounts:t.shift(),numReadonlyUnsignedAccounts:t.shift()},c=[],u=Kt(t);for(let m=0;m<u;m++)c.push(new be(t.splice(0,Qt)));const p=At.encode(t.splice(0,Qt)),g=Kt(t),b=[];for(let m=0;m<g;m++){const y=t.shift(),x=Kt(t),B=t.splice(0,x),C=Kt(t),v=new Uint8Array(t.splice(0,C));b.push({programIdIndex:y,accountKeyIndexes:B,data:v})}const I=Kt(t),S=[];for(let m=0;m<I;m++){const y=new be(t.splice(0,Qt)),x=Kt(t),B=t.splice(0,x),C=Kt(t),v=t.splice(0,C);S.push({accountKey:y,writableIndexes:B,readonlyIndexes:v})}return new In({header:i,staticAccountKeys:c,recentBlockhash:p,compiledInstructions:b,addressTableLookups:S})}}const Ka={deserializeMessageVersion(n){const e=n[0],t=e&Io;return t===e?"legacy":t},deserialize:n=>{const e=Ka.deserializeMessageVersion(n);if(e==="legacy")return lr.from(n);if(e===0)return In.deserialize(n);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let wr=function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n}({});const xl=qe.Buffer.alloc(Bn).fill(0);class gi{constructor(e){this.keys=void 0,this.programId=void 0,this.data=qe.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class br{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{const{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new gi(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let y=0;y<t.length;y++)if(t[y].programId===void 0)throw new Error(`Transaction instruction index ${y} has undefined program id`);const s=[],o=[];t.forEach(y=>{y.keys.forEach(B=>{o.push({...B})});const x=y.programId.toString();s.includes(x)||s.push(x)}),s.forEach(y=>{o.push({pubkey:new be(y),isSigner:!1,isWritable:!1})});const i=[];o.forEach(y=>{const x=y.pubkey.toString(),B=i.findIndex(C=>C.pubkey.toString()===x);B>-1?(i[B].isWritable=i[B].isWritable||y.isWritable,i[B].isSigner=i[B].isSigner||y.isSigner):i.push(y)}),i.sort(function(y,x){if(y.isSigner!==x.isSigner)return y.isSigner?-1:1;if(y.isWritable!==x.isWritable)return y.isWritable?-1:1;const B={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return y.pubkey.toBase58().localeCompare(x.pubkey.toBase58(),"en",B)});const c=i.findIndex(y=>y.pubkey.equals(r));if(c>-1){const[y]=i.splice(c,1);y.isSigner=!0,y.isWritable=!0,i.unshift(y)}else i.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const y of this.signatures){const x=i.findIndex(B=>B.pubkey.equals(y.publicKey));if(x>-1)i[x].isSigner||(i[x].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${y.publicKey.toString()}`)}let u=0,p=0,g=0;const b=[],I=[];i.forEach(({pubkey:y,isSigner:x,isWritable:B})=>{x?(b.push(y.toString()),u+=1,B||(p+=1)):(I.push(y.toString()),B||(g+=1))});const S=b.concat(I),m=t.map(y=>{const{data:x,programId:B}=y;return{programIdIndex:S.indexOf(B.toString()),accounts:y.keys.map(C=>S.indexOf(C.pubkey.toString())),data:At.encode(x)}});return m.forEach(y=>{ot(y.programIdIndex>=0),y.accounts.forEach(x=>ot(x>=0))}),new lr({header:{numRequiredSignatures:u,numReadonlySignedAccounts:p,numReadonlyUnsignedAccounts:g},accountKeys:S,recentBlockhash:e,instructions:m})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((s,o)=>t[o].equals(s.publicKey))||(this.signatures=t.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(r=>{const s=r.toString();return t.has(s)?!1:(t.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,r=[];for(const o of e){const i=o.publicKey.toString();t.has(i)||(t.add(i),r.push(o))}this.signatures=r.map(o=>({signature:null,publicKey:o.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,r=[];for(const o of e){const i=o.publicKey.toString();t.has(i)||(t.add(i),r.push(o))}const s=this._compile();this._partialSign(s,...r)}_partialSign(e,...t){const r=e.serialize();t.forEach(s=>{const o=Na(r,s.secretKey);this._addSignature(s.publicKey,nn(o))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){ot(t.length===64);const r=this.signatures.findIndex(s=>e.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=qe.Buffer.from(t)}verifySignatures(e){return this._verifySignatures(this.serializeMessage(),e===void 0?!0:e)}_verifySignatures(e,t){for(const{signature:r,publicKey:s}of this.signatures)if(r===null){if(t)return!1}else if(!ul(r,e,s.toBytes()))return!1;return!0}serialize(e){const{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(r&&!this._verifySignatures(s,t))throw new Error("Signature verification failed");return this._serialize(s)}_serialize(e){const{signatures:t}=this,r=[];Ht(r,t.length);const s=r.length+t.length*64+e.length,o=qe.Buffer.alloc(s);return ot(t.length<256),qe.Buffer.from(r).copy(o,0),t.forEach(({signature:i},c)=>{i!==null&&(ot(i.length===64,"signature has invalid length"),qe.Buffer.from(i).copy(o,r.length+c*64))}),e.copy(o,r.length+t.length*64),ot(o.length<=Jr,`Transaction too large: ${o.length} > ${Jr}`),o}get keys(){return ot(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return ot(this.instructions.length===1),this.instructions[0].programId}get data(){return ot(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const r=Kt(t);let s=[];for(let o=0;o<r;o++){const i=t.slice(0,Bn);t=t.slice(Bn),s.push(At.encode(qe.Buffer.from(i)))}return br.populate(lr.from(t),s)}static populate(e,t=[]){const r=new br;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach((s,o)=>{const i={signature:s==At.encode(xl)?null:At.decode(s),publicKey:e.accountKeys[o]};r.signatures.push(i)}),e.instructions.forEach(s=>{const o=s.accounts.map(i=>{const c=e.accountKeys[i];return{pubkey:c,isSigner:r.signatures.some(u=>u.publicKey.toString()===c.toString())||e.isAccountSigner(i),isWritable:e.isAccountWritable(i)}});r.instructions.push(new gi({keys:o,programId:e.accountKeys[s.programIdIndex],data:At.decode(s.data)}))}),r._message=e,r._json=r.toJSON(),r}}class Qr{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)ot(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const r=[];for(let s=0;s<e.header.numRequiredSignatures;s++)r.push(new Uint8Array(Bn));this.signatures=r}this.message=e}serialize(){const e=this.message.serialize(),t=Array();Ht(t,this.signatures.length);const r=he([rt(t.length,"encodedSignaturesLength"),Pt(pl(),this.signatures.length,"signatures"),rt(e.length,"serializedMessage")]),s=new Uint8Array(2048),o=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},s);return s.slice(0,o)}static deserialize(e){let t=[...e];const r=[],s=Kt(t);for(let i=0;i<s;i++)r.push(new Uint8Array(t.splice(0,Bn)));const o=Ka.deserialize(new Uint8Array(t));return new Qr(o,r)}sign(e){const t=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of e){const o=r.findIndex(i=>i.equals(s.publicKey));ot(o>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[o]=Na(t,s.secretKey)}}addSignature(e,t){ot(t.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(o=>o.equals(e));ot(s>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=t}}const ml=160,vl=64,Sl=ml/vl,_l=1e3/Sl;new be("SysvarC1ock11111111111111111111111111111111");new be("SysvarEpochSchedu1e111111111111111111111111");new be("Sysvar1nstructions1111111111111111111111111");new be("SysvarRecentB1ockHashes11111111111111111111");new be("SysvarRent111111111111111111111111111111111");new be("SysvarRewards111111111111111111111111111111");new be("SysvarS1otHashes111111111111111111111111111");new be("SysvarS1otHistory11111111111111111111111111");new be("SysvarStakeHistory1111111111111111111111111");function Yr(n){return new Promise(e=>setTimeout(e,n))}const El=_t("lamportsPerSignature"),Ha=he([we("version"),we("state"),ze("authorizedPubkey"),ze("nonce"),he([El],"feeCalculator")]);Ha.span;class ko{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=Ha.decode(nn(e),0);return new ko({authorizedPubkey:new be(t.authorizedPubkey),nonce:new be(t.nonce).toString(),feeCalculator:t.feeCalculator})}}const Al=n=>{const e=n.decode.bind(n),t=n.encode.bind(n);return{decode:e,encode:t}},Bl=n=>e=>{const t=rt(n,e),{encode:r,decode:s}=Al(t),o=t;return o.decode=(i,c)=>{const u=s(i,c);return su(qe.Buffer.from(u))},o.encode=(i,c,u)=>{const p=au(i,n);return r(p,c,u)},o},sn=Bl(8);Object.freeze({Create:{index:0,layout:he([we("instruction"),zt("lamports"),zt("space"),ze("programId")])},Assign:{index:1,layout:he([we("instruction"),ze("programId")])},Transfer:{index:2,layout:he([we("instruction"),sn("lamports")])},CreateWithSeed:{index:3,layout:he([we("instruction"),ze("base"),Zr("seed"),zt("lamports"),zt("space"),ze("programId")])},AdvanceNonceAccount:{index:4,layout:he([we("instruction")])},WithdrawNonceAccount:{index:5,layout:he([we("instruction"),zt("lamports")])},InitializeNonceAccount:{index:6,layout:he([we("instruction"),ze("authorized")])},AuthorizeNonceAccount:{index:7,layout:he([we("instruction"),ze("authorized")])},Allocate:{index:8,layout:he([we("instruction"),zt("space")])},AllocateWithSeed:{index:9,layout:he([we("instruction"),ze("base"),Zr("seed"),zt("space"),ze("programId")])},AssignWithSeed:{index:10,layout:he([we("instruction"),ze("base"),Zr("seed"),ze("programId")])},TransferWithSeed:{index:11,layout:he([we("instruction"),sn("lamports"),Zr("seed"),ze("programId")])},UpgradeNonceAccount:{index:12,layout:he([we("instruction")])}});new be("11111111111111111111111111111111");new be("BPFLoader2111111111111111111111111111111111");function Il(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var kl=Object.prototype.toString,Rl=Object.keys||function(n){var e=[];for(var t in n)e.push(t);return e};function Sn(n,e){var t,r,s,o,i,c,u;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return Sn(n.toJSON(),e);if(u=kl.call(n),u==="[object Array]"){for(s="[",r=n.length-1,t=0;t<r;t++)s+=Sn(n[t],!0)+",";return r>-1&&(s+=Sn(n[t],!0)),s+"]"}else if(u==="[object Object]"){for(o=Rl(n).sort(),r=o.length,s="",t=0;t<r;)i=o[t],c=Sn(n[i],!1),c!==void 0&&(s&&(s+=","),s+=JSON.stringify(i)+":"+c),t++;return"{"+s+"}"}else return JSON.stringify(n);case"function":case"undefined":return e?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}var Tl=function(n){var e=Sn(n,!1);if(e!==void 0)return""+e},yi=Il(Tl);const mn=32;function zs(n){let e=0;for(;n>1;)n/=2,e++;return e}function Cl(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class Ll{constructor(e,t,r,s,o){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=o}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=zs(Cl(e+mn+1))-zs(mn)-1,r=this.getSlotsInEpoch(t),s=e-(r-mn);return[t,s]}else{const t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch),s=this.firstNormalEpoch+r,o=t%this.slotsPerEpoch;return[s,o]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*mn:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+zs(mn)):this.slotsPerEpoch}}class wi extends Error{constructor(e,t){super(e),this.logs=void 0,this.logs=t}}class pe extends Error{constructor({code:e,message:t,data:r},s){super(s!=null?`${s}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}var Pl=globalThis.fetch;class Ul extends Ju{constructor(e,t,r){const s=o=>{const i=Qu(o,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in i?this.underlyingSocket=i.socket:this.underlyingSocket=i,i};super(s,e,t,r),this.underlyingSocket=void 0}call(...e){var r;const t=(r=this.underlyingSocket)==null?void 0:r.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){var r;const t=(r=this.underlyingSocket)==null?void 0:r.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function Ol(n,e){let t;try{t=n.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(t.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${n.index}`);return t}const bi=56;class xi{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=Ol(Nl,e),r=e.length-bi;ot(r>=0,"lookup table is invalid"),ot(r%32===0,"lookup table is invalid");const s=r/32,{addresses:o}=he([Pt(ze(),s,"addresses")]).decode(e.slice(bi));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new be(t.authority[0]):void 0,addresses:o.map(i=>new be(i))}}}const Nl={index:1,layout:he([we("typeIndex"),sn("deactivationSlot"),_t("lastExtendedSlot"),Xe("lastExtendedStartIndex"),Xe(),Pt(ze(),Pr(Xe(),-1),"authority")])},Ml=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function ql(n){const e=n.match(Ml);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[t,r,s,o]=e,i=n.startsWith("https:")?"wss:":"ws:",c=s==null?null:parseInt(s.slice(1),10),u=c==null?"":`:${c+1}`;return`${i}//${r}${u}${o}`}const bt=Pn(Eo(be),Q(),n=>new be(n)),Da=Ao([Q(),at("base64")]),Ro=Pn(Eo(qe.Buffer),Da,n=>qe.Buffer.from(n[0],"base64")),Fl=30*1e3;function zl(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function st(n){let e,t;if(typeof n=="string")e=n;else if(n){const{commitment:r,...s}=n;e=r,t=s}return{commitment:e,config:t}}function $a(n){return Nt([$({jsonrpc:at("2.0"),id:Q(),result:n}),$({jsonrpc:at("2.0"),id:Q(),error:$({code:Ln(),message:Q(),data:Se(gu())})})])}const Kl=$a(Ln());function Me(n){return Pn($a(n),Kl,e=>"error"in e?e:{...e,result:ee(e.result,n)})}function ht(n){return Me($({context:$({slot:T()}),value:n}))}function fs(n){return $({context:$({slot:T()}),value:n})}function Ks(n,e){return n===0?new In({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new be(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:At.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new lr(e)}const Hl=$({foundation:T(),foundationTerm:T(),initial:T(),taper:T(),terminal:T()}),Dl=Me(se(oe($({epoch:T(),effectiveSlot:T(),amount:T(),postBalance:T(),commission:Se(oe(T()))})))),$l=se($({slot:T(),prioritizationFee:T()})),jl=$({total:T(),validator:T(),foundation:T(),epoch:T()}),Wl=$({epoch:T(),slotIndex:T(),slotsInEpoch:T(),absoluteSlot:T(),blockHeight:Se(T()),transactionCount:Se(T())}),Gl=$({slotsPerEpoch:T(),leaderScheduleSlotOffset:T(),warmup:tr(),firstNormalEpoch:T(),firstNormalSlot:T()}),Vl=wa(Q(),se(T())),qr=oe(Nt([$({}),Q()])),Yl=$({err:qr}),Zl=at("receivedSignature"),Xl=$({"solana-core":Q(),"feature-set":Se(T())}),mi=ht($({err:oe(Nt([$({}),Q()])),logs:oe(se(Q())),accounts:Se(oe(se(oe($({executable:tr(),owner:Q(),lamports:T(),data:se(Q()),rentEpoch:Se(T())}))))),unitsConsumed:Se(T()),returnData:Se(oe($({programId:Q(),data:Ao([Q(),at("base64")])})))})),Jl=ht($({byIdentity:wa(Q(),se(T())),range:$({firstSlot:T(),lastSlot:T()})}));function Ql(n,e,t,r,s,o){const i=t||Pl;let c;o!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let u;return r&&(u=async(g,b)=>{const I=await new Promise((S,m)=>{try{r(g,b,(y,x)=>S([y,x]))}catch(y){m(y)}});return await i(...I)}),new $u(async(g,b)=>{const I={method:"POST",body:g,agent:c,headers:Object.assign({"Content-Type":"application/json"},e||{},eh)};try{let S=5,m,y=500;for(;u?m=await u(n,I):m=await i(n,I),!(m.status!==429||s===!0||(S-=1,S===0));)console.log(`Server responded with ${m.status} ${m.statusText}.  Retrying after ${y}ms delay...`),await Yr(y),y*=2;const x=await m.text();m.ok?b(null,x):b(new Error(`${m.status} ${m.statusText}: ${x}`))}catch(S){S instanceof Error&&b(S)}},{})}function ed(n){return(e,t)=>new Promise((r,s)=>{n.request(e,t,(o,i)=>{if(o){s(o);return}r(i)})})}function td(n){return e=>new Promise((t,r)=>{e.length===0&&t([]);const s=e.map(o=>n.request(o.methodName,o.args));n.request(s,(o,i)=>{if(o){r(o);return}t(i)})})}const rd=Me(Hl),nd=Me(jl),sd=Me($l),od=Me(Wl),id=Me(Gl),ad=Me(Vl),cd=Me(T()),fd=ht($({total:T(),circulating:T(),nonCirculating:T(),nonCirculatingAccounts:se(bt)})),Qs=$({amount:Q(),uiAmount:oe(T()),decimals:T(),uiAmountString:Se(Q())}),ud=ht(se($({address:bt,amount:Q(),uiAmount:oe(T()),decimals:T(),uiAmountString:Se(Q())}))),ld=ht(se($({pubkey:bt,account:$({executable:tr(),owner:bt,lamports:T(),data:Ro,rentEpoch:T()})}))),eo=$({program:Q(),parsed:Ln(),space:T()}),dd=ht(se($({pubkey:bt,account:$({executable:tr(),owner:bt,lamports:T(),data:eo,rentEpoch:T()})}))),hd=ht(se($({lamports:T(),address:bt}))),kn=$({executable:tr(),owner:bt,lamports:T(),data:Ro,rentEpoch:T()}),pd=$({pubkey:bt,account:kn}),gd=Pn(Nt([Eo(qe.Buffer),eo]),Nt([Da,eo]),n=>Array.isArray(n)?ee(n,Ro):n),to=$({executable:tr(),owner:bt,lamports:T(),data:gd,rentEpoch:T()}),yd=$({pubkey:bt,account:to}),wd=$({state:Nt([at("active"),at("inactive"),at("activating"),at("deactivating")]),active:T(),inactive:T()}),bd=Me(se($({signature:Q(),slot:T(),err:qr,memo:oe(Q()),blockTime:Se(oe(T()))}))),xd=Me(se($({signature:Q(),slot:T(),err:qr,memo:oe(Q()),blockTime:Se(oe(T()))}))),md=$({subscription:T(),result:fs(kn)}),vd=$({pubkey:bt,account:kn}),Sd=$({subscription:T(),result:fs(vd)}),_d=$({parent:T(),slot:T(),root:T()}),Ed=$({subscription:T(),result:_d}),Ad=Nt([$({type:Nt([at("firstShredReceived"),at("completed"),at("optimisticConfirmation"),at("root")]),slot:T(),timestamp:T()}),$({type:at("createdBank"),parent:T(),slot:T(),timestamp:T()}),$({type:at("frozen"),slot:T(),timestamp:T(),stats:$({numTransactionEntries:T(),numSuccessfulTransactions:T(),numFailedTransactions:T(),maxTransactionsPerEntry:T()})}),$({type:at("dead"),slot:T(),timestamp:T(),err:Q()})]),Bd=$({subscription:T(),result:Ad}),Id=$({subscription:T(),result:fs(Nt([Yl,Zl]))}),kd=$({subscription:T(),result:T()}),Rd=$({pubkey:Q(),gossip:oe(Q()),tpu:oe(Q()),rpc:oe(Q()),version:oe(Q())}),vi=$({votePubkey:Q(),nodePubkey:Q(),activatedStake:T(),epochVoteAccount:tr(),epochCredits:se(Ao([T(),T(),T()])),commission:T(),lastVote:T(),rootSlot:oe(T())}),Td=Me($({current:se(vi),delinquent:se(vi)})),Cd=Nt([at("processed"),at("confirmed"),at("finalized")]),Ld=$({slot:T(),confirmations:oe(T()),err:qr,confirmationStatus:Se(Cd)}),Pd=ht(se(oe(Ld))),Ud=Me(T()),ja=$({accountKey:bt,writableIndexes:se(T()),readonlyIndexes:se(T())}),To=$({signatures:se(Q()),message:$({accountKeys:se(Q()),header:$({numRequiredSignatures:T(),numReadonlySignedAccounts:T(),numReadonlyUnsignedAccounts:T()}),instructions:se($({accounts:se(T()),data:Q(),programIdIndex:T()})),recentBlockhash:Q(),addressTableLookups:Se(se(ja))})}),Wa=$({pubkey:bt,signer:tr(),writable:tr(),source:Se(Nt([at("transaction"),at("lookupTable")]))}),Ga=$({accountKeys:se(Wa),signatures:se(Q())}),Va=$({parsed:Ln(),program:Q(),programId:bt}),Ya=$({accounts:se(bt),data:Q(),programId:bt}),Od=Nt([Ya,Va]),Nd=Nt([$({parsed:Ln(),program:Q(),programId:Q()}),$({accounts:se(Q()),data:Q(),programId:Q()})]),Za=Pn(Od,Nd,n=>"accounts"in n?ee(n,Ya):ee(n,Va)),Xa=$({signatures:se(Q()),message:$({accountKeys:se(Wa),instructions:se(Za),recentBlockhash:Q(),addressTableLookups:Se(oe(se(ja)))})}),Jn=$({accountIndex:T(),mint:Q(),owner:Se(Q()),uiTokenAmount:Qs}),Ja=$({writable:se(bt),readonly:se(bt)}),us=$({err:qr,fee:T(),innerInstructions:Se(oe(se($({index:T(),instructions:se($({accounts:se(T()),data:Q(),programIdIndex:T()}))})))),preBalances:se(T()),postBalances:se(T()),logMessages:Se(oe(se(Q()))),preTokenBalances:Se(oe(se(Jn))),postTokenBalances:Se(oe(se(Jn))),loadedAddresses:Se(Ja),computeUnitsConsumed:Se(T())}),Co=$({err:qr,fee:T(),innerInstructions:Se(oe(se($({index:T(),instructions:se(Za)})))),preBalances:se(T()),postBalances:se(T()),logMessages:Se(oe(se(Q()))),preTokenBalances:Se(oe(se(Jn))),postTokenBalances:Se(oe(se(Jn))),loadedAddresses:Se(Ja),computeUnitsConsumed:Se(T())}),ln=Nt([at(0),at("legacy")]),Fr=$({pubkey:Q(),lamports:T(),postBalance:oe(T()),rewardType:oe(Q()),commission:Se(oe(T()))}),Md=Me(oe($({blockhash:Q(),previousBlockhash:Q(),parentSlot:T(),transactions:se($({transaction:To,meta:oe(us),version:Se(ln)})),rewards:Se(se(Fr)),blockTime:oe(T()),blockHeight:oe(T())}))),qd=Me(oe($({blockhash:Q(),previousBlockhash:Q(),parentSlot:T(),rewards:Se(se(Fr)),blockTime:oe(T()),blockHeight:oe(T())}))),Fd=Me(oe($({blockhash:Q(),previousBlockhash:Q(),parentSlot:T(),transactions:se($({transaction:Ga,meta:oe(us),version:Se(ln)})),rewards:Se(se(Fr)),blockTime:oe(T()),blockHeight:oe(T())}))),zd=Me(oe($({blockhash:Q(),previousBlockhash:Q(),parentSlot:T(),transactions:se($({transaction:Xa,meta:oe(Co),version:Se(ln)})),rewards:Se(se(Fr)),blockTime:oe(T()),blockHeight:oe(T())}))),Kd=Me(oe($({blockhash:Q(),previousBlockhash:Q(),parentSlot:T(),transactions:se($({transaction:Ga,meta:oe(Co),version:Se(ln)})),rewards:Se(se(Fr)),blockTime:oe(T()),blockHeight:oe(T())}))),Hd=Me(oe($({blockhash:Q(),previousBlockhash:Q(),parentSlot:T(),rewards:Se(se(Fr)),blockTime:oe(T()),blockHeight:oe(T())}))),Dd=Me(oe($({blockhash:Q(),previousBlockhash:Q(),parentSlot:T(),transactions:se($({transaction:To,meta:oe(us)})),rewards:Se(se(Fr)),blockTime:oe(T())}))),Si=Me(oe($({blockhash:Q(),previousBlockhash:Q(),parentSlot:T(),signatures:se(Q()),blockTime:oe(T())}))),Hs=Me(oe($({slot:T(),meta:us,blockTime:Se(oe(T())),transaction:To,version:Se(ln)}))),Hn=Me(oe($({slot:T(),transaction:Xa,meta:oe(Co),blockTime:Se(oe(T())),version:Se(ln)}))),$d=ht($({blockhash:Q(),feeCalculator:$({lamportsPerSignature:T()})})),jd=ht($({blockhash:Q(),lastValidBlockHeight:T()})),Wd=ht(tr()),Gd=$({slot:T(),numTransactions:T(),numSlots:T(),samplePeriodSecs:T()}),Vd=Me(se(Gd)),Yd=ht(oe($({feeCalculator:$({lamportsPerSignature:T()})}))),Zd=Me(Q()),Xd=Me(Q()),Jd=$({err:qr,logs:se(Q()),signature:Q()}),Qd=$({result:fs(Jd),subscription:T()}),eh={"solana-client":"js/0.0.0-development"};class Qa{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const p={};return async g=>{const{commitment:b,config:I}=st(g),S=this._buildArgs([],b,void 0,I),m=yi(S);return p[m]=p[m]??(async()=>{try{const y=await this._rpcRequest("getBlockHeight",S),x=ee(y,Me(T()));if("error"in x)throw new pe(x.error,"failed to get block height information");return x.result}finally{delete p[m]}})(),await p[m]}})();let r,s,o,i,c,u;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,r=t.wsEndpoint,s=t.httpHeaders,o=t.fetch,i=t.fetchMiddleware,c=t.disableRetryOnRateLimit,u=t.httpAgent),this._rpcEndpoint=zl(e),this._rpcWsEndpoint=r||ql(e),this._rpcClient=Ql(e,s,o,i,c,u),this._rpcRequest=ed(this._rpcClient),this._rpcBatchRequest=td(this._rpcClient),this._rpcWebSocket=new Ul(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:r,config:s}=st(t),o=this._buildArgs([e.toBase58()],r,void 0,s),i=await this._rpcRequest("getBalance",o),c=ee(i,ht(T()));if("error"in c)throw new pe(c.error,`failed to get balance for ${e.toBase58()}`);return c.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),r=ee(t,Me(oe(T())));if("error"in r)throw new pe(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=ee(e,Me(T()));if("error"in t)throw new pe(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=ee(e,cd);if("error"in t)throw new pe(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[t]),s=ee(r,fd);if("error"in s)throw new pe(s.error,"failed to get supply");return s.result}async getTokenSupply(e,t){const r=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenSupply",r),o=ee(s,ht(Qs));if("error"in o)throw new pe(o.error,"failed to get token supply");return o.result}async getTokenAccountBalance(e,t){const r=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenAccountBalance",r),o=ee(s,ht(Qs));if("error"in o)throw new pe(o.error,"failed to get token account balance");return o.result}async getTokenAccountsByOwner(e,t,r){const{commitment:s,config:o}=st(r);let i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});const c=this._buildArgs(i,s,"base64",o),u=await this._rpcRequest("getTokenAccountsByOwner",c),p=ee(u,ld);if("error"in p)throw new pe(p.error,`failed to get token accounts owned by account ${e.toBase58()}`);return p.result}async getParsedTokenAccountsByOwner(e,t,r){let s=[e.toBase58()];"mint"in t?s.push({mint:t.mint.toBase58()}):s.push({programId:t.programId.toBase58()});const o=this._buildArgs(s,r,"jsonParsed"),i=await this._rpcRequest("getTokenAccountsByOwner",o),c=ee(i,dd);if("error"in c)throw new pe(c.error,`failed to get token accounts owned by account ${e.toBase58()}`);return c.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},r=t.filter||t.commitment?[t]:[],s=await this._rpcRequest("getLargestAccounts",r),o=ee(s,hd);if("error"in o)throw new pe(o.error,"failed to get largest accounts");return o.result}async getTokenLargestAccounts(e,t){const r=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenLargestAccounts",r),o=ee(s,ud);if("error"in o)throw new pe(o.error,"failed to get token largest accounts");return o.result}async getAccountInfoAndContext(e,t){const{commitment:r,config:s}=st(t),o=this._buildArgs([e.toBase58()],r,"base64",s),i=await this._rpcRequest("getAccountInfo",o),c=ee(i,ht(oe(kn)));if("error"in c)throw new pe(c.error,`failed to get info about account ${e.toBase58()}`);return c.result}async getParsedAccountInfo(e,t){const{commitment:r,config:s}=st(t),o=this._buildArgs([e.toBase58()],r,"jsonParsed",s),i=await this._rpcRequest("getAccountInfo",o),c=ee(i,ht(oe(to)));if("error"in c)throw new pe(c.error,`failed to get info about account ${e.toBase58()}`);return c.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,t){const{commitment:r,config:s}=st(t),o=e.map(p=>p.toBase58()),i=this._buildArgs([o],r,"jsonParsed",s),c=await this._rpcRequest("getMultipleAccounts",i),u=ee(c,ht(se(oe(to))));if("error"in u)throw new pe(u.error,`failed to get info for accounts ${o}`);return u.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:r,config:s}=st(t),o=e.map(p=>p.toBase58()),i=this._buildArgs([o],r,"base64",s),c=await this._rpcRequest("getMultipleAccounts",i),u=ee(c,ht(se(oe(kn))));if("error"in u)throw new pe(u.error,`failed to get info for accounts ${o}`);return u.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,r){const{commitment:s,config:o}=st(t),i=this._buildArgs([e.toBase58()],s,void 0,{...o,epoch:r??(o==null?void 0:o.epoch)}),c=await this._rpcRequest("getStakeActivation",i),u=ee(c,Me(wd));if("error"in u)throw new pe(u.error,`failed to get Stake Activation ${e.toBase58()}`);return u.result}async getProgramAccounts(e,t){const{commitment:r,config:s}=st(t),{encoding:o,...i}=s||{},c=this._buildArgs([e.toBase58()],r,o||"base64",i),u=await this._rpcRequest("getProgramAccounts",c),p=se(pd),g=i.withContext===!0?ee(u,ht(p)):ee(u,Me(p));if("error"in g)throw new pe(g.error,`failed to get accounts owned by program ${e.toBase58()}`);return g.result}async getParsedProgramAccounts(e,t){const{commitment:r,config:s}=st(t),o=this._buildArgs([e.toBase58()],r,"jsonParsed",s),i=await this._rpcRequest("getProgramAccounts",o),c=ee(i,Me(se(yd)));if("error"in c)throw new pe(c.error,`failed to get accounts owned by program ${e.toBase58()}`);return c.result}async confirmTransaction(e,t){var o;let r;if(typeof e=="string")r=e;else{const i=e;if((o=i.abortSignal)!=null&&o.aborted)return Promise.reject(i.abortSignal.reason);r=i.signature}let s;try{s=At.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return ot(s.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let r,s,o=!1;const i=new Promise((u,p)=>{try{r=this.onSignature(t,(b,I)=>{r=void 0;const S={context:I,value:b};u({__type:wr.PROCESSED,response:S})},e);const g=new Promise(b=>{r==null?b():s=this._onSubscriptionStateChange(r,I=>{I==="subscribed"&&b()})});(async()=>{if(await g,o)return;const b=await this.getSignatureStatus(t);if(o||b==null)return;const{context:I,value:S}=b;if(S!=null)if(S!=null&&S.err)p(S.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(S.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(S.confirmationStatus==="processed"||S.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}o=!0,u({__type:wr.PROCESSED,response:{context:I,value:S}})}})()}catch(g){p(g)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:i}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:r,signature:s}}){let o=!1;const i=new Promise(b=>{const I=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let S=await I();if(!o){for(;S<=r;)if(await Yr(1e3),o||(S=await I(),o))return;b({__type:wr.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:c,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),p=this.getCancellationPromise(t);let g;try{const b=await Promise.race([p,u,i]);if(b.__type===wr.PROCESSED)g=b.response;else throw new Fa(s)}finally{o=!0,c()}return g}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:r,nonceAccountPubkey:s,nonceValue:o,signature:i}}){let c=!1;const u=new Promise(S=>{let m=o,y=null;const x=async()=>{try{const{context:B,value:C}=await this.getNonceAndContext(s,{commitment:e,minContextSlot:r});return y=B.slot,C==null?void 0:C.nonce}catch{return m}};(async()=>{if(m=await x(),!c)for(;;){if(o!==m){S({__type:wr.NONCE_INVALID,slotInWhichNonceDidAdvance:y});return}if(await Yr(2e3),c||(m=await x(),c))return}})()}),{abortConfirmation:p,confirmationPromise:g}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),b=this.getCancellationPromise(t);let I;try{const S=await Promise.race([b,g,u]);if(S.__type===wr.PROCESSED)I=S.response;else{let m;for(;;){const y=await this.getSignatureStatus(i);if(y==null)break;if(y.context.slot<(S.slotInWhichNonceDidAdvance??r)){await Yr(400);continue}m=y;break}if(m!=null&&m.value){const y=e||"finalized",{confirmationStatus:x}=m.value;switch(y){case"processed":case"recent":if(x!=="processed"&&x!=="confirmed"&&x!=="finalized")throw new vn(i);break;case"confirmed":case"single":case"singleGossip":if(x!=="confirmed"&&x!=="finalized")throw new vn(i);break;case"finalized":case"max":case"root":if(x!=="finalized")throw new vn(i);break;default:}I={context:m.context,value:{err:m.value.err}}}else throw new vn(i)}}finally{c=!0,p()}return I}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let r;const s=new Promise(u=>{let p=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{p=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>u({__type:wr.TIMED_OUT,timeoutMs:p}),p)}),{abortConfirmation:o,confirmationPromise:i}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let c;try{const u=await Promise.race([i,s]);if(u.__type===wr.PROCESSED)c=u.response;else throw new za(t,u.timeoutMs/1e3)}finally{clearTimeout(r),o()}return c}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=ee(e,Me(se(Rd)));if("error"in t)throw new pe(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",t),s=ee(r,Td);if("error"in s)throw new pe(s.error,"failed to get vote accounts");return s.result}async getSlot(e){const{commitment:t,config:r}=st(e),s=this._buildArgs([],t,void 0,r),o=await this._rpcRequest("getSlot",s),i=ee(o,Me(T()));if("error"in i)throw new pe(i.error,"failed to get slot");return i.result}async getSlotLeader(e){const{commitment:t,config:r}=st(e),s=this._buildArgs([],t,void 0,r),o=await this._rpcRequest("getSlotLeader",s),i=ee(o,Me(Q()));if("error"in i)throw new pe(i.error,"failed to get slot leader");return i.result}async getSlotLeaders(e,t){const r=[e,t],s=await this._rpcRequest("getSlotLeaders",r),o=ee(s,Me(se(bt)));if("error"in o)throw new pe(o.error,"failed to get slot leaders");return o.result}async getSignatureStatus(e,t){const{context:r,value:s}=await this.getSignatureStatuses([e],t);ot(s.length===1);const o=s[0];return{context:r,value:o}}async getSignatureStatuses(e,t){const r=[e];t&&r.push(t);const s=await this._rpcRequest("getSignatureStatuses",r),o=ee(s,Pd);if("error"in o)throw new pe(o.error,"failed to get signature status");return o.result}async getTransactionCount(e){const{commitment:t,config:r}=st(e),s=this._buildArgs([],t,void 0,r),o=await this._rpcRequest("getTransactionCount",s),i=ee(o,Me(T()));if("error"in i)throw new pe(i.error,"failed to get transaction count");return i.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",t),s=ee(r,rd);if("error"in s)throw new pe(s.error,"failed to get inflation");return s.result}async getInflationReward(e,t,r){const{commitment:s,config:o}=st(r),i=this._buildArgs([e.map(p=>p.toBase58())],s,void 0,{...o,epoch:t??(o==null?void 0:o.epoch)}),c=await this._rpcRequest("getInflationReward",i),u=ee(c,Dl);if("error"in u)throw new pe(u.error,"failed to get inflation reward");return u.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=ee(e,nd);if("error"in t)throw new pe(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:r}=st(e),s=this._buildArgs([],t,void 0,r),o=await this._rpcRequest("getEpochInfo",s),i=ee(o,od);if("error"in i)throw new pe(i.error,"failed to get epoch info");return i.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=ee(e,id);if("error"in t)throw new pe(t.error,"failed to get epoch schedule");const r=t.result;return new Ll(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=ee(e,ad);if("error"in t)throw new pe(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const r=this._buildArgs([e],t),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),o=ee(s,Ud);return"error"in o?(console.warn("Unable to fetch minimum balance for rent exemption"),0):o.result}async getRecentBlockhashAndContext(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getRecentBlockhash",t),s=ee(r,$d);if("error"in s)throw new pe(s.error,"failed to get recent blockhash");return s.result}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=ee(t,Vd);if("error"in r)throw new pe(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,t){const r=this._buildArgs([e],t),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),o=ee(s,Yd);if("error"in o)throw new pe(o.error,"failed to get fee calculator");const{context:i,value:c}=o.result;return{context:i,value:c!==null?c.feeCalculator:null}}async getFeeForMessage(e,t){const r=nn(e.serialize()).toString("base64"),s=this._buildArgs([r],t),o=await this._rpcRequest("getFeeForMessage",s),i=ee(o,ht(oe(T())));if("error"in i)throw new pe(i.error,"failed to get fee for message");if(i.result===null)throw new Error("invalid blockhash");return i.result}async getRecentPrioritizationFees(e){var i;const t=(i=e==null?void 0:e.lockedWritableAccounts)==null?void 0:i.map(c=>c.toBase58()),r=t!=null&&t.length?[t]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),o=ee(s,sd);if("error"in o)throw new pe(o.error,"failed to get recent prioritization fees");return o.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:r}=st(e),s=this._buildArgs([],t,void 0,r),o=await this._rpcRequest("getLatestBlockhash",s),i=ee(o,jd);if("error"in i)throw new pe(i.error,"failed to get latest blockhash");return i.result}async isBlockhashValid(e,t){const{commitment:r,config:s}=st(t),o=this._buildArgs([e],r,void 0,s),i=await this._rpcRequest("isBlockhashValid",o),c=ee(i,Wd);if("error"in c)throw new pe(c.error,"failed to determine if the blockhash `"+e+"`is valid");return c.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=ee(e,Me(Xl));if("error"in t)throw new pe(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=ee(e,Me(Q()));if("error"in t)throw new pe(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:r,config:s}=st(t),o=this._buildArgsAtLeastConfirmed([e],r,void 0,s),i=await this._rpcRequest("getBlock",o);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const c=ee(i,Fd);if("error"in c)throw c.error;return c.result}case"none":{const c=ee(i,qd);if("error"in c)throw c.error;return c.result}default:{const c=ee(i,Md);if("error"in c)throw c.error;const{result:u}=c;return u?{...u,transactions:u.transactions.map(({transaction:p,meta:g,version:b})=>({meta:g,transaction:{...p,message:Ks(b,p.message)},version:b}))}:null}}}catch(c){throw new pe(c,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:r,config:s}=st(t),o=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",s),i=await this._rpcRequest("getBlock",o);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const c=ee(i,Kd);if("error"in c)throw c.error;return c.result}case"none":{const c=ee(i,Hd);if("error"in c)throw c.error;return c.result}default:{const c=ee(i,zd);if("error"in c)throw c.error;return c.result}}}catch(c){throw new pe(c,"failed to get block")}}async getBlockProduction(e){let t,r;if(typeof e=="string")r=e;else if(e){const{commitment:c,...u}=e;r=c,t=u}const s=this._buildArgs([],r,"base64",t),o=await this._rpcRequest("getBlockProduction",s),i=ee(o,Jl);if("error"in i)throw new pe(i.error,"failed to get block production information");return i.result}async getTransaction(e,t){const{commitment:r,config:s}=st(t),o=this._buildArgsAtLeastConfirmed([e],r,void 0,s),i=await this._rpcRequest("getTransaction",o),c=ee(i,Hs);if("error"in c)throw new pe(c.error,"failed to get transaction");const u=c.result;return u&&{...u,transaction:{...u.transaction,message:Ks(u.version,u.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:r,config:s}=st(t),o=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",s),i=await this._rpcRequest("getTransaction",o),c=ee(i,Hn);if("error"in c)throw new pe(c.error,"failed to get transaction");return c.result}async getParsedTransactions(e,t){const{commitment:r,config:s}=st(t),o=e.map(u=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([u],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(o)).map(u=>{const p=ee(u,Hn);if("error"in p)throw new pe(p.error,"failed to get transactions");return p.result})}async getTransactions(e,t){const{commitment:r,config:s}=st(t),o=e.map(u=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([u],r,void 0,s)}));return(await this._rpcBatchRequest(o)).map(u=>{const p=ee(u,Hs);if("error"in p)throw new pe(p.error,"failed to get transactions");const g=p.result;return g&&{...g,transaction:{...g.transaction,message:Ks(g.version,g.transaction.message)}}})}async getConfirmedBlock(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),s=await this._rpcRequest("getConfirmedBlock",r),o=ee(s,Dd);if("error"in o)throw new pe(o.error,"failed to get confirmed block");const i=o.result;if(!i)throw new Error("Confirmed block "+e+" not found");const c={...i,transactions:i.transactions.map(({transaction:u,meta:p})=>{const g=new lr(u.message);return{meta:p,transaction:{...u,message:g}}})};return{...c,transactions:c.transactions.map(({transaction:u,meta:p})=>({meta:p,transaction:br.populate(u.message,u.signatures)}))}}async getBlocks(e,t,r){const s=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],r),o=await this._rpcRequest("getBlocks",s),i=ee(o,Me(se(T())));if("error"in i)throw new pe(i.error,"failed to get blocks");return i.result}async getBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),o=ee(s,Si);if("error"in o)throw new pe(o.error,"failed to get block");const i=o.result;if(!i)throw new Error("Block "+e+" not found");return i}async getConfirmedBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getConfirmedBlock",r),o=ee(s,Si);if("error"in o)throw new pe(o.error,"failed to get confirmed block");const i=o.result;if(!i)throw new Error("Confirmed block "+e+" not found");return i}async getConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),s=await this._rpcRequest("getConfirmedTransaction",r),o=ee(s,Hs);if("error"in o)throw new pe(o.error,"failed to get transaction");const i=o.result;if(!i)return i;const c=new lr(i.transaction.message),u=i.transaction.signatures;return{...i,transaction:br.populate(c,u)}}async getParsedConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),s=await this._rpcRequest("getConfirmedTransaction",r),o=ee(s,Hn);if("error"in o)throw new pe(o.error,"failed to get confirmed transaction");return o.result}async getParsedConfirmedTransactions(e,t){const r=e.map(i=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([i],t,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(i=>{const c=ee(i,Hn);if("error"in c)throw new pe(c.error,"failed to get confirmed transactions");return c.result})}async getConfirmedSignaturesForAddress(e,t,r){let s={},o=await this.getFirstAvailableBlock();for(;!("until"in s)&&(t--,!(t<=0||t<o));)try{const u=await this.getConfirmedBlockSignatures(t,"finalized");u.signatures.length>0&&(s.until=u.signatures[u.signatures.length-1].toString())}catch(u){if(u instanceof Error&&u.message.includes("skipped"))continue;throw u}let i=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>i));)try{const u=await this.getConfirmedBlockSignatures(r);u.signatures.length>0&&(s.before=u.signatures[u.signatures.length-1].toString())}catch(u){if(u instanceof Error&&u.message.includes("skipped"))continue;throw u}return(await this.getConfirmedSignaturesForAddress2(e,s)).map(u=>u.signature)}async getConfirmedSignaturesForAddress2(e,t,r){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),o=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),i=ee(o,bd);if("error"in i)throw new pe(i.error,"failed to get confirmed signatures for address");return i.result}async getSignaturesForAddress(e,t,r){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),o=await this._rpcRequest("getSignaturesForAddress",s),i=ee(o,xd);if("error"in i)throw new pe(i.error,"failed to get signatures for address");return i.result}async getAddressLookupTable(e,t){const{context:r,value:s}=await this.getAccountInfoAndContext(e,t);let o=null;return s!==null&&(o=new xi({key:e,state:xi.deserialize(s.data)})),{context:r,value:o}}async getNonceAndContext(e,t){const{context:r,value:s}=await this.getAccountInfoAndContext(e,t);let o=null;return s!==null&&(o=ko.fromAccountData(s.data)),{context:r,value:o}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,t){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),s=ee(r,Zd);if("error"in s)throw new pe(s.error,`airdrop to ${e.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Yr(100);const r=Date.now()-this._blockhashInfo.lastFetch>=Fl;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,r=t?t.blockhash:null;for(let s=0;s<50;s++){const o=await this.getLatestBlockhash("finalized");if(r!==o.blockhash)return this._blockhashInfo={latestBlockhash:o,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},o;await Yr(_l/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:r}=st(e),s=this._buildArgs([],t,"base64",r),o=await this._rpcRequest("getStakeMinimumDelegation",s),i=ee(o,ht(T()));if("error"in i)throw new pe(i.error,"failed to get stake minimum delegation");return i.result}async simulateTransaction(e,t,r){if("message"in e){const y=e.serialize(),x=qe.Buffer.from(y).toString("base64");if(Array.isArray(t)||r!==void 0)throw new Error("Invalid arguments");const B=t||{};B.encoding="base64","commitment"in B||(B.commitment=this.commitment);const C=[x,B],v=await this._rpcRequest("simulateTransaction",C),K=ee(v,mi);if("error"in K)throw new Error("failed to simulate transaction: "+K.error.message);return K.result}let s;if(e instanceof br){let m=e;s=new br,s.feePayer=m.feePayer,s.instructions=e.instructions,s.nonceInfo=m.nonceInfo,s.signatures=m.signatures}else s=br.populate(e),s._message=s._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const o=t;if(s.nonceInfo&&o)s.sign(...o);else{let m=this._disableBlockhashCaching;for(;;){const y=await this._blockhashWithExpiryBlockHeight(m);if(s.lastValidBlockHeight=y.lastValidBlockHeight,s.recentBlockhash=y.blockhash,!o)break;if(s.sign(...o),!s.signature)throw new Error("!signature");const x=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(x)&&!this._blockhashInfo.transactionSignatures.includes(x)){this._blockhashInfo.simulatedSignatures.push(x);break}else m=!0}}const i=s._compile(),c=i.serialize(),p=s._serialize(c).toString("base64"),g={encoding:"base64",commitment:this.commitment};if(r){const m=(Array.isArray(r)?r:i.nonProgramIds()).map(y=>y.toBase58());g.accounts={encoding:"base64",addresses:m}}o&&(g.sigVerify=!0);const b=[p,g],I=await this._rpcRequest("simulateTransaction",b),S=ee(I,mi);if("error"in S){let m;if("data"in S.error&&(m=S.error.data.logs,m&&Array.isArray(m))){const y=`
    `,x=y+m.join(y);console.error(S.error.message,x)}throw new wi("failed to simulate transaction: "+S.error.message,m)}return S.result}async sendTransaction(e,t,r){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const i=e.serialize();return await this.sendRawTransaction(i,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(e.nonceInfo)e.sign(...s);else{let i=this._disableBlockhashCaching;for(;;){const c=await this._blockhashWithExpiryBlockHeight(i);if(e.lastValidBlockHeight=c.lastValidBlockHeight,e.recentBlockhash=c.blockhash,e.sign(...s),!e.signature)throw new Error("!signature");const u=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(u))i=!0;else{this._blockhashInfo.transactionSignatures.push(u);break}}}const o=e.serialize();return await this.sendRawTransaction(o,r)}async sendRawTransaction(e,t){const r=nn(e).toString("base64");return await this.sendEncodedTransaction(r,t)}async sendEncodedTransaction(e,t){const r={encoding:"base64"},s=t&&t.skipPreflight,o=t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(r.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(r.minContextSlot=t.minContextSlot),s&&(r.skipPreflight=s),o&&(r.preflightCommitment=o);const i=[e,r],c=await this._rpcRequest("sendTransaction",i),u=ee(c,Xd);if("error"in u){let p;throw"data"in u.error&&(p=u.error.data.logs),new wi("failed to send transaction: "+u.error.message,p)}return u.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,r])=>{this._setSubscription(t,{...r,state:"pending"})})}_setSubscription(e,t){var s;const r=(s=this._subscriptionsByHash[e])==null?void 0:s.state;if(this._subscriptionsByHash[e]=t,r!==t.state){const o=this._subscriptionStateChangeCallbacksByHash[e];o&&o.forEach(i=>{try{i(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){var o;const r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};const s=(o=this._subscriptionStateChangeCallbacksByHash)[r]||(o[r]=new Set);return s.add(t),()=>{s.delete(t),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:o,method:i}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const c=await this._rpcWebSocket.call(i,o);this._setSubscription(r,{...s,serverSubscriptionId:c,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[c]=s.callbacks,await this._updateSubscriptions()}catch(c){if(c instanceof Error&&console.error(`${i} error for argument`,o,c.message),!t())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:o,unsubscribeMethod:i}=s;if(this._subscriptionsAutoDisposedByRpc.has(o))this._subscriptionsAutoDisposedByRpc.delete(o);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(i,[o])}catch(c){if(c instanceof Error&&console.error(`${i} error:`,c.message),!t())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(s=>{try{s(...t)}catch(o){console.error(o)}})}_wsOnAccountNotification(e){const{result:t,subscription:r}=ee(e,md);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){const r=this._nextClientSubscriptionId++,s=yi([e.method,t],!0),o=this._subscriptionsByHash[s];return o===void 0?this._subscriptionsByHash[s]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:o.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const i=this._subscriptionsByHash[s];ot(i!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),i.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,t,r){const s=this._buildArgs([e.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},s)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:r}=ee(e,Sd);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,s){const o=this._buildArgs([e.toBase58()],r||this._commitment||"finalized","base64",s?{filters:s}:void 0);return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},o)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,r){const s=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:r}=ee(e,Qd);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:r}=ee(e,Ed);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:r}=ee(e,Bd);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,r,s){const o=t||this._commitment;if(o||r||s){let i={};r&&(i.encoding=r),o&&(i.commitment=o),s&&(i=Object.assign(i,s)),e.push(i)}return e}_buildArgsAtLeastConfirmed(e,t,r,s){const o=t||this._commitment;if(o&&!["confirmed","finalized"].includes(o))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,s)}_wsOnSignatureNotification(e){const{result:t,subscription:r}=ee(e,Id);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){const s=this._buildArgs([e],r||this._commitment||"finalized"),o=this._makeSubscription({callback:(i,c)=>{if(i.type==="status"){t(i.result,c);try{this.removeSignatureListener(o)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return o}onSignatureWithOptions(e,t,r){const{commitment:s,...o}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},i=this._buildArgs([e],s,void 0,o),c=this._makeSubscription({callback:(u,p)=>{t(u,p);try{this.removeSignatureListener(c)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return c}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:r}=ee(e,kd);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class _n{constructor(e){this._keypair=void 0,this._keypair=e??di()}static generate(){return new _n(di())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const r=e.slice(32,64);if(!t||!t.skipValidation){const s=e.slice(0,32),o=Js(s);for(let i=0;i<32;i++)if(r[i]!==o[i])throw new Error("provided secretKey is invalid")}return new _n({publicKey:r,secretKey:e})}static fromSeed(e){const t=Js(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),new _n({publicKey:t,secretKey:r})}get publicKey(){return new be(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:he([we("instruction"),sn("recentSlot"),Xe("bumpSeed")])},FreezeLookupTable:{index:1,layout:he([we("instruction")])},ExtendLookupTable:{index:2,layout:he([we("instruction"),sn(),Pt(ze(),Pr(we(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:he([we("instruction")])},CloseLookupTable:{index:4,layout:he([we("instruction")])}});new be("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:he([Xe("instruction"),we("units"),we("additionalFee")])},RequestHeapFrame:{index:1,layout:he([Xe("instruction"),we("bytes")])},SetComputeUnitLimit:{index:2,layout:he([Xe("instruction"),we("units")])},SetComputeUnitPrice:{index:3,layout:he([Xe("instruction"),sn("microLamports")])}});new be("ComputeBudget111111111111111111111111111111");he([Xe("numSignatures"),Xe("padding"),jt("signatureOffset"),jt("signatureInstructionIndex"),jt("publicKeyOffset"),jt("publicKeyInstructionIndex"),jt("messageDataOffset"),jt("messageDataSize"),jt("messageInstructionIndex")]);new be("Ed25519SigVerify111111111111111111111111111");Bo.utils.isValidPrivateKey;Bo.getPublicKey;he([Xe("numSignatures"),jt("signatureOffset"),Xe("signatureInstructionIndex"),jt("ethAddressOffset"),Xe("ethAddressInstructionIndex"),jt("messageDataOffset"),jt("messageDataSize"),Xe("messageInstructionIndex"),rt(20,"ethAddress"),rt(64,"signature"),Xe("recoveryId")]);new be("KeccakSecp256k11111111111111111111111111111");var ec;new be("StakeConfig11111111111111111111111111111111");class tc{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}}ec=tc;tc.default=new ec(0,0,be.default);Object.freeze({Initialize:{index:0,layout:he([we("instruction"),gl(),yl()])},Authorize:{index:1,layout:he([we("instruction"),ze("newAuthorized"),we("stakeAuthorizationType")])},Delegate:{index:2,layout:he([we("instruction")])},Split:{index:3,layout:he([we("instruction"),zt("lamports")])},Withdraw:{index:4,layout:he([we("instruction"),zt("lamports")])},Deactivate:{index:5,layout:he([we("instruction")])},Merge:{index:7,layout:he([we("instruction")])},AuthorizeWithSeed:{index:8,layout:he([we("instruction"),ze("newAuthorized"),we("stakeAuthorizationType"),Zr("authoritySeed"),ze("authorityOwner")])}});new be("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:he([we("instruction"),wl()])},Authorize:{index:1,layout:he([we("instruction"),ze("newAuthorized"),we("voteAuthorizationType")])},Withdraw:{index:3,layout:he([we("instruction"),zt("lamports")])},AuthorizeWithSeed:{index:10,layout:he([we("instruction"),bl()])}});new be("Vote111111111111111111111111111111111111111");new be("Va1idator1nfo111111111111111111111111111111");$({name:Q(),website:Se(Q()),details:Se(Q()),keybaseUsername:Se(Q())});new be("Vote111111111111111111111111111111111111111");he([ze("nodePubkey"),ze("authorizedWithdrawer"),Xe("commission"),_t(),Pt(he([_t("slot"),we("confirmationCount")]),Pr(we(),-8),"votes"),Xe("rootSlotValid"),_t("rootSlot"),_t(),Pt(he([_t("epoch"),ze("authorizedVoter")]),Pr(we(),-8),"authorizedVoters"),he([Pt(he([ze("authorizedPubkey"),_t("epochOfLastAuthorizedSwitch"),_t("targetEpoch")]),32,"buf"),_t("idx"),Xe("isEmpty")],"priorVoters"),_t(),Pt(he([_t("epoch"),_t("credits"),_t("prevCredits")]),Pr(we(),-8),"epochCredits"),he([_t("slot"),_t("timestamp")],"lastTimestamp")]);var rc={exports:{}};(function(n){(function(e){var t=function(f){var d,l=new Float64Array(16);if(f)for(d=0;d<f.length;d++)l[d]=f[d];return l},r=function(){throw new Error("no PRNG")},s=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var i=t(),c=t([1]),u=t([56129,1]),p=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),g=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),b=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),I=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),S=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function m(f,d,l,a){f[d]=l>>24&255,f[d+1]=l>>16&255,f[d+2]=l>>8&255,f[d+3]=l&255,f[d+4]=a>>24&255,f[d+5]=a>>16&255,f[d+6]=a>>8&255,f[d+7]=a&255}function y(f,d,l,a,h){var E,R=0;for(E=0;E<h;E++)R|=f[d+E]^l[a+E];return(1&R-1>>>8)-1}function x(f,d,l,a){return y(f,d,l,a,16)}function B(f,d,l,a){return y(f,d,l,a,32)}function C(f,d,l,a){for(var h=a[0]&255|(a[1]&255)<<8|(a[2]&255)<<16|(a[3]&255)<<24,E=l[0]&255|(l[1]&255)<<8|(l[2]&255)<<16|(l[3]&255)<<24,R=l[4]&255|(l[5]&255)<<8|(l[6]&255)<<16|(l[7]&255)<<24,F=l[8]&255|(l[9]&255)<<8|(l[10]&255)<<16|(l[11]&255)<<24,Y=l[12]&255|(l[13]&255)<<8|(l[14]&255)<<16|(l[15]&255)<<24,de=a[4]&255|(a[5]&255)<<8|(a[6]&255)<<16|(a[7]&255)<<24,ne=d[0]&255|(d[1]&255)<<8|(d[2]&255)<<16|(d[3]&255)<<24,We=d[4]&255|(d[5]&255)<<8|(d[6]&255)<<16|(d[7]&255)<<24,ae=d[8]&255|(d[9]&255)<<8|(d[10]&255)<<16|(d[11]&255)<<24,Ee=d[12]&255|(d[13]&255)<<8|(d[14]&255)<<16|(d[15]&255)<<24,Be=a[8]&255|(a[9]&255)<<8|(a[10]&255)<<16|(a[11]&255)<<24,Ce=l[16]&255|(l[17]&255)<<8|(l[18]&255)<<16|(l[19]&255)<<24,Te=l[20]&255|(l[21]&255)<<8|(l[22]&255)<<16|(l[23]&255)<<24,Ie=l[24]&255|(l[25]&255)<<8|(l[26]&255)<<16|(l[27]&255)<<24,Re=l[28]&255|(l[29]&255)<<8|(l[30]&255)<<16|(l[31]&255)<<24,ke=a[12]&255|(a[13]&255)<<8|(a[14]&255)<<16|(a[15]&255)<<24,ce=h,ge=E,ie=R,fe=F,le=Y,re=de,P=ne,U=We,D=ae,q=Ee,z=Be,W=Ce,ye=Te,Le=Ie,Ue=Re,Pe=ke,w,Fe=0;Fe<20;Fe+=2)w=ce+ye|0,le^=w<<7|w>>>32-7,w=le+ce|0,D^=w<<9|w>>>32-9,w=D+le|0,ye^=w<<13|w>>>32-13,w=ye+D|0,ce^=w<<18|w>>>32-18,w=re+ge|0,q^=w<<7|w>>>32-7,w=q+re|0,Le^=w<<9|w>>>32-9,w=Le+q|0,ge^=w<<13|w>>>32-13,w=ge+Le|0,re^=w<<18|w>>>32-18,w=z+P|0,Ue^=w<<7|w>>>32-7,w=Ue+z|0,ie^=w<<9|w>>>32-9,w=ie+Ue|0,P^=w<<13|w>>>32-13,w=P+ie|0,z^=w<<18|w>>>32-18,w=Pe+W|0,fe^=w<<7|w>>>32-7,w=fe+Pe|0,U^=w<<9|w>>>32-9,w=U+fe|0,W^=w<<13|w>>>32-13,w=W+U|0,Pe^=w<<18|w>>>32-18,w=ce+fe|0,ge^=w<<7|w>>>32-7,w=ge+ce|0,ie^=w<<9|w>>>32-9,w=ie+ge|0,fe^=w<<13|w>>>32-13,w=fe+ie|0,ce^=w<<18|w>>>32-18,w=re+le|0,P^=w<<7|w>>>32-7,w=P+re|0,U^=w<<9|w>>>32-9,w=U+P|0,le^=w<<13|w>>>32-13,w=le+U|0,re^=w<<18|w>>>32-18,w=z+q|0,W^=w<<7|w>>>32-7,w=W+z|0,D^=w<<9|w>>>32-9,w=D+W|0,q^=w<<13|w>>>32-13,w=q+D|0,z^=w<<18|w>>>32-18,w=Pe+Ue|0,ye^=w<<7|w>>>32-7,w=ye+Pe|0,Le^=w<<9|w>>>32-9,w=Le+ye|0,Ue^=w<<13|w>>>32-13,w=Ue+Le|0,Pe^=w<<18|w>>>32-18;ce=ce+h|0,ge=ge+E|0,ie=ie+R|0,fe=fe+F|0,le=le+Y|0,re=re+de|0,P=P+ne|0,U=U+We|0,D=D+ae|0,q=q+Ee|0,z=z+Be|0,W=W+Ce|0,ye=ye+Te|0,Le=Le+Ie|0,Ue=Ue+Re|0,Pe=Pe+ke|0,f[0]=ce>>>0&255,f[1]=ce>>>8&255,f[2]=ce>>>16&255,f[3]=ce>>>24&255,f[4]=ge>>>0&255,f[5]=ge>>>8&255,f[6]=ge>>>16&255,f[7]=ge>>>24&255,f[8]=ie>>>0&255,f[9]=ie>>>8&255,f[10]=ie>>>16&255,f[11]=ie>>>24&255,f[12]=fe>>>0&255,f[13]=fe>>>8&255,f[14]=fe>>>16&255,f[15]=fe>>>24&255,f[16]=le>>>0&255,f[17]=le>>>8&255,f[18]=le>>>16&255,f[19]=le>>>24&255,f[20]=re>>>0&255,f[21]=re>>>8&255,f[22]=re>>>16&255,f[23]=re>>>24&255,f[24]=P>>>0&255,f[25]=P>>>8&255,f[26]=P>>>16&255,f[27]=P>>>24&255,f[28]=U>>>0&255,f[29]=U>>>8&255,f[30]=U>>>16&255,f[31]=U>>>24&255,f[32]=D>>>0&255,f[33]=D>>>8&255,f[34]=D>>>16&255,f[35]=D>>>24&255,f[36]=q>>>0&255,f[37]=q>>>8&255,f[38]=q>>>16&255,f[39]=q>>>24&255,f[40]=z>>>0&255,f[41]=z>>>8&255,f[42]=z>>>16&255,f[43]=z>>>24&255,f[44]=W>>>0&255,f[45]=W>>>8&255,f[46]=W>>>16&255,f[47]=W>>>24&255,f[48]=ye>>>0&255,f[49]=ye>>>8&255,f[50]=ye>>>16&255,f[51]=ye>>>24&255,f[52]=Le>>>0&255,f[53]=Le>>>8&255,f[54]=Le>>>16&255,f[55]=Le>>>24&255,f[56]=Ue>>>0&255,f[57]=Ue>>>8&255,f[58]=Ue>>>16&255,f[59]=Ue>>>24&255,f[60]=Pe>>>0&255,f[61]=Pe>>>8&255,f[62]=Pe>>>16&255,f[63]=Pe>>>24&255}function v(f,d,l,a){for(var h=a[0]&255|(a[1]&255)<<8|(a[2]&255)<<16|(a[3]&255)<<24,E=l[0]&255|(l[1]&255)<<8|(l[2]&255)<<16|(l[3]&255)<<24,R=l[4]&255|(l[5]&255)<<8|(l[6]&255)<<16|(l[7]&255)<<24,F=l[8]&255|(l[9]&255)<<8|(l[10]&255)<<16|(l[11]&255)<<24,Y=l[12]&255|(l[13]&255)<<8|(l[14]&255)<<16|(l[15]&255)<<24,de=a[4]&255|(a[5]&255)<<8|(a[6]&255)<<16|(a[7]&255)<<24,ne=d[0]&255|(d[1]&255)<<8|(d[2]&255)<<16|(d[3]&255)<<24,We=d[4]&255|(d[5]&255)<<8|(d[6]&255)<<16|(d[7]&255)<<24,ae=d[8]&255|(d[9]&255)<<8|(d[10]&255)<<16|(d[11]&255)<<24,Ee=d[12]&255|(d[13]&255)<<8|(d[14]&255)<<16|(d[15]&255)<<24,Be=a[8]&255|(a[9]&255)<<8|(a[10]&255)<<16|(a[11]&255)<<24,Ce=l[16]&255|(l[17]&255)<<8|(l[18]&255)<<16|(l[19]&255)<<24,Te=l[20]&255|(l[21]&255)<<8|(l[22]&255)<<16|(l[23]&255)<<24,Ie=l[24]&255|(l[25]&255)<<8|(l[26]&255)<<16|(l[27]&255)<<24,Re=l[28]&255|(l[29]&255)<<8|(l[30]&255)<<16|(l[31]&255)<<24,ke=a[12]&255|(a[13]&255)<<8|(a[14]&255)<<16|(a[15]&255)<<24,ce=h,ge=E,ie=R,fe=F,le=Y,re=de,P=ne,U=We,D=ae,q=Ee,z=Be,W=Ce,ye=Te,Le=Ie,Ue=Re,Pe=ke,w,Fe=0;Fe<20;Fe+=2)w=ce+ye|0,le^=w<<7|w>>>32-7,w=le+ce|0,D^=w<<9|w>>>32-9,w=D+le|0,ye^=w<<13|w>>>32-13,w=ye+D|0,ce^=w<<18|w>>>32-18,w=re+ge|0,q^=w<<7|w>>>32-7,w=q+re|0,Le^=w<<9|w>>>32-9,w=Le+q|0,ge^=w<<13|w>>>32-13,w=ge+Le|0,re^=w<<18|w>>>32-18,w=z+P|0,Ue^=w<<7|w>>>32-7,w=Ue+z|0,ie^=w<<9|w>>>32-9,w=ie+Ue|0,P^=w<<13|w>>>32-13,w=P+ie|0,z^=w<<18|w>>>32-18,w=Pe+W|0,fe^=w<<7|w>>>32-7,w=fe+Pe|0,U^=w<<9|w>>>32-9,w=U+fe|0,W^=w<<13|w>>>32-13,w=W+U|0,Pe^=w<<18|w>>>32-18,w=ce+fe|0,ge^=w<<7|w>>>32-7,w=ge+ce|0,ie^=w<<9|w>>>32-9,w=ie+ge|0,fe^=w<<13|w>>>32-13,w=fe+ie|0,ce^=w<<18|w>>>32-18,w=re+le|0,P^=w<<7|w>>>32-7,w=P+re|0,U^=w<<9|w>>>32-9,w=U+P|0,le^=w<<13|w>>>32-13,w=le+U|0,re^=w<<18|w>>>32-18,w=z+q|0,W^=w<<7|w>>>32-7,w=W+z|0,D^=w<<9|w>>>32-9,w=D+W|0,q^=w<<13|w>>>32-13,w=q+D|0,z^=w<<18|w>>>32-18,w=Pe+Ue|0,ye^=w<<7|w>>>32-7,w=ye+Pe|0,Le^=w<<9|w>>>32-9,w=Le+ye|0,Ue^=w<<13|w>>>32-13,w=Ue+Le|0,Pe^=w<<18|w>>>32-18;f[0]=ce>>>0&255,f[1]=ce>>>8&255,f[2]=ce>>>16&255,f[3]=ce>>>24&255,f[4]=re>>>0&255,f[5]=re>>>8&255,f[6]=re>>>16&255,f[7]=re>>>24&255,f[8]=z>>>0&255,f[9]=z>>>8&255,f[10]=z>>>16&255,f[11]=z>>>24&255,f[12]=Pe>>>0&255,f[13]=Pe>>>8&255,f[14]=Pe>>>16&255,f[15]=Pe>>>24&255,f[16]=P>>>0&255,f[17]=P>>>8&255,f[18]=P>>>16&255,f[19]=P>>>24&255,f[20]=U>>>0&255,f[21]=U>>>8&255,f[22]=U>>>16&255,f[23]=U>>>24&255,f[24]=D>>>0&255,f[25]=D>>>8&255,f[26]=D>>>16&255,f[27]=D>>>24&255,f[28]=q>>>0&255,f[29]=q>>>8&255,f[30]=q>>>16&255,f[31]=q>>>24&255}function K(f,d,l,a){C(f,d,l,a)}function A(f,d,l,a){v(f,d,l,a)}var O=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function M(f,d,l,a,h,E,R){var F=new Uint8Array(16),Y=new Uint8Array(64),de,ne;for(ne=0;ne<16;ne++)F[ne]=0;for(ne=0;ne<8;ne++)F[ne]=E[ne];for(;h>=64;){for(K(Y,F,R,O),ne=0;ne<64;ne++)f[d+ne]=l[a+ne]^Y[ne];for(de=1,ne=8;ne<16;ne++)de=de+(F[ne]&255)|0,F[ne]=de&255,de>>>=8;h-=64,d+=64,a+=64}if(h>0)for(K(Y,F,R,O),ne=0;ne<h;ne++)f[d+ne]=l[a+ne]^Y[ne];return 0}function H(f,d,l,a,h){var E=new Uint8Array(16),R=new Uint8Array(64),F,Y;for(Y=0;Y<16;Y++)E[Y]=0;for(Y=0;Y<8;Y++)E[Y]=a[Y];for(;l>=64;){for(K(R,E,h,O),Y=0;Y<64;Y++)f[d+Y]=R[Y];for(F=1,Y=8;Y<16;Y++)F=F+(E[Y]&255)|0,E[Y]=F&255,F>>>=8;l-=64,d+=64}if(l>0)for(K(R,E,h,O),Y=0;Y<l;Y++)f[d+Y]=R[Y];return 0}function _e(f,d,l,a,h){var E=new Uint8Array(32);A(E,a,h,O);for(var R=new Uint8Array(8),F=0;F<8;F++)R[F]=a[F+16];return H(f,d,l,R,E)}function xe(f,d,l,a,h,E,R){var F=new Uint8Array(32);A(F,E,R,O);for(var Y=new Uint8Array(8),de=0;de<8;de++)Y[de]=E[de+16];return M(f,d,l,a,h,Y,F)}var me=function(f){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var d,l,a,h,E,R,F,Y;d=f[0]&255|(f[1]&255)<<8,this.r[0]=d&8191,l=f[2]&255|(f[3]&255)<<8,this.r[1]=(d>>>13|l<<3)&8191,a=f[4]&255|(f[5]&255)<<8,this.r[2]=(l>>>10|a<<6)&7939,h=f[6]&255|(f[7]&255)<<8,this.r[3]=(a>>>7|h<<9)&8191,E=f[8]&255|(f[9]&255)<<8,this.r[4]=(h>>>4|E<<12)&255,this.r[5]=E>>>1&8190,R=f[10]&255|(f[11]&255)<<8,this.r[6]=(E>>>14|R<<2)&8191,F=f[12]&255|(f[13]&255)<<8,this.r[7]=(R>>>11|F<<5)&8065,Y=f[14]&255|(f[15]&255)<<8,this.r[8]=(F>>>8|Y<<8)&8191,this.r[9]=Y>>>5&127,this.pad[0]=f[16]&255|(f[17]&255)<<8,this.pad[1]=f[18]&255|(f[19]&255)<<8,this.pad[2]=f[20]&255|(f[21]&255)<<8,this.pad[3]=f[22]&255|(f[23]&255)<<8,this.pad[4]=f[24]&255|(f[25]&255)<<8,this.pad[5]=f[26]&255|(f[27]&255)<<8,this.pad[6]=f[28]&255|(f[29]&255)<<8,this.pad[7]=f[30]&255|(f[31]&255)<<8};me.prototype.blocks=function(f,d,l){for(var a=this.fin?0:2048,h,E,R,F,Y,de,ne,We,ae,Ee,Be,Ce,Te,Ie,Re,ke,ce,ge,ie,fe=this.h[0],le=this.h[1],re=this.h[2],P=this.h[3],U=this.h[4],D=this.h[5],q=this.h[6],z=this.h[7],W=this.h[8],ye=this.h[9],Le=this.r[0],Ue=this.r[1],Pe=this.r[2],w=this.r[3],Fe=this.r[4],Ge=this.r[5],Ve=this.r[6],Oe=this.r[7],De=this.r[8],$e=this.r[9];l>=16;)h=f[d+0]&255|(f[d+1]&255)<<8,fe+=h&8191,E=f[d+2]&255|(f[d+3]&255)<<8,le+=(h>>>13|E<<3)&8191,R=f[d+4]&255|(f[d+5]&255)<<8,re+=(E>>>10|R<<6)&8191,F=f[d+6]&255|(f[d+7]&255)<<8,P+=(R>>>7|F<<9)&8191,Y=f[d+8]&255|(f[d+9]&255)<<8,U+=(F>>>4|Y<<12)&8191,D+=Y>>>1&8191,de=f[d+10]&255|(f[d+11]&255)<<8,q+=(Y>>>14|de<<2)&8191,ne=f[d+12]&255|(f[d+13]&255)<<8,z+=(de>>>11|ne<<5)&8191,We=f[d+14]&255|(f[d+15]&255)<<8,W+=(ne>>>8|We<<8)&8191,ye+=We>>>5|a,ae=0,Ee=ae,Ee+=fe*Le,Ee+=le*(5*$e),Ee+=re*(5*De),Ee+=P*(5*Oe),Ee+=U*(5*Ve),ae=Ee>>>13,Ee&=8191,Ee+=D*(5*Ge),Ee+=q*(5*Fe),Ee+=z*(5*w),Ee+=W*(5*Pe),Ee+=ye*(5*Ue),ae+=Ee>>>13,Ee&=8191,Be=ae,Be+=fe*Ue,Be+=le*Le,Be+=re*(5*$e),Be+=P*(5*De),Be+=U*(5*Oe),ae=Be>>>13,Be&=8191,Be+=D*(5*Ve),Be+=q*(5*Ge),Be+=z*(5*Fe),Be+=W*(5*w),Be+=ye*(5*Pe),ae+=Be>>>13,Be&=8191,Ce=ae,Ce+=fe*Pe,Ce+=le*Ue,Ce+=re*Le,Ce+=P*(5*$e),Ce+=U*(5*De),ae=Ce>>>13,Ce&=8191,Ce+=D*(5*Oe),Ce+=q*(5*Ve),Ce+=z*(5*Ge),Ce+=W*(5*Fe),Ce+=ye*(5*w),ae+=Ce>>>13,Ce&=8191,Te=ae,Te+=fe*w,Te+=le*Pe,Te+=re*Ue,Te+=P*Le,Te+=U*(5*$e),ae=Te>>>13,Te&=8191,Te+=D*(5*De),Te+=q*(5*Oe),Te+=z*(5*Ve),Te+=W*(5*Ge),Te+=ye*(5*Fe),ae+=Te>>>13,Te&=8191,Ie=ae,Ie+=fe*Fe,Ie+=le*w,Ie+=re*Pe,Ie+=P*Ue,Ie+=U*Le,ae=Ie>>>13,Ie&=8191,Ie+=D*(5*$e),Ie+=q*(5*De),Ie+=z*(5*Oe),Ie+=W*(5*Ve),Ie+=ye*(5*Ge),ae+=Ie>>>13,Ie&=8191,Re=ae,Re+=fe*Ge,Re+=le*Fe,Re+=re*w,Re+=P*Pe,Re+=U*Ue,ae=Re>>>13,Re&=8191,Re+=D*Le,Re+=q*(5*$e),Re+=z*(5*De),Re+=W*(5*Oe),Re+=ye*(5*Ve),ae+=Re>>>13,Re&=8191,ke=ae,ke+=fe*Ve,ke+=le*Ge,ke+=re*Fe,ke+=P*w,ke+=U*Pe,ae=ke>>>13,ke&=8191,ke+=D*Ue,ke+=q*Le,ke+=z*(5*$e),ke+=W*(5*De),ke+=ye*(5*Oe),ae+=ke>>>13,ke&=8191,ce=ae,ce+=fe*Oe,ce+=le*Ve,ce+=re*Ge,ce+=P*Fe,ce+=U*w,ae=ce>>>13,ce&=8191,ce+=D*Pe,ce+=q*Ue,ce+=z*Le,ce+=W*(5*$e),ce+=ye*(5*De),ae+=ce>>>13,ce&=8191,ge=ae,ge+=fe*De,ge+=le*Oe,ge+=re*Ve,ge+=P*Ge,ge+=U*Fe,ae=ge>>>13,ge&=8191,ge+=D*w,ge+=q*Pe,ge+=z*Ue,ge+=W*Le,ge+=ye*(5*$e),ae+=ge>>>13,ge&=8191,ie=ae,ie+=fe*$e,ie+=le*De,ie+=re*Oe,ie+=P*Ve,ie+=U*Ge,ae=ie>>>13,ie&=8191,ie+=D*Fe,ie+=q*w,ie+=z*Pe,ie+=W*Ue,ie+=ye*Le,ae+=ie>>>13,ie&=8191,ae=(ae<<2)+ae|0,ae=ae+Ee|0,Ee=ae&8191,ae=ae>>>13,Be+=ae,fe=Ee,le=Be,re=Ce,P=Te,U=Ie,D=Re,q=ke,z=ce,W=ge,ye=ie,d+=16,l-=16;this.h[0]=fe,this.h[1]=le,this.h[2]=re,this.h[3]=P,this.h[4]=U,this.h[5]=D,this.h[6]=q,this.h[7]=z,this.h[8]=W,this.h[9]=ye},me.prototype.finish=function(f,d){var l=new Uint16Array(10),a,h,E,R;if(this.leftover){for(R=this.leftover,this.buffer[R++]=1;R<16;R++)this.buffer[R]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(a=this.h[1]>>>13,this.h[1]&=8191,R=2;R<10;R++)this.h[R]+=a,a=this.h[R]>>>13,this.h[R]&=8191;for(this.h[0]+=a*5,a=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=a,a=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=a,l[0]=this.h[0]+5,a=l[0]>>>13,l[0]&=8191,R=1;R<10;R++)l[R]=this.h[R]+a,a=l[R]>>>13,l[R]&=8191;for(l[9]-=8192,h=(a^1)-1,R=0;R<10;R++)l[R]&=h;for(h=~h,R=0;R<10;R++)this.h[R]=this.h[R]&h|l[R];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,E=this.h[0]+this.pad[0],this.h[0]=E&65535,R=1;R<8;R++)E=(this.h[R]+this.pad[R]|0)+(E>>>16)|0,this.h[R]=E&65535;f[d+0]=this.h[0]>>>0&255,f[d+1]=this.h[0]>>>8&255,f[d+2]=this.h[1]>>>0&255,f[d+3]=this.h[1]>>>8&255,f[d+4]=this.h[2]>>>0&255,f[d+5]=this.h[2]>>>8&255,f[d+6]=this.h[3]>>>0&255,f[d+7]=this.h[3]>>>8&255,f[d+8]=this.h[4]>>>0&255,f[d+9]=this.h[4]>>>8&255,f[d+10]=this.h[5]>>>0&255,f[d+11]=this.h[5]>>>8&255,f[d+12]=this.h[6]>>>0&255,f[d+13]=this.h[6]>>>8&255,f[d+14]=this.h[7]>>>0&255,f[d+15]=this.h[7]>>>8&255},me.prototype.update=function(f,d,l){var a,h;if(this.leftover){for(h=16-this.leftover,h>l&&(h=l),a=0;a<h;a++)this.buffer[this.leftover+a]=f[d+a];if(l-=h,d+=h,this.leftover+=h,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(l>=16&&(h=l-l%16,this.blocks(f,d,h),d+=h,l-=h),l){for(a=0;a<l;a++)this.buffer[this.leftover+a]=f[d+a];this.leftover+=l}};function He(f,d,l,a,h,E){var R=new me(E);return R.update(l,a,h),R.finish(f,d),0}function Qe(f,d,l,a,h,E){var R=new Uint8Array(16);return He(R,0,l,a,h,E),x(f,d,R,0)}function pt(f,d,l,a,h){var E;if(l<32)return-1;for(xe(f,0,d,0,l,a,h),He(f,16,f,32,l-32,f),E=0;E<16;E++)f[E]=0;return 0}function J(f,d,l,a,h){var E,R=new Uint8Array(32);if(l<32||(_e(R,0,32,a,h),Qe(d,16,d,32,l-32,R)!==0))return-1;for(xe(f,0,d,0,l,a,h),E=0;E<32;E++)f[E]=0;return 0}function te(f,d){var l;for(l=0;l<16;l++)f[l]=d[l]|0}function Ae(f){var d,l,a=1;for(d=0;d<16;d++)l=f[d]+a+65535,a=Math.floor(l/65536),f[d]=l-a*65536;f[0]+=a-1+37*(a-1)}function Z(f,d,l){for(var a,h=~(l-1),E=0;E<16;E++)a=h&(f[E]^d[E]),f[E]^=a,d[E]^=a}function _(f,d){var l,a,h,E=t(),R=t();for(l=0;l<16;l++)R[l]=d[l];for(Ae(R),Ae(R),Ae(R),a=0;a<2;a++){for(E[0]=R[0]-65517,l=1;l<15;l++)E[l]=R[l]-65535-(E[l-1]>>16&1),E[l-1]&=65535;E[15]=R[15]-32767-(E[14]>>16&1),h=E[15]>>16&1,E[14]&=65535,Z(R,E,1-h)}for(l=0;l<16;l++)f[2*l]=R[l]&255,f[2*l+1]=R[l]>>8}function k(f,d){var l=new Uint8Array(32),a=new Uint8Array(32);return _(l,f),_(a,d),B(l,0,a,0)}function N(f){var d=new Uint8Array(32);return _(d,f),d[0]&1}function j(f,d){var l;for(l=0;l<16;l++)f[l]=d[2*l]+(d[2*l+1]<<8);f[15]&=32767}function V(f,d,l){for(var a=0;a<16;a++)f[a]=d[a]+l[a]}function G(f,d,l){for(var a=0;a<16;a++)f[a]=d[a]-l[a]}function X(f,d,l){var a,h,E=0,R=0,F=0,Y=0,de=0,ne=0,We=0,ae=0,Ee=0,Be=0,Ce=0,Te=0,Ie=0,Re=0,ke=0,ce=0,ge=0,ie=0,fe=0,le=0,re=0,P=0,U=0,D=0,q=0,z=0,W=0,ye=0,Le=0,Ue=0,Pe=0,w=l[0],Fe=l[1],Ge=l[2],Ve=l[3],Oe=l[4],De=l[5],$e=l[6],gt=l[7],et=l[8],ft=l[9],ut=l[10],lt=l[11],xt=l[12],Bt=l[13],It=l[14],kt=l[15];a=d[0],E+=a*w,R+=a*Fe,F+=a*Ge,Y+=a*Ve,de+=a*Oe,ne+=a*De,We+=a*$e,ae+=a*gt,Ee+=a*et,Be+=a*ft,Ce+=a*ut,Te+=a*lt,Ie+=a*xt,Re+=a*Bt,ke+=a*It,ce+=a*kt,a=d[1],R+=a*w,F+=a*Fe,Y+=a*Ge,de+=a*Ve,ne+=a*Oe,We+=a*De,ae+=a*$e,Ee+=a*gt,Be+=a*et,Ce+=a*ft,Te+=a*ut,Ie+=a*lt,Re+=a*xt,ke+=a*Bt,ce+=a*It,ge+=a*kt,a=d[2],F+=a*w,Y+=a*Fe,de+=a*Ge,ne+=a*Ve,We+=a*Oe,ae+=a*De,Ee+=a*$e,Be+=a*gt,Ce+=a*et,Te+=a*ft,Ie+=a*ut,Re+=a*lt,ke+=a*xt,ce+=a*Bt,ge+=a*It,ie+=a*kt,a=d[3],Y+=a*w,de+=a*Fe,ne+=a*Ge,We+=a*Ve,ae+=a*Oe,Ee+=a*De,Be+=a*$e,Ce+=a*gt,Te+=a*et,Ie+=a*ft,Re+=a*ut,ke+=a*lt,ce+=a*xt,ge+=a*Bt,ie+=a*It,fe+=a*kt,a=d[4],de+=a*w,ne+=a*Fe,We+=a*Ge,ae+=a*Ve,Ee+=a*Oe,Be+=a*De,Ce+=a*$e,Te+=a*gt,Ie+=a*et,Re+=a*ft,ke+=a*ut,ce+=a*lt,ge+=a*xt,ie+=a*Bt,fe+=a*It,le+=a*kt,a=d[5],ne+=a*w,We+=a*Fe,ae+=a*Ge,Ee+=a*Ve,Be+=a*Oe,Ce+=a*De,Te+=a*$e,Ie+=a*gt,Re+=a*et,ke+=a*ft,ce+=a*ut,ge+=a*lt,ie+=a*xt,fe+=a*Bt,le+=a*It,re+=a*kt,a=d[6],We+=a*w,ae+=a*Fe,Ee+=a*Ge,Be+=a*Ve,Ce+=a*Oe,Te+=a*De,Ie+=a*$e,Re+=a*gt,ke+=a*et,ce+=a*ft,ge+=a*ut,ie+=a*lt,fe+=a*xt,le+=a*Bt,re+=a*It,P+=a*kt,a=d[7],ae+=a*w,Ee+=a*Fe,Be+=a*Ge,Ce+=a*Ve,Te+=a*Oe,Ie+=a*De,Re+=a*$e,ke+=a*gt,ce+=a*et,ge+=a*ft,ie+=a*ut,fe+=a*lt,le+=a*xt,re+=a*Bt,P+=a*It,U+=a*kt,a=d[8],Ee+=a*w,Be+=a*Fe,Ce+=a*Ge,Te+=a*Ve,Ie+=a*Oe,Re+=a*De,ke+=a*$e,ce+=a*gt,ge+=a*et,ie+=a*ft,fe+=a*ut,le+=a*lt,re+=a*xt,P+=a*Bt,U+=a*It,D+=a*kt,a=d[9],Be+=a*w,Ce+=a*Fe,Te+=a*Ge,Ie+=a*Ve,Re+=a*Oe,ke+=a*De,ce+=a*$e,ge+=a*gt,ie+=a*et,fe+=a*ft,le+=a*ut,re+=a*lt,P+=a*xt,U+=a*Bt,D+=a*It,q+=a*kt,a=d[10],Ce+=a*w,Te+=a*Fe,Ie+=a*Ge,Re+=a*Ve,ke+=a*Oe,ce+=a*De,ge+=a*$e,ie+=a*gt,fe+=a*et,le+=a*ft,re+=a*ut,P+=a*lt,U+=a*xt,D+=a*Bt,q+=a*It,z+=a*kt,a=d[11],Te+=a*w,Ie+=a*Fe,Re+=a*Ge,ke+=a*Ve,ce+=a*Oe,ge+=a*De,ie+=a*$e,fe+=a*gt,le+=a*et,re+=a*ft,P+=a*ut,U+=a*lt,D+=a*xt,q+=a*Bt,z+=a*It,W+=a*kt,a=d[12],Ie+=a*w,Re+=a*Fe,ke+=a*Ge,ce+=a*Ve,ge+=a*Oe,ie+=a*De,fe+=a*$e,le+=a*gt,re+=a*et,P+=a*ft,U+=a*ut,D+=a*lt,q+=a*xt,z+=a*Bt,W+=a*It,ye+=a*kt,a=d[13],Re+=a*w,ke+=a*Fe,ce+=a*Ge,ge+=a*Ve,ie+=a*Oe,fe+=a*De,le+=a*$e,re+=a*gt,P+=a*et,U+=a*ft,D+=a*ut,q+=a*lt,z+=a*xt,W+=a*Bt,ye+=a*It,Le+=a*kt,a=d[14],ke+=a*w,ce+=a*Fe,ge+=a*Ge,ie+=a*Ve,fe+=a*Oe,le+=a*De,re+=a*$e,P+=a*gt,U+=a*et,D+=a*ft,q+=a*ut,z+=a*lt,W+=a*xt,ye+=a*Bt,Le+=a*It,Ue+=a*kt,a=d[15],ce+=a*w,ge+=a*Fe,ie+=a*Ge,fe+=a*Ve,le+=a*Oe,re+=a*De,P+=a*$e,U+=a*gt,D+=a*et,q+=a*ft,z+=a*ut,W+=a*lt,ye+=a*xt,Le+=a*Bt,Ue+=a*It,Pe+=a*kt,E+=38*ge,R+=38*ie,F+=38*fe,Y+=38*le,de+=38*re,ne+=38*P,We+=38*U,ae+=38*D,Ee+=38*q,Be+=38*z,Ce+=38*W,Te+=38*ye,Ie+=38*Le,Re+=38*Ue,ke+=38*Pe,h=1,a=E+h+65535,h=Math.floor(a/65536),E=a-h*65536,a=R+h+65535,h=Math.floor(a/65536),R=a-h*65536,a=F+h+65535,h=Math.floor(a/65536),F=a-h*65536,a=Y+h+65535,h=Math.floor(a/65536),Y=a-h*65536,a=de+h+65535,h=Math.floor(a/65536),de=a-h*65536,a=ne+h+65535,h=Math.floor(a/65536),ne=a-h*65536,a=We+h+65535,h=Math.floor(a/65536),We=a-h*65536,a=ae+h+65535,h=Math.floor(a/65536),ae=a-h*65536,a=Ee+h+65535,h=Math.floor(a/65536),Ee=a-h*65536,a=Be+h+65535,h=Math.floor(a/65536),Be=a-h*65536,a=Ce+h+65535,h=Math.floor(a/65536),Ce=a-h*65536,a=Te+h+65535,h=Math.floor(a/65536),Te=a-h*65536,a=Ie+h+65535,h=Math.floor(a/65536),Ie=a-h*65536,a=Re+h+65535,h=Math.floor(a/65536),Re=a-h*65536,a=ke+h+65535,h=Math.floor(a/65536),ke=a-h*65536,a=ce+h+65535,h=Math.floor(a/65536),ce=a-h*65536,E+=h-1+37*(h-1),h=1,a=E+h+65535,h=Math.floor(a/65536),E=a-h*65536,a=R+h+65535,h=Math.floor(a/65536),R=a-h*65536,a=F+h+65535,h=Math.floor(a/65536),F=a-h*65536,a=Y+h+65535,h=Math.floor(a/65536),Y=a-h*65536,a=de+h+65535,h=Math.floor(a/65536),de=a-h*65536,a=ne+h+65535,h=Math.floor(a/65536),ne=a-h*65536,a=We+h+65535,h=Math.floor(a/65536),We=a-h*65536,a=ae+h+65535,h=Math.floor(a/65536),ae=a-h*65536,a=Ee+h+65535,h=Math.floor(a/65536),Ee=a-h*65536,a=Be+h+65535,h=Math.floor(a/65536),Be=a-h*65536,a=Ce+h+65535,h=Math.floor(a/65536),Ce=a-h*65536,a=Te+h+65535,h=Math.floor(a/65536),Te=a-h*65536,a=Ie+h+65535,h=Math.floor(a/65536),Ie=a-h*65536,a=Re+h+65535,h=Math.floor(a/65536),Re=a-h*65536,a=ke+h+65535,h=Math.floor(a/65536),ke=a-h*65536,a=ce+h+65535,h=Math.floor(a/65536),ce=a-h*65536,E+=h-1+37*(h-1),f[0]=E,f[1]=R,f[2]=F,f[3]=Y,f[4]=de,f[5]=ne,f[6]=We,f[7]=ae,f[8]=Ee,f[9]=Be,f[10]=Ce,f[11]=Te,f[12]=Ie,f[13]=Re,f[14]=ke,f[15]=ce}function ue(f,d){X(f,d,d)}function ve(f,d){var l=t(),a;for(a=0;a<16;a++)l[a]=d[a];for(a=253;a>=0;a--)ue(l,l),a!==2&&a!==4&&X(l,l,d);for(a=0;a<16;a++)f[a]=l[a]}function Ze(f,d){var l=t(),a;for(a=0;a<16;a++)l[a]=d[a];for(a=250;a>=0;a--)ue(l,l),a!==1&&X(l,l,d);for(a=0;a<16;a++)f[a]=l[a]}function Ke(f,d,l){var a=new Uint8Array(32),h=new Float64Array(80),E,R,F=t(),Y=t(),de=t(),ne=t(),We=t(),ae=t();for(R=0;R<31;R++)a[R]=d[R];for(a[31]=d[31]&127|64,a[0]&=248,j(h,l),R=0;R<16;R++)Y[R]=h[R],ne[R]=F[R]=de[R]=0;for(F[0]=ne[0]=1,R=254;R>=0;--R)E=a[R>>>3]>>>(R&7)&1,Z(F,Y,E),Z(de,ne,E),V(We,F,de),G(F,F,de),V(de,Y,ne),G(Y,Y,ne),ue(ne,We),ue(ae,F),X(F,de,F),X(de,Y,We),V(We,F,de),G(F,F,de),ue(Y,F),G(de,ne,ae),X(F,de,u),V(F,F,ne),X(de,de,F),X(F,ne,ae),X(ne,Y,h),ue(Y,We),Z(F,Y,E),Z(de,ne,E);for(R=0;R<16;R++)h[R+16]=F[R],h[R+32]=de[R],h[R+48]=Y[R],h[R+64]=ne[R];var Ee=h.subarray(32),Be=h.subarray(16);return ve(Ee,Ee),X(Be,Be,Ee),_(f,Be),0}function Je(f,d){return Ke(f,d,o)}function yt(f,d){return r(d,32),Je(f,d)}function wt(f,d,l){var a=new Uint8Array(32);return Ke(a,l,d),A(f,s,a,O)}var nt=pt,Mt=J;function or(f,d,l,a,h,E){var R=new Uint8Array(32);return wt(R,h,E),nt(f,d,l,a,R)}function _r(f,d,l,a,h,E){var R=new Uint8Array(32);return wt(R,h,E),Mt(f,d,l,a,R)}var dn=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function On(f,d,l,a){for(var h=new Int32Array(16),E=new Int32Array(16),R,F,Y,de,ne,We,ae,Ee,Be,Ce,Te,Ie,Re,ke,ce,ge,ie,fe,le,re,P,U,D,q,z,W,ye=f[0],Le=f[1],Ue=f[2],Pe=f[3],w=f[4],Fe=f[5],Ge=f[6],Ve=f[7],Oe=d[0],De=d[1],$e=d[2],gt=d[3],et=d[4],ft=d[5],ut=d[6],lt=d[7],xt=0;a>=128;){for(le=0;le<16;le++)re=8*le+xt,h[le]=l[re+0]<<24|l[re+1]<<16|l[re+2]<<8|l[re+3],E[le]=l[re+4]<<24|l[re+5]<<16|l[re+6]<<8|l[re+7];for(le=0;le<80;le++)if(R=ye,F=Le,Y=Ue,de=Pe,ne=w,We=Fe,ae=Ge,Ee=Ve,Be=Oe,Ce=De,Te=$e,Ie=gt,Re=et,ke=ft,ce=ut,ge=lt,P=Ve,U=lt,D=U&65535,q=U>>>16,z=P&65535,W=P>>>16,P=(w>>>14|et<<32-14)^(w>>>18|et<<32-18)^(et>>>41-32|w<<32-(41-32)),U=(et>>>14|w<<32-14)^(et>>>18|w<<32-18)^(w>>>41-32|et<<32-(41-32)),D+=U&65535,q+=U>>>16,z+=P&65535,W+=P>>>16,P=w&Fe^~w&Ge,U=et&ft^~et&ut,D+=U&65535,q+=U>>>16,z+=P&65535,W+=P>>>16,P=dn[le*2],U=dn[le*2+1],D+=U&65535,q+=U>>>16,z+=P&65535,W+=P>>>16,P=h[le%16],U=E[le%16],D+=U&65535,q+=U>>>16,z+=P&65535,W+=P>>>16,q+=D>>>16,z+=q>>>16,W+=z>>>16,ie=z&65535|W<<16,fe=D&65535|q<<16,P=ie,U=fe,D=U&65535,q=U>>>16,z=P&65535,W=P>>>16,P=(ye>>>28|Oe<<32-28)^(Oe>>>34-32|ye<<32-(34-32))^(Oe>>>39-32|ye<<32-(39-32)),U=(Oe>>>28|ye<<32-28)^(ye>>>34-32|Oe<<32-(34-32))^(ye>>>39-32|Oe<<32-(39-32)),D+=U&65535,q+=U>>>16,z+=P&65535,W+=P>>>16,P=ye&Le^ye&Ue^Le&Ue,U=Oe&De^Oe&$e^De&$e,D+=U&65535,q+=U>>>16,z+=P&65535,W+=P>>>16,q+=D>>>16,z+=q>>>16,W+=z>>>16,Ee=z&65535|W<<16,ge=D&65535|q<<16,P=de,U=Ie,D=U&65535,q=U>>>16,z=P&65535,W=P>>>16,P=ie,U=fe,D+=U&65535,q+=U>>>16,z+=P&65535,W+=P>>>16,q+=D>>>16,z+=q>>>16,W+=z>>>16,de=z&65535|W<<16,Ie=D&65535|q<<16,Le=R,Ue=F,Pe=Y,w=de,Fe=ne,Ge=We,Ve=ae,ye=Ee,De=Be,$e=Ce,gt=Te,et=Ie,ft=Re,ut=ke,lt=ce,Oe=ge,le%16===15)for(re=0;re<16;re++)P=h[re],U=E[re],D=U&65535,q=U>>>16,z=P&65535,W=P>>>16,P=h[(re+9)%16],U=E[(re+9)%16],D+=U&65535,q+=U>>>16,z+=P&65535,W+=P>>>16,ie=h[(re+1)%16],fe=E[(re+1)%16],P=(ie>>>1|fe<<32-1)^(ie>>>8|fe<<32-8)^ie>>>7,U=(fe>>>1|ie<<32-1)^(fe>>>8|ie<<32-8)^(fe>>>7|ie<<32-7),D+=U&65535,q+=U>>>16,z+=P&65535,W+=P>>>16,ie=h[(re+14)%16],fe=E[(re+14)%16],P=(ie>>>19|fe<<32-19)^(fe>>>61-32|ie<<32-(61-32))^ie>>>6,U=(fe>>>19|ie<<32-19)^(ie>>>61-32|fe<<32-(61-32))^(fe>>>6|ie<<32-6),D+=U&65535,q+=U>>>16,z+=P&65535,W+=P>>>16,q+=D>>>16,z+=q>>>16,W+=z>>>16,h[re]=z&65535|W<<16,E[re]=D&65535|q<<16;P=ye,U=Oe,D=U&65535,q=U>>>16,z=P&65535,W=P>>>16,P=f[0],U=d[0],D+=U&65535,q+=U>>>16,z+=P&65535,W+=P>>>16,q+=D>>>16,z+=q>>>16,W+=z>>>16,f[0]=ye=z&65535|W<<16,d[0]=Oe=D&65535|q<<16,P=Le,U=De,D=U&65535,q=U>>>16,z=P&65535,W=P>>>16,P=f[1],U=d[1],D+=U&65535,q+=U>>>16,z+=P&65535,W+=P>>>16,q+=D>>>16,z+=q>>>16,W+=z>>>16,f[1]=Le=z&65535|W<<16,d[1]=De=D&65535|q<<16,P=Ue,U=$e,D=U&65535,q=U>>>16,z=P&65535,W=P>>>16,P=f[2],U=d[2],D+=U&65535,q+=U>>>16,z+=P&65535,W+=P>>>16,q+=D>>>16,z+=q>>>16,W+=z>>>16,f[2]=Ue=z&65535|W<<16,d[2]=$e=D&65535|q<<16,P=Pe,U=gt,D=U&65535,q=U>>>16,z=P&65535,W=P>>>16,P=f[3],U=d[3],D+=U&65535,q+=U>>>16,z+=P&65535,W+=P>>>16,q+=D>>>16,z+=q>>>16,W+=z>>>16,f[3]=Pe=z&65535|W<<16,d[3]=gt=D&65535|q<<16,P=w,U=et,D=U&65535,q=U>>>16,z=P&65535,W=P>>>16,P=f[4],U=d[4],D+=U&65535,q+=U>>>16,z+=P&65535,W+=P>>>16,q+=D>>>16,z+=q>>>16,W+=z>>>16,f[4]=w=z&65535|W<<16,d[4]=et=D&65535|q<<16,P=Fe,U=ft,D=U&65535,q=U>>>16,z=P&65535,W=P>>>16,P=f[5],U=d[5],D+=U&65535,q+=U>>>16,z+=P&65535,W+=P>>>16,q+=D>>>16,z+=q>>>16,W+=z>>>16,f[5]=Fe=z&65535|W<<16,d[5]=ft=D&65535|q<<16,P=Ge,U=ut,D=U&65535,q=U>>>16,z=P&65535,W=P>>>16,P=f[6],U=d[6],D+=U&65535,q+=U>>>16,z+=P&65535,W+=P>>>16,q+=D>>>16,z+=q>>>16,W+=z>>>16,f[6]=Ge=z&65535|W<<16,d[6]=ut=D&65535|q<<16,P=Ve,U=lt,D=U&65535,q=U>>>16,z=P&65535,W=P>>>16,P=f[7],U=d[7],D+=U&65535,q+=U>>>16,z+=P&65535,W+=P>>>16,q+=D>>>16,z+=q>>>16,W+=z>>>16,f[7]=Ve=z&65535|W<<16,d[7]=lt=D&65535|q<<16,xt+=128,a-=128}return a}function ir(f,d,l){var a=new Int32Array(8),h=new Int32Array(8),E=new Uint8Array(256),R,F=l;for(a[0]=1779033703,a[1]=3144134277,a[2]=1013904242,a[3]=2773480762,a[4]=1359893119,a[5]=2600822924,a[6]=528734635,a[7]=1541459225,h[0]=4089235720,h[1]=2227873595,h[2]=4271175723,h[3]=1595750129,h[4]=2917565137,h[5]=725511199,h[6]=4215389547,h[7]=327033209,On(a,h,d,l),l%=128,R=0;R<l;R++)E[R]=d[F-l+R];for(E[l]=128,l=256-128*(l<112?1:0),E[l-9]=0,m(E,l-8,F/536870912|0,F<<3),On(a,h,E,l),R=0;R<8;R++)m(f,8*R,a[R],h[R]);return 0}function zr(f,d){var l=t(),a=t(),h=t(),E=t(),R=t(),F=t(),Y=t(),de=t(),ne=t();G(l,f[1],f[0]),G(ne,d[1],d[0]),X(l,l,ne),V(a,f[0],f[1]),V(ne,d[0],d[1]),X(a,a,ne),X(h,f[3],d[3]),X(h,h,g),X(E,f[2],d[2]),V(E,E,E),G(R,a,l),G(F,E,h),V(Y,E,h),V(de,a,l),X(f[0],R,F),X(f[1],de,Y),X(f[2],Y,F),X(f[3],R,de)}function Nn(f,d,l){var a;for(a=0;a<4;a++)Z(f[a],d[a],l)}function Er(f,d){var l=t(),a=t(),h=t();ve(h,d[2]),X(l,d[0],h),X(a,d[1],h),_(f,a),f[31]^=N(l)<<7}function Kr(f,d,l){var a,h;for(te(f[0],i),te(f[1],c),te(f[2],c),te(f[3],i),h=255;h>=0;--h)a=l[h/8|0]>>(h&7)&1,Nn(f,d,a),zr(d,f),zr(f,f),Nn(f,d,a)}function dr(f,d){var l=[t(),t(),t(),t()];te(l[0],b),te(l[1],I),te(l[2],c),X(l[3],b,I),Kr(f,l,d)}function Hr(f,d,l){var a=new Uint8Array(64),h=[t(),t(),t(),t()],E;for(l||r(d,32),ir(a,d,32),a[0]&=248,a[31]&=127,a[31]|=64,dr(h,a),Er(f,h),E=0;E<32;E++)d[E+32]=f[E];return 0}var Ar=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Dr(f,d){var l,a,h,E;for(a=63;a>=32;--a){for(l=0,h=a-32,E=a-12;h<E;++h)d[h]+=l-16*d[a]*Ar[h-(a-32)],l=Math.floor((d[h]+128)/256),d[h]-=l*256;d[h]+=l,d[a]=0}for(l=0,h=0;h<32;h++)d[h]+=l-(d[31]>>4)*Ar[h],l=d[h]>>8,d[h]&=255;for(h=0;h<32;h++)d[h]-=l*Ar[h];for(a=0;a<32;a++)d[a+1]+=d[a]>>8,f[a]=d[a]&255}function $r(f){var d=new Float64Array(64),l;for(l=0;l<64;l++)d[l]=f[l];for(l=0;l<64;l++)f[l]=0;Dr(f,d)}function hn(f,d,l,a){var h=new Uint8Array(64),E=new Uint8Array(64),R=new Uint8Array(64),F,Y,de=new Float64Array(64),ne=[t(),t(),t(),t()];ir(h,a,32),h[0]&=248,h[31]&=127,h[31]|=64;var We=l+64;for(F=0;F<l;F++)f[64+F]=d[F];for(F=0;F<32;F++)f[32+F]=h[32+F];for(ir(R,f.subarray(32),l+32),$r(R),dr(ne,R),Er(f,ne),F=32;F<64;F++)f[F]=a[F];for(ir(E,f,l+64),$r(E),F=0;F<64;F++)de[F]=0;for(F=0;F<32;F++)de[F]=R[F];for(F=0;F<32;F++)for(Y=0;Y<32;Y++)de[F+Y]+=E[F]*h[Y];return Dr(f.subarray(32),de),We}function ls(f,d){var l=t(),a=t(),h=t(),E=t(),R=t(),F=t(),Y=t();return te(f[2],c),j(f[1],d),ue(h,f[1]),X(E,h,p),G(h,h,f[2]),V(E,f[2],E),ue(R,E),ue(F,R),X(Y,F,R),X(l,Y,h),X(l,l,E),Ze(l,l),X(l,l,h),X(l,l,E),X(l,l,E),X(f[0],l,E),ue(a,f[0]),X(a,a,E),k(a,h)&&X(f[0],f[0],S),ue(a,f[0]),X(a,a,E),k(a,h)?-1:(N(f[0])===d[31]>>7&&G(f[0],i,f[0]),X(f[3],f[0],f[1]),0)}function pn(f,d,l,a){var h,E=new Uint8Array(32),R=new Uint8Array(64),F=[t(),t(),t(),t()],Y=[t(),t(),t(),t()];if(l<64||ls(Y,a))return-1;for(h=0;h<l;h++)f[h]=d[h];for(h=0;h<32;h++)f[h+32]=a[h];if(ir(R,f,l),$r(R),Kr(F,Y,R),dr(Y,d.subarray(32)),zr(F,Y),Er(E,F),l-=64,B(d,0,E,0)){for(h=0;h<l;h++)f[h]=0;return-1}for(h=0;h<l;h++)f[h]=d[h+64];return l}var gn=32,jr=24,yn=32,Wr=16,wn=32,Mn=32,bn=32,xn=32,ds=32,Oo=jr,cc=yn,fc=Wr,ar=64,Br=32,Gr=64,hs=32,ps=64;e.lowlevel={crypto_core_hsalsa20:A,crypto_stream_xor:xe,crypto_stream:_e,crypto_stream_salsa20_xor:M,crypto_stream_salsa20:H,crypto_onetimeauth:He,crypto_onetimeauth_verify:Qe,crypto_verify_16:x,crypto_verify_32:B,crypto_secretbox:pt,crypto_secretbox_open:J,crypto_scalarmult:Ke,crypto_scalarmult_base:Je,crypto_box_beforenm:wt,crypto_box_afternm:nt,crypto_box:or,crypto_box_open:_r,crypto_box_keypair:yt,crypto_hash:ir,crypto_sign:hn,crypto_sign_keypair:Hr,crypto_sign_open:pn,crypto_secretbox_KEYBYTES:gn,crypto_secretbox_NONCEBYTES:jr,crypto_secretbox_ZEROBYTES:yn,crypto_secretbox_BOXZEROBYTES:Wr,crypto_scalarmult_BYTES:wn,crypto_scalarmult_SCALARBYTES:Mn,crypto_box_PUBLICKEYBYTES:bn,crypto_box_SECRETKEYBYTES:xn,crypto_box_BEFORENMBYTES:ds,crypto_box_NONCEBYTES:Oo,crypto_box_ZEROBYTES:cc,crypto_box_BOXZEROBYTES:fc,crypto_sign_BYTES:ar,crypto_sign_PUBLICKEYBYTES:Br,crypto_sign_SECRETKEYBYTES:Gr,crypto_sign_SEEDBYTES:hs,crypto_hash_BYTES:ps,gf:t,D:p,L:Ar,pack:Er,pack25519:_,unpack25519:j,M:X,A:V,S:ue,Z:G,pow2523:Ze,add:zr,set25519:te,modL:Dr,scalarmult:Kr,scalarbase:dr};function No(f,d){if(f.length!==gn)throw new Error("bad key size");if(d.length!==jr)throw new Error("bad nonce size")}function uc(f,d){if(f.length!==bn)throw new Error("bad public key size");if(d.length!==xn)throw new Error("bad secret key size")}function qt(){for(var f=0;f<arguments.length;f++)if(!(arguments[f]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Mo(f){for(var d=0;d<f.length;d++)f[d]=0}e.randomBytes=function(f){var d=new Uint8Array(f);return r(d,f),d},e.secretbox=function(f,d,l){qt(f,d,l),No(l,d);for(var a=new Uint8Array(yn+f.length),h=new Uint8Array(a.length),E=0;E<f.length;E++)a[E+yn]=f[E];return pt(h,a,a.length,d,l),h.subarray(Wr)},e.secretbox.open=function(f,d,l){qt(f,d,l),No(l,d);for(var a=new Uint8Array(Wr+f.length),h=new Uint8Array(a.length),E=0;E<f.length;E++)a[E+Wr]=f[E];return a.length<32||J(h,a,a.length,d,l)!==0?null:h.subarray(yn)},e.secretbox.keyLength=gn,e.secretbox.nonceLength=jr,e.secretbox.overheadLength=Wr,e.scalarMult=function(f,d){if(qt(f,d),f.length!==Mn)throw new Error("bad n size");if(d.length!==wn)throw new Error("bad p size");var l=new Uint8Array(wn);return Ke(l,f,d),l},e.scalarMult.base=function(f){if(qt(f),f.length!==Mn)throw new Error("bad n size");var d=new Uint8Array(wn);return Je(d,f),d},e.scalarMult.scalarLength=Mn,e.scalarMult.groupElementLength=wn,e.box=function(f,d,l,a){var h=e.box.before(l,a);return e.secretbox(f,d,h)},e.box.before=function(f,d){qt(f,d),uc(f,d);var l=new Uint8Array(ds);return wt(l,f,d),l},e.box.after=e.secretbox,e.box.open=function(f,d,l,a){var h=e.box.before(l,a);return e.secretbox.open(f,d,h)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var f=new Uint8Array(bn),d=new Uint8Array(xn);return yt(f,d),{publicKey:f,secretKey:d}},e.box.keyPair.fromSecretKey=function(f){if(qt(f),f.length!==xn)throw new Error("bad secret key size");var d=new Uint8Array(bn);return Je(d,f),{publicKey:d,secretKey:new Uint8Array(f)}},e.box.publicKeyLength=bn,e.box.secretKeyLength=xn,e.box.sharedKeyLength=ds,e.box.nonceLength=Oo,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(f,d){if(qt(f,d),d.length!==Gr)throw new Error("bad secret key size");var l=new Uint8Array(ar+f.length);return hn(l,f,f.length,d),l},e.sign.open=function(f,d){if(qt(f,d),d.length!==Br)throw new Error("bad public key size");var l=new Uint8Array(f.length),a=pn(l,f,f.length,d);if(a<0)return null;for(var h=new Uint8Array(a),E=0;E<h.length;E++)h[E]=l[E];return h},e.sign.detached=function(f,d){for(var l=e.sign(f,d),a=new Uint8Array(ar),h=0;h<a.length;h++)a[h]=l[h];return a},e.sign.detached.verify=function(f,d,l){if(qt(f,d,l),d.length!==ar)throw new Error("bad signature size");if(l.length!==Br)throw new Error("bad public key size");var a=new Uint8Array(ar+f.length),h=new Uint8Array(ar+f.length),E;for(E=0;E<ar;E++)a[E]=d[E];for(E=0;E<f.length;E++)a[E+ar]=f[E];return pn(h,a,a.length,l)>=0},e.sign.keyPair=function(){var f=new Uint8Array(Br),d=new Uint8Array(Gr);return Hr(f,d),{publicKey:f,secretKey:d}},e.sign.keyPair.fromSecretKey=function(f){if(qt(f),f.length!==Gr)throw new Error("bad secret key size");for(var d=new Uint8Array(Br),l=0;l<d.length;l++)d[l]=f[32+l];return{publicKey:d,secretKey:new Uint8Array(f)}},e.sign.keyPair.fromSeed=function(f){if(qt(f),f.length!==hs)throw new Error("bad seed size");for(var d=new Uint8Array(Br),l=new Uint8Array(Gr),a=0;a<32;a++)l[a]=f[a];return Hr(d,l,!0),{publicKey:d,secretKey:l}},e.sign.publicKeyLength=Br,e.sign.secretKeyLength=Gr,e.sign.seedLength=hs,e.sign.signatureLength=ar,e.hash=function(f){qt(f);var d=new Uint8Array(ps);return ir(d,f,f.length),d},e.hash.hashLength=ps,e.verify=function(f,d){return qt(f,d),f.length===0||d.length===0||f.length!==d.length?!1:y(f,0,d,0,f.length)===0},e.setPRNG=function(f){r=f},function(){var f=typeof self<"u"?self.crypto||self.msCrypto:null;if(f&&f.getRandomValues){var d=65536;e.setPRNG(function(l,a){var h,E=new Uint8Array(a);for(h=0;h<a;h+=d)f.getRandomValues(E.subarray(h,h+Math.min(a-h,d)));for(h=0;h<a;h++)l[h]=E[h];Mo(E)})}else typeof gc<"u"&&(f=yc(),f&&f.randomBytes&&e.setPRNG(function(l,a){var h,E=f.randomBytes(a);for(h=0;h<a;h++)l[h]=E[h];Mo(E)}))}()})(n.exports?n.exports:self.nacl=self.nacl||{})})(rc);var th=rc.exports;const nc=on(th),Ir=nc.lowlevel;function rh(n){let e;typeof n=="string"?e=Buffer.from(n,"hex"):e=n;const t=new Uint8Array(64),r=[Ir.gf(),Ir.gf(),Ir.gf(),Ir.gf()],s=new Uint8Array([...new Uint8Array(e),...new Uint8Array(32)]),o=new Uint8Array(32);Ir.crypto_hash(t,s,32),t[0]&=248,t[31]&=127,t[31]|=64,Ir.scalarbase(r,t),Ir.pack(o,r);for(let i=0;i<32;i+=1)s[i+32]=o[i];return{sk:Buffer.from(s),pk:Buffer.from(o)}}function nh(n){return(e,t,r,s)=>e.method==="solana_chainId"?(t.result=n,s()):r()}function sh(n){return(e,t,r,s)=>e.method==="solana_provider_config"?(t.result=n,s()):r()}function sc(n){const{chainId:e}=n;return Rn([nh(e),sh(n)])}function oh(n){const{rpcTarget:e}=n,t=hc({rpcTarget:e});return{networkMiddleware:Rn([sc(n),t]),fetchMiddleware:t}}function ih(n){let{getAccounts:e}=n;return Qn(async(t,r,s)=>{const{method:o}=t;if(o!=="getAccounts")return s();if(!e)throw new Error("WalletMiddleware - opts.getAccounts not provided");const i=await e(t);r.result=i})}function ah(n){let{requestAccounts:e}=n;return Qn(async(t,r,s)=>{const{method:o}=t;if(o!=="requestAccounts")return s();if(!e)throw new Error("WalletMiddleware - opts.requestAccounts not provided");const i=await e(t);r.result=i})}function Jt(n,e){return Qn(async(t,r,s)=>{const{method:o}=t;if(o!==n)return s();if(!e)throw new Error(`WalletMiddleware - ${n} not provided`);const i=await e(t);r.result=i})}function Lo(n){const{getAccounts:e,requestAccounts:t,signTransaction:r,signAndSendTransaction:s,signAllTransactions:o,signMessage:i,getPrivateKey:c,getSecretKey:u}=n;return Rn([ah({requestAccounts:t}),ih({getAccounts:e}),Jt("signTransaction",r),Jt("signAndSendTransaction",s),Jt("signAllTransactions",o),Jt("signMessage",i),Jt("solanaPrivateKey",c),Jt("private_key",c),Jt("solanaSecretKey",u)])}function ch(n){let{addNewChainConfig:e,switchSolanaChain:t}=n;return Rn([Jt("addSolanaChain",e),Jt("switchSolanaChain",t)])}function fh(n){let{updatePrivatekey:e}=n;return Rn([Jt("updateAccount",e)])}class Po extends ro{constructor(e){let{config:t,state:r}=e;super({config:{chainConfig:xr(xr({},t.chainConfig),{},{chainNamespace:$n.SOLANA})},state:r})}async switchChain(e){throw dc.unsupportedOperation("Chain switching is not supported by this adapter")}async setupProvider(e){const t=new so,r=this.getProviderHandlers(e),s=Lo(r);t.push(s);const o=sc(this.config.chainConfig);t.push(o);const i=this.getInjectedProviderProxy(e);i&&t.push(i);const c=oo(t);this.updateProviderEngineProxy(c),await this.lookupNetwork()}async lookupNetwork(){const{chainConfig:e}=this.config;return this.update({chainId:e.chainId}),e.chainId||""}getInjectedProviderProxy(e){}}const oc=n=>({requestAccounts:async()=>n.publicKey?[Xt.encode(n.publicKey.toBytes())]:[],getAccounts:async()=>n.publicKey?[Xt.encode(n.publicKey.toBytes())]:[],getPrivateKey:async()=>{throw je.rpcErrors.methodNotSupported()},getSecretKey:async()=>{throw je.rpcErrors.methodNotSupported()},signTransaction:async t=>await n.signTransaction(t.params.message),signMessage:async t=>(await n.signMessage(t.params.message,t.params.display)).signature,signAllTransactions:async t=>{var r,s;if(!((r=t.params)!==null&&r!==void 0&&r.message)||!((s=t.params)!==null&&s!==void 0&&s.message.length))throw je.rpcErrors.invalidParams("message");return await n.signAllTransactions(t.params.message)},signAndSendTransaction:async t=>({signature:(await n.signAndSendTransaction(t.params.message)).signature})});function ic(n){return Qn(async(e,t,r)=>{const s=await n.request(e);t.result=s})}class uh extends Po{getProviderHandlers(e){return oc(e)}getInjectedProviderProxy(e){return ic(e)}}const Ds=n=>n.version!==void 0||n instanceof Qr,lh=(n,e)=>({requestAccounts:async()=>{const{data:r}=await n.connect();return[r.publicKey]},getAccounts:async()=>{const{data:r}=await n.connect();return[r.publicKey]},getPrivateKey:async()=>{throw je.rpcErrors.methodNotSupported()},getSecretKey:async()=>{throw je.rpcErrors.methodNotSupported()},signTransaction:async r=>{const s=r.params.message;if(!s)throw je.rpcErrors.invalidRequest({message:"Invalid transaction message"});const o=Ds(s)?s.message.serialize():s.serializeMessage(),{data:i}=await n.signTransaction(Xt.encode(o));if(!i.publicKey||!i.signature)throw new Error("Invalid signature from slope wallet");const c=new be(i.publicKey),u=Xt.decode(i.signature);return s.addSignature(c,Buffer.from(u)),s},signMessage:async r=>{const s=await n.signMessage(r.params.message);return Xt.decode(s.data.signature)},signAndSendTransaction:async r=>{const s=e();if(!s)throw je.providerErrors.custom({message:"Provider is not initialized",code:4902});const o=r.params.message;if(!o)throw je.rpcErrors.invalidRequest({message:"Invalid transaction message"});const i=Ds(o)?o.message.serialize():o.serializeMessage(),{data:c}=await n.signTransaction(Xt.encode(i));if(!c.publicKey||!c.signature)throw new Error("Invalid signature from slope wallet");const u=new be(c.publicKey),p=Xt.decode(c.signature);o.addSignature(u,Buffer.from(p));const g=await s.request({method:"solana_provider_config"});return{signature:await new Qa(g.rpcTarget).sendRawTransaction(o.serialize())}},signAllTransactions:async r=>{var s,o,i;if(!((s=r.params)!==null&&s!==void 0&&s.message)||!((o=r.params)!==null&&o!==void 0&&o.message.length))throw je.rpcErrors.invalidParams("message");const c=r.params.message,{length:u}=c,p=[];for(let S=0;S<u;S++){const m=c[S],y=Ds(m)?m.message.serialize():m.serializeMessage();p.push(Xt.encode(y))}const{msg:g,data:b}=await n.signAllTransactions(p);if(!b.publicKey||((i=b.signatures)===null||i===void 0?void 0:i.length)!==u)throw new Error(g);const I=new be(b.publicKey);for(let S=0;S<u;S++){const m=Xt.decode(b.signatures[S]);c[S].addSignature(I,Buffer.from(m))}return c}});class dh extends Po{getProviderHandlers(e){return lh(e,this.getProviderEngineProxy.bind(this))}}const hh=(n,e)=>{const t=oc(n);return t.signAndSendTransaction=async r=>{const s=e();if(!s)throw je.providerErrors.custom({message:"Provider is not initialized",code:4902});const o=await n.signTransaction(r.params.message),i=await s.request({method:"solana_provider_config"});return{signature:await new Qa(i.rpcTarget).sendRawTransaction(o.serialize())}},t.signMessage=async r=>await n.signMessage(r.params.message,r.params.display),t};class ph extends Po{getProviderHandlers(e){return hh(e,this.getProviderEngineProxy.bind(this))}}const gh=n=>({requestAccounts:async()=>await n.request({method:"solana_requestAccounts",params:{}}),getAccounts:async()=>await n.request({method:"solana_requestAccounts",params:{}}),getPrivateKey:async()=>{throw je.rpcErrors.methodNotSupported()},getSecretKey:async()=>{throw je.rpcErrors.methodNotSupported()},signMessage:async t=>{var r;if(!((r=t.params)!==null&&r!==void 0&&r.message))throw je.rpcErrors.invalidParams("message");return await n.signMessage(t.params.message)},signTransaction:async t=>{var r;if(!((r=t.params)!==null&&r!==void 0&&r.message))throw je.rpcErrors.invalidParams("message");const s=t.params.message;return await n.signTransaction(s)},signAndSendTransaction:async t=>{var r;if(!((r=t.params)!==null&&r!==void 0&&r.message))throw je.rpcErrors.invalidParams("message");const s=t.params.message;return{signature:await n.sendTransaction(s)}},signAllTransactions:async t=>{var r,s;if(!((r=t.params)!==null&&r!==void 0&&r.message)||!((s=t.params)!==null&&s!==void 0&&s.message.length))throw je.rpcErrors.invalidParams("message");const o=t.params.message;return await n.signAllTransactions(o)}});class yh extends ro{constructor(e){let{config:t,state:r}=e;super({config:{chainConfig:xr(xr({},t.chainConfig),{},{chainNamespace:$n.SOLANA})},state:r})}async switchChain(e){await this.provider.request({method:"switchSolanaChain",params:[{chainId:e.chainId}]})}async addChain(e){super.addChain(e),await this.provider.request({method:"addNewChainConfig",params:[{chainId:e.chainId,chainName:e.displayName,rpcUrls:[e.rpcTarget],blockExplorerUrls:[e.blockExplorer],nativeCurrency:{name:e.tickerName,symbol:e.ticker,decimals:e.decimals||18}}]})}async setupProvider(e){this.handleInjectedProviderUpdate(e),await this.setupEngine(e)}async lookupNetwork(){if(!this.provider)throw je.providerErrors.custom({message:"Torus solana provider is not initialized",code:4902});const{chainId:e}=this.config.chainConfig,t=await this.provider.request({method:"solana_chainId"}),r=qo(t.toString())?t:`0x${parseInt(t,10).toString(16)}`;if(e!==r)throw no.rpcConnectionError(`Invalid network, net_version is: ${r}, expected: ${e}`);return this.update({chainId:r}),this.emit("connect",{chainId:this.state.chainId}),this.emit("chainChanged",this.state.chainId),this.state.chainId}async setupEngine(e){const t=gh(e),r=Lo(t),s=ic(e),o=new so;o.push(r),o.push(s);const i=oo(o);this.updateProviderEngineProxy(i),await this.lookupNetwork()}async handleInjectedProviderUpdate(e){e.on("accountsChanged",async t=>{this.emit("accountsChanged",t)}),e.on("chainChanged",async t=>{const r=qo(t)?t:`0x${parseInt(t,10).toString(16)}`;this.configure({chainConfig:xr(xr({},this.config.chainConfig),{},{chainId:r})}),await this.setupProvider(e)})}}async function wh(n){let{privKey:e,getProviderEngineProxy:t}=n;const r=()=>_n.fromSecretKey(Buffer.from(e,"hex"));if(typeof e!="string")throw no.invalidParams("privKey must be a string");const s=r();return{requestAccounts:async()=>[s.publicKey.toBase58()],getAccounts:async()=>[s.publicKey.toBase58()],getPrivateKey:async()=>e,getSecretKey:async()=>Xt.encode(s.secretKey),signTransaction:async i=>{var c;if(!((c=i.params)!==null&&c!==void 0&&c.message))throw je.rpcErrors.invalidParams("message");const u=i.params.message;return u.version!==void 0||u instanceof Qr?u.sign([s]):u.partialSign(s),u},signMessage:async i=>{var c;if(!((c=i.params)!==null&&c!==void 0&&c.message))throw je.rpcErrors.invalidParams("message");return nc.sign.detached(i.params.message,s.secretKey)},signAndSendTransaction:async i=>{var c;if(!((c=i.params)!==null&&c!==void 0&&c.message))throw je.rpcErrors.invalidParams("message");const u=t();if(!u)throw je.providerErrors.custom({message:"Provider is not initialized",code:4902});const p=i.params.message;return p.version!==void 0||p instanceof Qr?p.sign([s]):p.partialSign(s),{signature:await u.request({method:"sendTransaction",params:[Buffer.from(p.serialize()).toString("base64"),{encoding:"base64",preflightCommitment:"confirmed"}]})}},signAllTransactions:async i=>{var c,u,p;if(!((c=i.params)!==null&&c!==void 0&&c.message)||!((u=i.params)!==null&&u!==void 0&&u.message.length))throw je.rpcErrors.invalidParams("message");const g=(p=i.params)===null||p===void 0?void 0:p.message;for(const b of g||[]){const I=b;I.version!==void 0||I instanceof Qr?I.sign([s]):I.partialSign(s)}return g}}}var ac;class Uo extends ro{constructor(e){let{config:t,state:r}=e;super({config:{chainConfig:xr(xr({},t.chainConfig),{},{chainNamespace:$n.SOLANA})},state:r})}async enable(){if(!this.state.privateKey)throw je.providerErrors.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});return await this.setupProvider(this.state.privateKey),this._providerEngineProxy.request({method:"eth_accounts"})}getEd25519Key(e){return rh(e).sk.toString("hex").padStart(128,"0")}async setupProvider(e){const t=await wh({privKey:e,getProviderEngineProxy:this.getProviderEngineProxy.bind(this)}),r=Lo(t),s=new so,{networkMiddleware:o}=oh(this.config.chainConfig);s.push(this.getChainSwitchMiddleware()),s.push(this.getAccountMiddleware()),s.push(r),s.push(o);const i=oo(s);this.updateProviderEngineProxy(i),await this.lookupNetwork()}async updateAccount(e){if(!this._providerEngineProxy)throw je.providerErrors.custom({message:"Provider is not initialized",code:4902});await this._providerEngineProxy.request({method:"solanaPrivateKey"})!==e.privateKey&&(await this.setupProvider(e.privateKey),this.emit("accountsChanged",{accounts:await this._providerEngineProxy.request({method:"requestAccounts"})}))}async switchChain(e){if(!this._providerEngineProxy)throw je.providerErrors.custom({message:"Provider is not initialized",code:4902});const t=this.getChainConfig(e.chainId);this.update({chainId:"loading"}),this.configure({chainConfig:t});const r=await this._providerEngineProxy.request({method:"solanaPrivateKey"});await this.setupProvider(r)}async lookupNetwork(){if(!this._providerEngineProxy)throw je.providerErrors.custom({message:"Provider is not initialized",code:4902});const e=await this._providerEngineProxy.request({method:"getHealth",params:[]}),{chainConfig:t}=this.config;if(e!=="ok")throw no.rpcConnectionError(`Failed to lookup network for following rpc target: ${t.rpcTarget}`);return this.update({chainId:t.chainId}),this.state.chainId!==t.chainId&&(this.emit("chainChanged",this.state.chainId),this.emit("connect",{chainId:this.state.chainId})),this.state.chainId}getChainSwitchMiddleware(){return ch({addNewChainConfig:async r=>{if(!r.params)throw je.rpcErrors.invalidParams("Missing request params");const{chainId:s,chainName:o,rpcUrls:i,blockExplorerUrls:c,nativeCurrency:u}=r.params;if(!s)throw je.rpcErrors.invalidParams("Missing chainId in chainParams");if(!i||i.length===0)throw je.rpcErrors.invalidParams("Missing rpcUrls in chainParams");if(!u)throw je.rpcErrors.invalidParams("Missing nativeCurrency in chainParams");this.addChain({chainNamespace:$n.SOLANA,chainId:s,ticker:(u==null?void 0:u.symbol)||"SOL",tickerName:(u==null?void 0:u.name)||"Solana",displayName:o,rpcTarget:i[0],blockExplorer:(c==null?void 0:c[0])||"",decimals:(u==null?void 0:u.decimals)||9})},switchSolanaChain:async r=>{if(!r.params)throw je.rpcErrors.invalidParams("Missing request params");if(!r.params.chainId)throw je.rpcErrors.invalidParams("Missing chainId");await this.switchChain(r.params)}})}getAccountMiddleware(){return fh({updatePrivatekey:async t=>{if(!t.params)throw je.rpcErrors.invalidParams("Missing request params");if(!t.params.privateKey)throw je.rpcErrors.invalidParams("Missing privateKey");const{privateKey:r}=t.params;await this.updateAccount({privateKey:r})}})}}ac=Uo;_i(Uo,"getProviderInstance",async n=>{const e=new ac({config:{chainConfig:n.chainConfig}});return await e.setupProvider(n.privKey),e});class bh{constructor(e){_i(this,"provider",void 0),this.provider=e}async requestAccounts(){return await this.provider.request({method:"requestAccounts"})}async signAndSendTransaction(e){const{signature:t}=await this.provider.request({method:"signAndSendTransaction",params:{message:e}});return{signature:t}}async signTransaction(e){return await this.provider.request({method:"signTransaction",params:{message:e}})}async signAllTransactions(e){return await this.provider.request({method:"signAllTransactions",params:{message:e}})}async signMessage(e){return await this.provider.request({method:"signMessage",params:{message:e}})}async request(e){return await this.provider.request(e)}}const Bh=Object.freeze(Object.defineProperty({__proto__:null,PhantomInjectedProvider:uh,SlopeInjectedProxyProvider:dh,SolanaPrivateKeyProvider:Uo,SolanaWallet:bh,SolflareInjectedProvider:ph,TorusInjectedProvider:yh},Symbol.toStringTag,{value:"Module"}));export{be as P,yh as T,uh as a,Xt as b,Bh as s};
